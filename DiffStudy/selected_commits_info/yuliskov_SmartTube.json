[
  {
    "oid": "53779148121b79e1e3625a5dae59000bf39c0cd9",
    "message": "precise seeking preview",
    "date": "2020-12-01T14:52:30Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/53779148121b79e1e3625a5dae59000bf39c0cd9",
    "details": {
      "sha": "48b892ec6b7758337a37827803abc5cc3f7aecdb",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/previewtimebar/StoryboardManager.java",
      "status": "modified",
      "additions": 12,
      "deletions": 2,
      "changes": 14,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/53779148121b79e1e3625a5dae59000bf39c0cd9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fpreviewtimebar%2FStoryboardManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/53779148121b79e1e3625a5dae59000bf39c0cd9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fpreviewtimebar%2FStoryboardManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fpreviewtimebar%2FStoryboardManager.java?ref=53779148121b79e1e3625a5dae59000bf39c0cd9",
      "patch": "@@ -88,13 +88,23 @@ private void initSeekPositions() {\n             return;\r\n         }\r\n \r\n-        int size = (int) (mLengthMs / FRAME_DURATION_MS) + 1;\r\n+        int size = (int) (mLengthMs / getFrameDurationMsAlt());\r\n         mSeekPositions = new long[size];\r\n         for (int i = 0; i < mSeekPositions.length; i++) {\r\n-            mSeekPositions[i] = i * mLengthMs / mSeekPositions.length;\r\n+            mSeekPositions[i] = i * (mLengthMs / mSeekPositions.length);\r\n         }\r\n     }\r\n \r\n+    private long getFrameDurationMs() {\r\n+        return FRAME_DURATION_MS;\r\n+    }\r\n+\r\n+    private long getFrameDurationMsAlt() {\r\n+        Size groupSize = mStoryboard.getGroupSize();\r\n+\r\n+        return mStoryboard.getGroupDurationMS() / (groupSize.getRowCount() * groupSize.getColCount());\r\n+    }\r\n+\r\n     public long[] getSeekPositions() {\r\n         if (mSeekPositions == null || mSeekPositions.length < 10) {\r\n             // Preventing from video being skipped fully\r",
      "parent_sha": "798428ef32768623f9d62f76c4848d37c5bdadab"
    }
  },
  {
    "oid": "96f97ead1dce53f5a83f142c113ce9411ca3bc6a",
    "message": "desc: improve link click handling: upd",
    "date": "2022-03-28T23:32:15Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/96f97ead1dce53f5a83f142c113ce9411ca3bc6a",
    "details": {
      "sha": "4afafc104923bf5101beedfa319092501d0ded12",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/mod/leanback/misc/LeanbackListPreferenceDialogFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/96f97ead1dce53f5a83f142c113ce9411ca3bc6a/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FLeanbackListPreferenceDialogFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/96f97ead1dce53f5a83f142c113ce9411ca3bc6a/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FLeanbackListPreferenceDialogFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FLeanbackListPreferenceDialogFragment.java?ref=96f97ead1dce53f5a83f142c113ce9411ca3bc6a",
      "patch": "@@ -184,7 +184,7 @@ public void onSaveInstanceState(Bundle outState) {\n             messageView.setVisibility(View.VISIBLE);\n             messageView.setText(message);\n \n-            LinkifyCompat.addLinks(messageView, Linkify.WEB_URLS, (link) -> Utils.showMultiChooser(getContext(), Uri.parse(link)));\n+            LinkifyCompat.addLinks(messageView, Linkify.WEB_URLS, (link) -> Utils.showMultiChooser(messageView.getContext(), Uri.parse(link)));\n \n             // Modified. Remove other views.\n             ViewGroup parent = (ViewGroup) verticalGridView.getParent();",
      "parent_sha": "0d6e807a7ba63563d84230f5930d7e6913c8714a"
    }
  },
  {
    "oid": "04cfe63f351602f9339f0638512065cd25d4f2bb",
    "message": "upd",
    "date": "2022-07-21T02:14:36Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/04cfe63f351602f9339f0638512065cd25d4f2bb",
    "details": {
      "sha": "c62ea16faed374e3debbf3989187cd52dd1394c1",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/settings/PlayerSettingsPresenter.java",
      "status": "modified",
      "additions": 8,
      "deletions": 7,
      "changes": 15,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/04cfe63f351602f9339f0638512065cd25d4f2bb/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FPlayerSettingsPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/04cfe63f351602f9339f0638512065cd25d4f2bb/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FPlayerSettingsPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FPlayerSettingsPresenter.java?ref=04cfe63f351602f9339f0638512065cd25d4f2bb",
      "patch": "@@ -298,13 +298,14 @@ private void appendTweaksCategory(AppDialogPresenter settingsPresenter) {\n                 option -> GlobalPreferences.instance(getContext()).enableChannelsService(!option.isSelected()),\r\n                 !GlobalPreferences.instance(getContext()).isChannelsServiceEnabled()));\r\n \r\n-        options.add(UiOptionItem.from(\"Prefer IPv4 DNS\",\r\n-                option -> GlobalPreferences.instance(getContext()).preferIPv4Dns(option.isSelected()),\r\n-                GlobalPreferences.instance(getContext()).isIPv4DnsPreferred()));\r\n-\r\n-        options.add(UiOptionItem.from(\"Enable DNS over HTTPS\",\r\n-                option -> GlobalPreferences.instance(getContext()).enableDnsOverHttps(option.isSelected()),\r\n-                GlobalPreferences.instance(getContext()).isDnsOverHttpsEnabled()));\r\n+        // Disabled inside RetrofitHelper\r\n+        //options.add(UiOptionItem.from(\"Prefer IPv4 DNS\",\r\n+        //        option -> GlobalPreferences.instance(getContext()).preferIPv4Dns(option.isSelected()),\r\n+        //        GlobalPreferences.instance(getContext()).isIPv4DnsPreferred()));\r\n+        //\r\n+        //options.add(UiOptionItem.from(\"Enable DNS over HTTPS\",\r\n+        //        option -> GlobalPreferences.instance(getContext()).enableDnsOverHttps(option.isSelected()),\r\n+        //        GlobalPreferences.instance(getContext()).isDnsOverHttpsEnabled()));\r\n \r\n         // Need to be enabled on older version of ExoPlayer (e.g. 2.10.6).\r\n         // It's because there's no tweaks for modern devices.\r",
      "parent_sha": "6ac6ef02c6c7be1d3c70a82031cafa9f84f05e19"
    }
  },
  {
    "oid": "99a5a0343e01f22af05ed34d352d79fe8f87525e",
    "message": "destroyed context fix",
    "date": "2022-04-07T00:53:49Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/99a5a0343e01f22af05ed34d352d79fe8f87525e",
    "details": {
      "sha": "104ddaa64b8bc7e5b1f2020100c6f46d08459c23",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/base/BasePresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/99a5a0343e01f22af05ed34d352d79fe8f87525e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fbase%2FBasePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/99a5a0343e01f22af05ed34d352d79fe8f87525e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fbase%2FBasePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fbase%2FBasePresenter.java?ref=99a5a0343e01f22af05ed34d352d79fe8f87525e",
      "patch": "@@ -54,7 +54,7 @@ public void setContext(Context context) {\n         }\r\n \r\n         // Localization fix: prefer Activity context\r\n-        if (context instanceof Activity) {\r\n+        if (context instanceof Activity && Utils.checkActivity((Activity) context)) {\r\n             mActivity = new WeakReference<>((Activity) context);\r\n         }\r\n \r",
      "parent_sha": "e012e961c91e7647239ac8dbb6e048ff79622d62"
    }
  },
  {
    "oid": "45ded196e057cb93666a88296f47580c8322cf51",
    "message": "sb: disable filler category by default",
    "date": "2022-06-28T22:46:48Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/45ded196e057cb93666a88296f47580c8322cf51",
    "details": {
      "sha": "c511f53580ac8c4ebcdc9fb8e680e1b28105e69f",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/prefs/ContentBlockData.java",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/45ded196e057cb93666a88296f47580c8322cf51/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FContentBlockData.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/45ded196e057cb93666a88296f47580c8322cf51/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FContentBlockData.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FContentBlockData.java?ref=45ded196e057cb93666a88296f47580c8322cf51",
      "patch": "@@ -225,7 +225,11 @@ private void restoreState() {\n         // Easy add new segments\r\n         for (String segmentCategory : mAllCategories) {\r\n             if (getAction(segmentCategory) == ACTION_UNDEFINED) {\r\n-                mActions.add(SegmentAction.from(segmentCategory, ACTION_SKIP_WITH_TOAST));\r\n+                if (SponsorSegment.CATEGORY_FILLER.equals(segmentCategory)) {\r\n+                    mActions.add(SegmentAction.from(segmentCategory, ACTION_DO_NOTHING));\r\n+                } else {\r\n+                    mActions.add(SegmentAction.from(segmentCategory, ACTION_SKIP_WITH_TOAST));\r\n+                }\r\n             }\r\n         }\r\n     }\r",
      "parent_sha": "4766ef3a9de6cdfac53e41ccd3b8587c6319072d"
    }
  },
  {
    "oid": "abbb78be9e67a4cd3690fa91848f21b573d287dc",
    "message": "settings: master password: don't ask passd if the app already started",
    "date": "2023-03-29T23:58:59Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/abbb78be9e67a4cd3690fa91848f21b573d287dc",
    "details": {
      "sha": "7e8185eb244a8336dd662d17de8c6f08c67e43a0",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/SplashPresenter.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/abbb78be9e67a4cd3690fa91848f21b573d287dc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FSplashPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/abbb78be9e67a4cd3690fa91848f21b573d287dc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FSplashPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FSplashPresenter.java?ref=abbb78be9e67a4cd3690fa91848f21b573d287dc",
      "patch": "@@ -307,7 +307,8 @@ private void applyNewIntent(Intent intent) {\n     private void checkMasterPassword(Runnable onSuccess) {\r\n         String password = GeneralData.instance(getContext()).getMasterPassword();\r\n \r\n-        if (password == null) {\r\n+        // No passwd or the app already started\r\n+        if (password == null || ViewManager.instance(getContext()).getTopView() != null) {\r\n             onSuccess.run();\r\n             getView().finishView();\r\n         } else {\r",
      "parent_sha": "df448097d97f5faf5eb90087b465724d77f43754"
    }
  },
  {
    "oid": "662cdf39641cecad3178bf27dbeb3fd1481ca3be",
    "message": "exo: enable foreground mode",
    "date": "2021-08-16T19:02:04Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/662cdf39641cecad3178bf27dbeb3fd1481ca3be",
    "details": {
      "sha": "5acb64057529d4323c2f8b3714deb7acdbb9a140",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/662cdf39641cecad3178bf27dbeb3fd1481ca3be/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/662cdf39641cecad3178bf27dbeb3fd1481ca3be/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=662cdf39641cecad3178bf27dbeb3fd1481ca3be",
      "patch": "@@ -363,9 +363,7 @@ private void createPlayer() {\n         mPlayer = mPlayerInitializer.createPlayer(getContext(), renderersFactory, trackSelector);\n         // Try to fix decoder error on Nvidia Shield 2019.\n         // Init resources as early as possible.\n-        //mPlayer.setForegroundMode(true);\n-        //mPlayer.setRepeatMode(Player.REPEAT_MODE_OFF);\n-        //mPlayer.setShuffleModeEnabled(false);\n+        mPlayer.setForegroundMode(true);\n \n         mExoPlayerController.setPlayer(mPlayer);\n         mExoPlayerController.setTrackSelector(trackSelector);",
      "parent_sha": "4b2d88c0be4c28397b3c33765a5573374d0c3b86"
    }
  },
  {
    "oid": "b2d98a7f7095fcb126ac0b6f71afbbb63ae2ae5f",
    "message": "search refactor",
    "date": "2021-07-21T12:21:35Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/b2d98a7f7095fcb126ac0b6f71afbbb63ae2ae5f",
    "details": {
      "sha": "4f45fbfae39148e15aac4afaf87822301f71bbd8",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/mod/leanback/misc/SearchSupportFragment.java",
      "status": "modified",
      "additions": 11,
      "deletions": 2,
      "changes": 13,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/b2d98a7f7095fcb126ac0b6f71afbbb63ae2ae5f/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FSearchSupportFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/b2d98a7f7095fcb126ac0b6f71afbbb63ae2ae5f/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FSearchSupportFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FSearchSupportFragment.java?ref=b2d98a7f7095fcb126ac0b6f71afbbb63ae2ae5f",
      "patch": "@@ -737,15 +737,24 @@ void updateSearchBarNextFocusId() {\n     }\n \n     void updateFocus() {\n-        if (mResultAdapter != null && mResultAdapter.size() > 0\n+        if (mResultAdapter != null && mResultAdapter.size() > 1\n                 && mRowsSupportFragment != null && mRowsSupportFragment.getAdapter() == mResultAdapter) {\n             focusOnResults();\n         } else {\n-            // Fixed moving focus to voice button when activity stated\n+            // Fixed moving focus to voice button when activity started\n             //mSearchBar.requestFocus();\n         }\n+\n+        // MOD: Trying to fix lost focus on voice search (rare bug)\n+        if (!mSpeechOrbView.isFocused() && !mSearchTextEditor.isFocused()) {\n+            mSpeechOrbView.requestFocus();\n+        }\n     }\n \n+    /**\n+     * Select rows container after query submit<br/>\n+     * May helps with \"hide kbd on back properly\"\n+     */\n     protected void focusOnResults() {\n         if (mRowsSupportFragment == null || mRowsSupportFragment.getVerticalGridView() == null\n                 || mResultAdapter.size() == 0) {",
      "parent_sha": "064cf1fde16d50f21c077bbfcae2f779009c8f83"
    }
  },
  {
    "oid": "fffd59e6f2d461a53c6476f35224c25c0df4ee3e",
    "message": "player controls timeout refactor",
    "date": "2020-12-17T18:59:25Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/fffd59e6f2d461a53c6476f35224c25c0df4ee3e",
    "details": {
      "sha": "10ab940b669a1e4fe7fc406038cc841856845e20",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/fffd59e6f2d461a53c6476f35224c25c0df4ee3e/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/fffd59e6f2d461a53c6476f35224c25c0df4ee3e/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=fffd59e6f2d461a53c6476f35224c25c0df4ee3e",
      "patch": "@@ -129,7 +129,7 @@ private void setupPlayerBackground() {\n         }\n     }\n \n-    // NOTE: depending of SDK version Start/Stop may be called with delay (SDK_INT > 23) or not called at all (PIP mode)!\n+    // NOTE: depending of SDK version Start/Stop may be called with delay (SDK_INT > 23) or not called at all (PIP/Dialogs)!\n \n     @Override\n     public void onResume() {\n@@ -149,6 +149,9 @@ public void onPause() {\n             releasePlayer();\n             mEventListener.onViewPaused();\n         }\n+\n+        // Fix controls pop-up upon player initialization.\n+        hideControlsOverlay(mIsAnimationEnabled);\n     }\n \n     //@Override",
      "parent_sha": "03766ea9830f12a867cb8ba37c169e26030877c6"
    }
  },
  {
    "oid": "9b228ca337a0a9f54e83513d2d210927755ba497",
    "message": "bit refactor",
    "date": "2024-11-14T08:07:54Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/9b228ca337a0a9f54e83513d2d210927755ba497",
    "details": {
      "sha": "aa21f5564362c21e7382c8a44d39136e0693dc97",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/service/SidebarService.java",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/9b228ca337a0a9f54e83513d2d210927755ba497/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fservice%2FSidebarService.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/9b228ca337a0a9f54e83513d2d210927755ba497/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fservice%2FSidebarService.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fservice%2FSidebarService.java?ref=9b228ca337a0a9f54e83513d2d210927755ba497",
      "patch": "@@ -245,7 +245,9 @@ private void initSections() {\n \r\n     private void initPinnedItems() {\r\n         for (int sectionId : mDefaultSections.values()) {\r\n-            enableSection(sectionId, true);\r\n+            // Notifications is broken\r\n+            enableSection(sectionId, sectionId != MediaGroup.TYPE_NOTIFICATIONS);\r\n+            //enableSection(sectionId, true);\r\n         }\r\n     }\r\n \r",
      "parent_sha": "25799c1a800cdc3c4d1ae8efd656737e5539cf2f"
    }
  },
  {
    "oid": "d8b94641ac18d756047c05551cbef11e747cf8c8",
    "message": "sb fix",
    "date": "2025-02-28T02:18:52Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/d8b94641ac18d756047c05551cbef11e747cf8c8",
    "details": {
      "sha": "9395ea4667b259492f7bc6d9a6ecefb776a8e9f3",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/ContentBlockController.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/d8b94641ac18d756047c05551cbef11e747cf8c8/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FContentBlockController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/d8b94641ac18d756047c05551cbef11e747cf8c8/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FContentBlockController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FContentBlockController.java?ref=d8b94641ac18d756047c05551cbef11e747cf8c8",
      "patch": "@@ -238,7 +238,7 @@ private boolean isPositionInsideSegment(long positionMs, SponsorSegment segment,\n         if (fullMatch) {\r\n             return positionMs >= segment.getStartMs() && positionMs <= segment.getEndMs();\r\n         } else {\r\n-            long windowSizeMs = (long) (1_000 * getPlayer().getSpeed());\r\n+            long windowSizeMs = (long) (2_000 * getPlayer().getSpeed());\r\n             return positionMs >= segment.getStartMs() && positionMs <= Math.min(segment.getStartMs() + windowSizeMs, segment.getEndMs());\r\n         }\r\n     }\r",
      "parent_sha": "cd74e8c634d62809a614d874e06b16211bd0ddc3"
    }
  },
  {
    "oid": "f2ceaa098e43537ca7944d1fcfcf838b86786a9b",
    "message": "state refactor",
    "date": "2021-03-06T09:02:39Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/f2ceaa098e43537ca7944d1fcfcf838b86786a9b",
    "details": {
      "sha": "cf8c73a54d8b10b262a994502ef82ee3cb682e5c",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/StateUpdater.java",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/f2ceaa098e43537ca7944d1fcfcf838b86786a9b/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/f2ceaa098e43537ca7944d1fcfcf838b86786a9b/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java?ref=f2ceaa098e43537ca7944d1fcfcf838b86786a9b",
      "patch": "@@ -271,7 +271,7 @@ private void restorePosition(Video item) {\n \r\n         // internal storage has priority over item data loaded from network\r\n         if (state == null) {\r\n-            boolean containsWebPosition = item.percentWatched > 0 && item.percentWatched < 98;\r\n+            boolean containsWebPosition = item.percentWatched > 0 && item.percentWatched < 100;\r\n             if (containsWebPosition) {\r\n                 // Web state is buggy on short videos (e.g. video clips)\r\n                 boolean isLongVideo = getController().getLengthMs() > MUSIC_VIDEO_LENGTH_MS;\r\n@@ -282,7 +282,8 @@ private void restorePosition(Video item) {\n         }\r\n \r\n         if (state != null && !item.isLive) {\r\n-            boolean isVideoEnded = Math.abs(getController().getLengthMs() - state.positionMs) < 1_000;\r\n+            long remainsMs = getController().getLengthMs() - state.positionMs;\r\n+            boolean isVideoEnded = remainsMs < 1_000;\r\n             if (!isVideoEnded || !getPlayEnabled()) {\r\n                 getController().setPositionMs(state.positionMs);\r\n             }\r",
      "parent_sha": "a1f9aac0d8fcdd1085614da06bfae0899f092cbb"
    }
  },
  {
    "oid": "9a9d67b2ccdf476b2cdeb6aeaf508b33d27b73a1",
    "message": "refactor",
    "date": "2021-04-16T23:47:37Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/9a9d67b2ccdf476b2cdeb6aeaf508b33d27b73a1",
    "details": {
      "sha": "6e3ade5242ce1a8cb5cae800b9dfc001aa8c9c4c",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/9a9d67b2ccdf476b2cdeb6aeaf508b33d27b73a1/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/9a9d67b2ccdf476b2cdeb6aeaf508b33d27b73a1/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=9a9d67b2ccdf476b2cdeb6aeaf508b33d27b73a1",
      "patch": "@@ -648,9 +648,9 @@ public void setVideo(Video video) {\n         mExoPlayerController.setVideo(video);\n \n         if (mPlayerGlue != null && video != null) {\n-            mPlayerGlue.setTitle(video.title);\n-            // Preserve player formatting when no description\n-            mPlayerGlue.setSubtitle(video.description != null ? video.description : \"\");\n+            // Preserve player formatting\n+            mPlayerGlue.setTitle(video.title != null ? video.title : \"...\");\n+            mPlayerGlue.setSubtitle(video.description != null ? video.description : \"...\");\n         }\n     }\n ",
      "parent_sha": "1df8aef268e6cc0c6c2e079994b7cf4b4e167e91"
    }
  },
  {
    "oid": "709bb958e4def81f58691a01271d08bae65e5b9e",
    "message": "crash restore upd",
    "date": "2025-01-28T16:25:26Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/709bb958e4def81f58691a01271d08bae65e5b9e",
    "details": {
      "sha": "f4e2f6ff97e4ccb7d3da1b814f7b92af4e42c4f1",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/browse/BrowseFragment.java",
      "status": "modified",
      "additions": 10,
      "deletions": 3,
      "changes": 13,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/709bb958e4def81f58691a01271d08bae65e5b9e/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fbrowse%2FBrowseFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/709bb958e4def81f58691a01271d08bae65e5b9e/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fbrowse%2FBrowseFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fbrowse%2FBrowseFragment.java?ref=709bb958e4def81f58691a01271d08bae65e5b9e",
      "patch": "@@ -30,6 +30,7 @@\n import com.liskovsoft.smartyoutubetv2.common.app.presenters.SearchPresenter;\n import com.liskovsoft.smartyoutubetv2.common.app.presenters.SplashPresenter;\n import com.liskovsoft.smartyoutubetv2.common.app.views.BrowseView;\n+import com.liskovsoft.smartyoutubetv2.common.app.views.ViewManager;\n import com.liskovsoft.smartyoutubetv2.common.utils.Utils;\n import com.liskovsoft.smartyoutubetv2.tv.R;\n import com.liskovsoft.smartyoutubetv2.tv.presenter.IconHeaderItemPresenter;\n@@ -48,6 +49,7 @@ public class BrowseFragment extends BrowseSupportFragment implements BrowseView\n     private static final String TAG = BrowseFragment.class.getSimpleName();\n     private static final String SELECTED_HEADER_INDEX = \"SelectedHeaderIndex\";\n     private static final String SELECTED_VIDEO = \"SelectedVideo\";\n+    private static final String IS_PLAYER_IN_FOREGROUND = \"IsPlayerInForeground\";\n     private ArrayObjectAdapter mSectionRowAdapter;\n     private BrowsePresenter mBrowsePresenter;\n     private Map<Integer, BrowseSection> mSections;\n@@ -58,14 +60,18 @@ public class BrowseFragment extends BrowseSupportFragment implements BrowseView\n     private boolean mIsFragmentCreated;\n     private int mRestoredHeaderIndex = -1;\n     private Video mRestoredVideo;\n+    private boolean mRestoredInForeground;\n     private boolean mFocusOnContent;\n \n     @Override\n     public void onCreate(Bundle savedInstanceState) {\n         super.onCreate(null);\n \n-        mRestoredHeaderIndex = savedInstanceState != null ? savedInstanceState.getInt(SELECTED_HEADER_INDEX, -1) : -1;\n-        mRestoredVideo = savedInstanceState != null ? Video.fromString(savedInstanceState.getString(SELECTED_VIDEO)) : null;\n+        if (savedInstanceState != null) {\n+            mRestoredHeaderIndex = savedInstanceState.getInt(SELECTED_HEADER_INDEX, -1);\n+            mRestoredVideo = Video.fromString(savedInstanceState.getString(SELECTED_VIDEO));\n+            mRestoredInForeground = savedInstanceState.getBoolean(IS_PLAYER_IN_FOREGROUND, false);\n+        }\n         mIsFragmentCreated = true;\n \n         mSections = new HashMap<>();\n@@ -89,6 +95,7 @@ public void onSaveInstanceState(Bundle outState) {\n         outState.putInt(SELECTED_HEADER_INDEX, getSelectedPosition());\n         if (mBrowsePresenter.getCurrentVideo() != null) {\n             outState.putString(SELECTED_VIDEO, mBrowsePresenter.getCurrentVideo().toString());\n+            outState.putBoolean(IS_PLAYER_IN_FOREGROUND, ViewManager.instance(getContext()).isPlayerInForeground());\n         }\n     }\n \n@@ -119,7 +126,7 @@ public void onActivityCreated(Bundle savedInstanceState) {\n \n             // Restore state after crash\n             selectSectionItem(mRestoredVideo);\n-            if (PlaybackPresenter.instance(getContext()).getPlayer() == null) {\n+            if (PlaybackPresenter.instance(getContext()).getPlayer() == null && mRestoredInForeground) {\n                 PlaybackPresenter.instance(getContext()).openVideo(mRestoredVideo);\n             }\n             mRestoredVideo = null;",
      "parent_sha": "9ffb0e49e15dc1d467841e084bb27f4fa01d2c3f"
    }
  },
  {
    "oid": "b0dd58f69f43aa28bb56cd6ceea982e0994fcca6",
    "message": "ui tweaks",
    "date": "2020-09-27T14:15:47Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/b0dd58f69f43aa28bb56cd6ceea982e0994fcca6",
    "details": {
      "sha": "33a2b20b403a80363c43b8d1d63a0b55415cdf68",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/PlayerUiManager.java",
      "status": "modified",
      "additions": 63,
      "deletions": 3,
      "changes": 66,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/b0dd58f69f43aa28bb56cd6ceea982e0994fcca6/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FPlayerUiManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/b0dd58f69f43aa28bb56cd6ceea982e0994fcca6/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FPlayerUiManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FPlayerUiManager.java?ref=b0dd58f69f43aa28bb56cd6ceea982e0994fcca6",
      "patch": "@@ -4,6 +4,8 @@\n import android.os.Build.VERSION;\r\n import android.os.Handler;\r\n import android.os.Looper;\r\n+import com.liskovsoft.mediaserviceinterfaces.MediaItemManager;\r\n+import com.liskovsoft.mediaserviceinterfaces.MediaService;\r\n import com.liskovsoft.sharedutils.helpers.KeyHelpers;\r\n import com.liskovsoft.sharedutils.helpers.MessageHelpers;\r\n import com.liskovsoft.sharedutils.mylogger.Log;\r\n@@ -14,6 +16,10 @@\n import com.liskovsoft.smartyoutubetv2.common.app.presenters.VideoSettingsPresenter;\r\n import com.liskovsoft.smartyoutubetv2.common.app.views.ViewManager;\r\n import com.liskovsoft.smartyoutubetv2.common.autoframerate.FormatItem;\r\n+import com.liskovsoft.youtubeapi.service.YouTubeMediaService;\r\n+import io.reactivex.Observable;\r\n+import io.reactivex.android.schedulers.AndroidSchedulers;\r\n+import io.reactivex.schedulers.Schedulers;\r\n \r\n import java.util.ArrayList;\r\n import java.util.LinkedHashMap;\r\n@@ -127,17 +133,71 @@ public void onHighQualityClicked() {\n \r\n     @Override\r\n     public void onSubscribeClicked(boolean subscribed) {\r\n-        MessageHelpers.showMessage(mActivity, R.string.not_implemented);\r\n+        if (mController.getVideo() == null) {\r\n+            Log.e(TAG, \"Seems that video isn't initialized yet. Cancelling...\");\r\n+            return;\r\n+        }\r\n+\r\n+        MediaService service = YouTubeMediaService.instance();\r\n+        MediaItemManager mediaItemManager = service.getMediaItemManager();\r\n+\r\n+        Observable<Void> observable;\r\n+\r\n+        if (subscribed) {\r\n+            observable = mediaItemManager.subscribeObserve(mController.getVideo().mediaItem);\r\n+        } else {\r\n+            observable = mediaItemManager.unsubscribeObserve(mController.getVideo().mediaItem);\r\n+        }\r\n+\r\n+        observable\r\n+                .subscribeOn(Schedulers.newThread())\r\n+                .subscribe();\r\n     }\r\n \r\n     @Override\r\n     public void onThumbsDownClicked(boolean thumbsDown) {\r\n-        MessageHelpers.showMessage(mActivity, R.string.not_implemented);\r\n+        if (mController.getVideo() == null) {\r\n+            Log.e(TAG, \"Seems that video isn't initialized yet. Cancelling...\");\r\n+            return;\r\n+        }\r\n+\r\n+        MediaService service = YouTubeMediaService.instance();\r\n+        MediaItemManager mediaItemManager = service.getMediaItemManager();\r\n+\r\n+        Observable<Void> observable;\r\n+\r\n+        if (thumbsDown) {\r\n+            observable = mediaItemManager.setDislikeObserve(mController.getVideo().mediaItem);\r\n+        } else {\r\n+            observable = mediaItemManager.removeDislikeObserve(mController.getVideo().mediaItem);\r\n+        }\r\n+\r\n+        observable\r\n+                .subscribeOn(Schedulers.newThread())\r\n+                .subscribe();\r\n     }\r\n \r\n     @Override\r\n     public void onThumbsUpClicked(boolean thumbsUp) {\r\n-        MessageHelpers.showMessage(mActivity, R.string.not_implemented);\r\n+        if (mController.getVideo() == null) {\r\n+            Log.e(TAG, \"Seems that video isn't initialized yet. Cancelling...\");\r\n+            return;\r\n+        }\r\n+\r\n+        MediaService service = YouTubeMediaService.instance();\r\n+        MediaItemManager mediaItemManager = service.getMediaItemManager();\r\n+\r\n+        Observable<Void> observable;\r\n+\r\n+        if (thumbsUp) {\r\n+            observable = mediaItemManager.setLikeObserve(mController.getVideo().mediaItem);\r\n+        } else {\r\n+            observable = mediaItemManager.removeLikeObserve(mController.getVideo().mediaItem);\r\n+        }\r\n+\r\n+        observable\r\n+                .subscribeOn(Schedulers.newThread())\r\n+                .subscribe();\r\n     }\r\n \r\n     @Override\r",
      "parent_sha": "02fc3c4946cec301efa0901773fa42bb725cf40a"
    }
  },
  {
    "oid": "88a2f08202a3b5ac7a676fd7fc73e021b24b2cb2",
    "message": "typo",
    "date": "2021-11-11T22:41:18Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/88a2f08202a3b5ac7a676fd7fc73e021b24b2cb2",
    "details": {
      "sha": "1b4072cc30ea5a71077ba54a3fb522703d05e5f0",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/search/tags/vineyard/SearchTagsFragmentBase.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/88a2f08202a3b5ac7a676fd7fc73e021b24b2cb2/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2Fvineyard%2FSearchTagsFragmentBase.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/88a2f08202a3b5ac7a676fd7fc73e021b24b2cb2/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2Fvineyard%2FSearchTagsFragmentBase.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2Fvineyard%2FSearchTagsFragmentBase.java?ref=88a2f08202a3b5ac7a676fd7fc73e021b24b2cb2",
      "patch": "@@ -35,7 +35,7 @@ public abstract class SearchTagsFragmentBase extends SearchSupportFragment\n \n     private TagAdapter mSearchTagsAdapter;\n     private ObjectAdapter mItemResultsAdapter;\n-    private ArrayObjectAdapter mResultsAdapter;\n+    private ArrayObjectAdapter mResultsAdapter; // contains tags adapter and results adapter (see attachAdapter method)\n     private ListRowPresenter mResultsPresenter;\n \n     private boolean mIsStopping;",
      "parent_sha": "0b45a2c18f25003bec90a0474cc7b7be3a129612"
    }
  },
  {
    "oid": "568f47a7f4d7349f7bc24cbfd9bdb24f48b59669",
    "message": "exo: async mode test",
    "date": "2020-12-14T10:54:11Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/568f47a7f4d7349f7bc24cbfd9bdb24f48b59669",
    "details": {
      "sha": "93c4b57d9e494c3c58d075ae47e1f7d08ecb6c76",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/other/V3/CustomOverridesRenderersFactory.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/568f47a7f4d7349f7bc24cbfd9bdb24f48b59669/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fother%2FV3%2FCustomOverridesRenderersFactory.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/568f47a7f4d7349f7bc24cbfd9bdb24f48b59669/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fother%2FV3%2FCustomOverridesRenderersFactory.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fother%2FV3%2FCustomOverridesRenderersFactory.java?ref=568f47a7f4d7349f7bc24cbfd9bdb24f48b59669",
      "patch": "@@ -8,6 +8,7 @@\n import com.google.android.exoplayer2.audio.AudioRendererEventListener;\r\n import com.google.android.exoplayer2.audio.AudioSink;\r\n import com.google.android.exoplayer2.audio.MediaCodecAudioRenderer;\r\n+import com.google.android.exoplayer2.mediacodec.MediaCodecRenderer;\r\n import com.google.android.exoplayer2.mediacodec.MediaCodecSelector;\r\n import com.google.android.exoplayer2.video.MediaCodecVideoRenderer;\r\n import com.google.android.exoplayer2.video.VideoRendererEventListener;\r\n@@ -29,7 +30,7 @@ public class CustomOverridesRenderersFactory extends DefaultRenderersFactory {\n     public CustomOverridesRenderersFactory(FragmentActivity activity) {\r\n         super(activity);\r\n         setExtensionRendererMode(EXTENSION_RENDERER_MODE_ON);\r\n-        //experimentalSetVideoMediaCodecOperationMode(MediaCodecRenderer.OPERATION_MODE_ASYNCHRONOUS_DEDICATED_THREAD);\r\n+        experimentalSetVideoMediaCodecOperationMode(MediaCodecRenderer.OPERATION_MODE_ASYNCHRONOUS_DEDICATED_THREAD_ASYNCHRONOUS_QUEUEING);\r\n     }\r\n \r\n     @Override\r",
      "parent_sha": "7145ee78d433a41026a241cd436dba38b584ec2c"
    }
  },
  {
    "oid": "091c3f92f2109d5387d7669a40b1005a19cdf5f0",
    "message": "remote icon fix",
    "date": "2021-10-19T08:27:15Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/091c3f92f2109d5387d7669a40b1005a19cdf5f0",
    "details": {
      "sha": "71e234d6ed53fc693cfb88c03054ff68ebe18f2e",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/misc/RemoteControlService.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/091c3f92f2109d5387d7669a40b1005a19cdf5f0/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FRemoteControlService.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/091c3f92f2109d5387d7669a40b1005a19cdf5f0/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FRemoteControlService.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FRemoteControlService.java?ref=091c3f92f2109d5387d7669a40b1005a19cdf5f0",
      "patch": "@@ -49,7 +49,7 @@ public int onStartCommand(Intent intent, int flags, int startId) {\n     private Notification createNotification() {\r\n         return Utils.createNotification(\r\n                 getApplicationContext(),\r\n-                R.drawable.generic_channels,\r\n+                getApplicationInfo().icon,\r\n                 R.string.background_service_started,\r\n                 ViewManager.instance(getApplicationContext()).getRootActivity());\r\n     }\r",
      "parent_sha": "74c0d6628d5b4798bfc29eb6fca37eb12b6717ca"
    }
  },
  {
    "oid": "b71840adb4ecb71d685c537cbe4b4e56f0102a04",
    "message": "activity finish workaround #2",
    "date": "2021-10-26T12:21:37Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/b71840adb4ecb71d685c537cbe4b4e56f0102a04",
    "details": {
      "sha": "7d3b21be8eff1708cdfe322732f2846961b20293",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackActivity.java",
      "status": "modified",
      "additions": 7,
      "deletions": 3,
      "changes": 10,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/b71840adb4ecb71d685c537cbe4b4e56f0102a04/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackActivity.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/b71840adb4ecb71d685c537cbe4b4e56f0102a04/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackActivity.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackActivity.java?ref=b71840adb4ecb71d685c537cbe4b4e56f0102a04",
      "patch": "@@ -166,9 +166,13 @@ public void finish() {\n             // Ensure to opening this activity when the user is returning to the app\n             mViewManager.blockTop(this);\n             mViewManager.startParentView(this);\n-        } else if (!mPlayerTweaksData.isActivityFinishWorkaroundEnabled()) {\n-            mPlaybackFragment.onFinish();\n-            super.finish();\n+        } else {\n+            if (mPlayerTweaksData.isActivityFinishWorkaroundEnabled()) {\n+                moveTaskToBack(true);\n+            } else {\n+                mPlaybackFragment.onFinish();\n+                super.finish();\n+            }\n         }\n     }\n ",
      "parent_sha": "5c60764f9ac3c099974520c60a2cfd840bcf6f1c"
    }
  },
  {
    "oid": "6f56cc93068bb3f015c37b2d4126693f9cf96c61",
    "message": "refactor",
    "date": "2021-03-15T16:36:06Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/6f56cc93068bb3f015c37b2d4126693f9cf96c61",
    "details": {
      "sha": "297586df3df8be3c217f84f7c1c4077594f1fda8",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/utils/Utils.java",
      "status": "modified",
      "additions": 10,
      "deletions": 6,
      "changes": 16,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/6f56cc93068bb3f015c37b2d4126693f9cf96c61/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/6f56cc93068bb3f015c37b2d4126693f9cf96c61/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java?ref=6f56cc93068bb3f015c37b2d4126693f9cf96c61",
      "patch": "@@ -211,19 +211,23 @@ public static String toQrCodeLink(String data) {\n         return String.format(QR_CODE_URL_TEMPLATE, data);\r\n     }\r\n \r\n-    /**\r\n-     * <a href=\"https://developer.chrome.com/docs/android/custom-tabs/integration-guide/\">Chrome custom tabs</a>\r\n-     */\r\n     public static void openLink(Context context, String url) {\r\n-        CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\r\n-        CustomTabsIntent customTabsIntent = builder.build();\r\n         try {\r\n-            customTabsIntent.launchUrl(context, Uri.parse(url));\r\n+            openLinkInTabs(context, url);\r\n         } catch (SecurityException e) { // Permission Denial on Android 9\r\n             Helpers.openLink(context, url); // revert to simple in-browser page\r\n         }\r\n     }\r\n \r\n+    /**\r\n+     * <a href=\"https://developer.chrome.com/docs/android/custom-tabs/integration-guide/\">Chrome custom tabs</a>\r\n+     */\r\n+    private static void openLinkInTabs(Context context, String url) {\r\n+        CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\r\n+        CustomTabsIntent customTabsIntent = builder.build();\r\n+        customTabsIntent.launchUrl(context, Uri.parse(url));\r\n+    }\r\n+\r\n     public static void postDelayed(Handler handler, Runnable callback, int delayMs) {\r\n         handler.removeCallbacks(callback);\r\n         handler.postDelayed(callback, delayMs);\r",
      "parent_sha": "534876478084c7b28e7055d96e111d6bb4e89738"
    }
  },
  {
    "oid": "c3de5ebab3a104e4c65796670193efeef95f86cf",
    "message": "player: likes and dislikes add nbsp upd",
    "date": "2024-02-17T01:18:22Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/c3de5ebab3a104e4c65796670193efeef95f86cf",
    "details": {
      "sha": "5e22fa26e1dfd6ee9d5d81691350a26e8357113c",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/c3de5ebab3a104e4c65796670193efeef95f86cf/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/c3de5ebab3a104e4c65796670193efeef95f86cf/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=c3de5ebab3a104e4c65796670193efeef95f86cf",
      "patch": "@@ -850,7 +850,7 @@ private CharSequence createSecondTitle(Video video) {\n         }\n \n         if (getContext() != null && video.dislikeCount != null) {\n-            result = TextUtils.concat(result, Helpers.NON_BREAKING_SPACE, Video.TERTIARY_TEXT_DELIM, Helpers.NON_BREAKING_SPACE, video.dislikeCount, Helpers.NON_BREAKING_SPACE, Helpers.THUMB_DOWN); // color of thumb cannot be changed\n+            result = TextUtils.concat(result, \" \", Video.TERTIARY_TEXT_DELIM, \" \", video.dislikeCount, Helpers.NON_BREAKING_SPACE, Helpers.THUMB_DOWN); // color of thumb cannot be changed\n         }\n \n         if (getContext() != null && video.subscriberCount != null) {",
      "parent_sha": "91497d0db91dbad56ee9dbb9fccdd00885f04c1c"
    }
  },
  {
    "oid": "cb3ee037b0e83f158a7a3cec00a6fa901c337215",
    "message": "browse refactor",
    "date": "2024-08-29T12:45:22Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/cb3ee037b0e83f158a7a3cec00a6fa901c337215",
    "details": {
      "sha": "301e4a49d46b6689f5addf7e7c7e02c77752effd",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/BrowsePresenter.java",
      "status": "modified",
      "additions": 22,
      "deletions": 35,
      "changes": 57,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/cb3ee037b0e83f158a7a3cec00a6fa901c337215/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/cb3ee037b0e83f158a7a3cec00a6fa901c337215/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java?ref=cb3ee037b0e83f158a7a3cec00a6fa901c337215",
      "patch": "@@ -4,9 +4,8 @@\n import android.content.Context;\n \n import com.liskovsoft.mediaserviceinterfaces.yt.ContentService;\n-import com.liskovsoft.mediaserviceinterfaces.yt.ServiceManager;\n-import com.liskovsoft.mediaserviceinterfaces.yt.MediaItemService;\n import com.liskovsoft.mediaserviceinterfaces.yt.NotificationsService;\n+import com.liskovsoft.mediaserviceinterfaces.yt.ServiceManager;\n import com.liskovsoft.mediaserviceinterfaces.yt.SignInService;\n import com.liskovsoft.mediaserviceinterfaces.yt.data.Account;\n import com.liskovsoft.mediaserviceinterfaces.yt.data.MediaGroup;\n@@ -58,7 +57,6 @@\n \n public class BrowsePresenter extends BasePresenter<BrowseView> implements SectionPresenter, VideoGroupPresenter, AccountChangeListener {\n     private static final String TAG = BrowsePresenter.class.getSimpleName();\n-    private static final long HEADER_REFRESH_PERIOD_MS = 120 * 60 * 1_000;\n     @SuppressLint(\"StaticFieldLeak\")\n     private static BrowsePresenter sInstance;\n     private final MainUIData mMainUIData;\n@@ -71,7 +69,6 @@ public class BrowsePresenter extends BasePresenter<BrowseView> implements Sectio\n     private final Map<Integer, BrowseSection> mSectionsMapping;\n     private final AppDataSourceManager mDataSourcePresenter;\n     private final ContentService mContentService;\n-    private final MediaItemService mItemService;\n     private final SignInService mSignInService;\n     private final NotificationsService mNotificationsService;\n     private final DeArrowProcessor mDeArrowProcessor;\n@@ -99,7 +96,6 @@ private BrowsePresenter(Context context) {\n \n         ServiceManager service = YouTubeServiceManager.instance();\n         mContentService = service.getContentService();\n-        mItemService = service.getMediaItemService();\n         mSignInService = service.getSignInService();\n         mNotificationsService = service.getNotificationsService();\n         mDeArrowProcessor = new DeArrowProcessor(getContext(), this::syncItem);\n@@ -555,13 +551,6 @@ public void unpinItem(Video item) {\n         }\n     }\n \n-    private void maybeRefreshHeader() {\n-        long timeAfterPauseMs = System.currentTimeMillis() - mLastUpdateTimeMs;\n-        if (timeAfterPauseMs > HEADER_REFRESH_PERIOD_MS) { // update header every n minutes\n-            refresh();\n-        }\n-    }\n-\n     public void refresh() {\n         refresh(true);\n     }\n@@ -630,10 +619,10 @@ private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group\n         updateVideoGrid(section, group, -1, authCheck);\n     }\n \n-    private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group, int position, boolean authCheck) {\n+    private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group, int column, boolean authCheck) {\n         Log.d(TAG, \"loadMultiGridHeader: Start loading section: \" + section.getTitle());\n \n-        authCheck(authCheck, () -> updateVideoGrid(section, group, position));\n+        authCheck(authCheck, () -> updateVideoGrid(section, group, column));\n     }\n \n     private void updateVideoRows(BrowseSection section, Observable<List<MediaGroup>> groups) {\n@@ -676,23 +665,13 @@ private void updateVideoRows(BrowseSection section, Observable<List<MediaGroup>>\n                         },\n                         error -> {\n                             Log.e(TAG, \"updateRowsHeader error: %s\", error.getMessage());\n-                            if (getView() != null) {\n-                                getView().showProgressBar(false);\n-                            }\n-                            if (getView() != null && getView().isEmpty()) {\n-                                getView().showError(new CategoryEmptyError(getContext()));\n-                                Utils.postDelayed(mRefreshSection, 30_000);\n-                            }\n-                            if (isHomeSection()) { // maybe the history turned off?\n-                                MediaServiceManager.instance().enableHistory(true);\n-                                mGeneralData.enableHistory(true);\n-                            }\n+                            handleLoadError();\n                         });\n \n         mActions.add(updateAction);\n     }\n \n-    private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group, int position) {\n+    private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group, int column) {\n         disposeActions();\n \n         if (getView() == null) {\n@@ -705,7 +684,7 @@ private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group\n \n         getView().showProgressBar(true);\n \n-        VideoGroup firstGroup = VideoGroup.from(section, position);\n+        VideoGroup firstGroup = VideoGroup.from(section, column);\n         firstGroup.setAction(VideoGroup.ACTION_REPLACE);\n         getView().updateSection(firstGroup);\n \n@@ -728,21 +707,15 @@ private void updateVideoGrid(BrowseSection section, Observable<MediaGroup> group\n                                 return;\n                             }\n \n-                            VideoGroup videoGroup = VideoGroup.from(mediaGroup, section, position);\n+                            VideoGroup videoGroup = VideoGroup.from(mediaGroup, section, column);\n                             getView().updateSection(videoGroup);\n                             mDeArrowProcessor.process(videoGroup);\n \n                             continueGroupIfNeeded(videoGroup);\n                         },\n                         error -> {\n                             Log.e(TAG, \"updateGridHeader error: %s\", error.getMessage());\n-                            if (getView() != null) {\n-                                getView().showProgressBar(false);\n-                            }\n-                            if (getView() != null && getView().isEmpty()) {\n-                                getView().showError(new CategoryEmptyError(getContext()));\n-                                Utils.postDelayed(mRefreshSection, 30_000);\n-                            }\n+                            handleLoadError();\n                         });\n \n         mActions.add(updateAction);\n@@ -1087,4 +1060,18 @@ private BrowseSection createPinnedSection(Video item) {\n     private boolean enableRows(Video item) {\n         return mMainUIData.isPinnedChannelRowsEnabled() && item.hasChannel() && !item.isPlaylistAsChannel();\n     }\n+\n+    private void handleLoadError() {\n+        if (getView() != null) {\n+            getView().showProgressBar(false);\n+        }\n+        if (getView() != null && getView().isEmpty()) {\n+            getView().showError(new CategoryEmptyError(getContext()));\n+            Utils.postDelayed(mRefreshSection, 30_000);\n+        }\n+        if (isHomeSection()) { // maybe the history turned off?\n+            MediaServiceManager.instance().enableHistory(true);\n+            mGeneralData.enableHistory(true);\n+        }\n+    }\n }",
      "parent_sha": "f806b48242d57e9b978465279c41e81d58faf04a"
    }
  },
  {
    "oid": "ffb1b3f30c5750b050ed37ada2c2f662aa1b1eca",
    "message": "upd",
    "date": "2021-05-17T20:53:07Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/ffb1b3f30c5750b050ed37ada2c2f662aa1b1eca",
    "details": {
      "sha": "138cdc1dbf15735229297326098ecd6b613cf695",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/StateUpdater.java",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/ffb1b3f30c5750b050ed37ada2c2f662aa1b1eca/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/ffb1b3f30c5750b050ed37ada2c2f662aa1b1eca/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java?ref=ffb1b3f30c5750b050ed37ada2c2f662aa1b1eca",
      "patch": "@@ -151,6 +151,7 @@ public void onPlay() {\n     public void onPause() {\r\n         setPlayEnabled(false);\r\n         Helpers.enableScreensaver(getActivity());\r\n+        saveState();\r\n     }\r\n \r\n     @Override\r\n@@ -270,8 +271,9 @@ private void saveState() {\n         Video video = getController().getVideo();\r\n \r\n         if (video != null) {\r\n-            // Reset position if track is ended.\r\n-            // Skip if paused.\r\n+            // Exceptional cases:\r\n+            // 1) Track is ended\r\n+            // 2) Pause on end enabled\r\n             long remainsMs = getController().getLengthMs() - getController().getPositionMs();\r\n             boolean isPositionActual = remainsMs > 1_000;\r\n             if (isPositionActual || !getPlayEnabled()) { // Is pause after each video enabled?\r",
      "parent_sha": "6adc0cf5075672d2f333c31f1949e0fca721ffdd"
    }
  },
  {
    "oid": "8ec4242fe1876de0d0fec25694ec6617dcdc6b2a",
    "message": "improve restart app: upd",
    "date": "2020-11-27T08:46:19Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/8ec4242fe1876de0d0fec25694ec6617dcdc6b2a",
    "details": {
      "sha": "9328907f9dadbd912eeb1f1b37d808a6a5a5604e",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/views/ViewManager.java",
      "status": "modified",
      "additions": 9,
      "deletions": 3,
      "changes": 12,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/8ec4242fe1876de0d0fec25694ec6617dcdc6b2a/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fviews%2FViewManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/8ec4242fe1876de0d0fec25694ec6617dcdc6b2a/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fviews%2FViewManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fviews%2FViewManager.java?ref=8ec4242fe1876de0d0fec25694ec6617dcdc6b2a",
      "patch": "@@ -7,14 +7,13 @@\n import android.content.ActivityNotFoundException;\r\n import android.content.Context;\r\n import android.content.Intent;\r\n-import android.view.SurfaceView;\r\n import androidx.annotation.NonNull;\r\n import com.liskovsoft.sharedutils.helpers.FileHelpers;\r\n import com.liskovsoft.sharedutils.helpers.Helpers;\r\n import com.liskovsoft.sharedutils.mylogger.Log;\r\n-import com.liskovsoft.smartyoutubetv2.common.misc.MotherActivity;\r\n import com.liskovsoft.smartyoutubetv2.common.prefs.AppPrefs;\r\n import com.liskovsoft.youtubeapi.service.YouTubeMediaService;\r\n+import com.liskovsoft.smartyoutubetv2.common.misc.MotherActivity;\r\n \r\n import java.util.HashMap;\r\n import java.util.Map;\r\n@@ -245,7 +244,7 @@ public void clearCaches() {\n     public void restartApp() {\r\n         persistState();\r\n \r\n-        triggerRebirth(mContext, mViewMapping.get(SplashView.class));\r\n+        triggerRebirth3(mContext, mViewMapping.get(SplashView.class));\r\n     }\r\n \r\n     private void persistState() {\r\n@@ -287,4 +286,11 @@ private static void triggerRebirth2(Context context, Class<?> rootActivity) {\n         mgr.set(AlarmManager.RTC, System.currentTimeMillis() + 100, mPendingIntent);\r\n         System.exit(0);\r\n     }\r\n+\r\n+    public static void triggerRebirth3(Context context, Class<?> myClass) {\r\n+        Intent intent = new Intent(context, myClass);\r\n+        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n+        context.startActivity(intent);\r\n+        Runtime.getRuntime().exit(0);\r\n+    }\r\n }\r",
      "parent_sha": "61a8678e7275f9222d2d15b726d2727405ece6c9"
    }
  },
  {
    "oid": "0935ffef95cc96dc0ffc71c9568086a15b32889c",
    "message": "open section playlist fix",
    "date": "2024-08-21T16:14:01Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/0935ffef95cc96dc0ffc71c9568086a15b32889c",
    "details": {
      "sha": "f92a691e80fd444c165726b4b0bdde426f23b93a",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/ChannelUploadsPresenter.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/0935ffef95cc96dc0ffc71c9568086a15b32889c/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelUploadsPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/0935ffef95cc96dc0ffc71c9568086a15b32889c/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelUploadsPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelUploadsPresenter.java?ref=0935ffef95cc96dc0ffc71c9568086a15b32889c",
      "patch": "@@ -226,8 +226,8 @@ private void continueGroup(VideoGroup group) {\n     }\r\n \r\n     private void update(Video item) {\r\n-        // Enable for liked music (behavior with other playlists is buggy)\r\n-        if (item.isSectionPlaylistEnabled(getContext()) && Helpers.equals(item.playlistId, \"LM\")) {\r\n+        // Liked music fix - not all videos displayed. The behavior with other playlists is buggy.\r\n+        if (Helpers.equals(item.playlistId, \"LM\")) {\r\n             update(item.getGroup());\r\n         } else {\r\n             update(obtainUploadsObservable(item));\r",
      "parent_sha": "bcfb079bfff678af90953f7d95d1c95aedfccf20"
    }
  },
  {
    "oid": "89dcb00c4dad91a9b4a8b2d70226cf56d7bc8437",
    "message": "refactor",
    "date": "2022-06-07T19:20:40Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/89dcb00c4dad91a9b4a8b2d70226cf56d7bc8437",
    "details": {
      "sha": "73d72dcff8532747131b9b83aa9850fc4bcfb4c9",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/AppDialogPresenter.java",
      "status": "modified",
      "additions": 9,
      "deletions": 9,
      "changes": 18,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/89dcb00c4dad91a9b4a8b2d70226cf56d7bc8437/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FAppDialogPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/89dcb00c4dad91a9b4a8b2d70226cf56d7bc8437/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FAppDialogPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FAppDialogPresenter.java?ref=89dcb00c4dad91a9b4a8b2d70226cf56d7bc8437",
      "patch": "@@ -86,15 +86,6 @@ public static AppDialogPresenter instance(Context context) {\n         return sInstance;\r\n     }\r\n \r\n-    /**\r\n-     * Called after {@link #onFinish}\r\n-     */\r\n-    @Override\r\n-    public void onViewDestroyed() {\r\n-        super.onViewDestroyed();\r\n-        clear();\r\n-    }\r\n-\r\n     /**\r\n      * Called when user pressed back button.\r\n      */\r\n@@ -125,6 +116,15 @@ public void onViewInitialized() {\n         getView().addCategories(mCategories);\r\n     }\r\n \r\n+    /**\r\n+     * Called after {@link #onFinish}\r\n+     */\r\n+    @Override\r\n+    public void onViewDestroyed() {\r\n+        super.onViewDestroyed();\r\n+        clear();\r\n+    }\r\n+\r\n     public void showDialog() {\r\n         showDialog(null, null);\r\n     }\r",
      "parent_sha": "620ad0f49a2daf2cf095e73aefb0fcceb9c31f13"
    }
  },
  {
    "oid": "eb0cdcc9afe642e56be330506bef00ce9caca282",
    "message": "bugfix",
    "date": "2021-04-19T18:18:06Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/eb0cdcc9afe642e56be330506bef00ce9caca282",
    "details": {
      "sha": "ebca73ac353de42db6380b689fc889a7c8887942",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/utils/Utils.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/eb0cdcc9afe642e56be330506bef00ce9caca282/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/eb0cdcc9afe642e56be330506bef00ce9caca282/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java?ref=eb0cdcc9afe642e56be330506bef00ce9caca282",
      "patch": "@@ -3,6 +3,7 @@\n import android.annotation.TargetApi;\r\n import android.app.Activity;\r\n import android.app.ActivityManager;\r\n+import android.content.ActivityNotFoundException;\r\n import android.content.ComponentName;\r\n import android.content.Context;\r\n import android.content.Intent;\r\n@@ -216,7 +217,7 @@ public static String toQrCodeLink(String data) {\n     public static void openLink(Context context, String url) {\r\n         try {\r\n             openLinkInTabs(context, url);\r\n-        } catch (SecurityException e) { // Permission Denial on Android 9\r\n+        } catch (SecurityException | ActivityNotFoundException e) { // Permission Denial on Android 9/Chrome Tabs not found\r\n             Helpers.openLink(context, url); // revert to simple in-browser page\r\n         }\r\n     }\r",
      "parent_sha": "625314e279a0864ed16771e280ee65aebfeff457"
    }
  },
  {
    "oid": "c34f00fc2f3bb49344b16807b24bc2c180e48bdc",
    "message": "video buffer refactor: upd",
    "date": "2020-12-14T14:53:30Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/c34f00fc2f3bb49344b16807b24bc2c180e48bdc",
    "details": {
      "sha": "6a9d19b5bbc50a90f9394d294ef785005a53220d",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/HqDialogManager.java",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/c34f00fc2f3bb49344b16807b24bc2c180e48bdc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FHqDialogManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/c34f00fc2f3bb49344b16807b24bc2c180e48bdc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FHqDialogManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FHqDialogManager.java?ref=c34f00fc2f3bb49344b16807b24bc2c180e48bdc",
      "patch": "@@ -15,7 +15,6 @@\n import com.liskovsoft.smartyoutubetv2.common.autoframerate.FormatItem;\r\n import com.liskovsoft.smartyoutubetv2.common.autoframerate.FormatItem.OnFormatSelected;\r\n import com.liskovsoft.smartyoutubetv2.common.autoframerate.FormatItem.Preset;\r\n-import com.liskovsoft.smartyoutubetv2.common.prefs.AppPrefs;\r\n import com.liskovsoft.smartyoutubetv2.common.prefs.PlayerData;\r\n \r\n import java.util.ArrayList;\r\n@@ -47,9 +46,9 @@ public HqDialogManager(StateUpdater stateUpdater) {\n \r\n     @Override\r\n     public void onInitDone() {\r\n+        mPlayerData = PlayerData.instance(getActivity());\r\n         mSettingsPresenter = AppSettingsPresenter.instance(getActivity());\r\n         getController().setBuffer(mPlayerData.getVideoBufferType());\r\n-        mPlayerData = PlayerData.instance(getActivity());\r\n     }\r\n \r\n     @Override\r",
      "parent_sha": "ab3889c59c5acf465de016a64dd354e49c0d2144"
    }
  },
  {
    "oid": "196b863c67923e0ac596ac64be224db1aab8cc62",
    "message": "search: clear results fix",
    "date": "2023-02-10T01:20:13Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/196b863c67923e0ac596ac64be224db1aab8cc62",
    "details": {
      "sha": "7461c2fe5ec97acd212b7a9d71c78a037aa82b36",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/search/tags/SearchTagsFragment.java",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/196b863c67923e0ac596ac64be224db1aab8cc62/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/196b863c67923e0ac596ac64be224db1aab8cc62/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java?ref=196b863c67923e0ac596ac64be224db1aab8cc62",
      "patch": "@@ -107,13 +107,16 @@ public void clearSearch() {\n         }\r\n \r\n         int size = resultsAdapter.size();\r\n+        int index = 0;\r\n \r\n         for (int i = 0; i < size; i++) {\r\n-            Object row = resultsAdapter.get(0);\r\n+            Object row = resultsAdapter.get(index);\r\n             if (row instanceof ListRow &&\r\n                     ((ListRow) row).getAdapter() instanceof VideoGroupObjectAdapter) {\r\n                 // Notify about changes (could help with search autofocus)\r\n-                detachAdapter(0);\r\n+                detachAdapter(index);\r\n+            } else {\r\n+                index++;\r\n             }\r\n         }\r\n     }\r",
      "parent_sha": "18eb61896833d4502bd23234b0599f7058393819"
    }
  },
  {
    "oid": "5514cfc2a4d4f473cd7f62145c76f2f936a88c45",
    "message": "video: mix and regular equality fix",
    "date": "2024-12-17T03:38:14Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/5514cfc2a4d4f473cd7f62145c76f2f936a88c45",
    "details": {
      "sha": "292b0a9c0802181d787cb3f80f515afedf4cb9ad",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/data/Video.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/5514cfc2a4d4f473cd7f62145c76f2f936a88c45/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fdata%2FVideo.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/5514cfc2a4d4f473cd7f62145c76f2f936a88c45/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fdata%2FVideo.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fdata%2FVideo.java?ref=5514cfc2a4d4f473cd7f62145c76f2f936a88c45",
      "patch": "@@ -242,7 +242,7 @@ public boolean equals(@Nullable Object obj) {\n         if (obj instanceof Video) {\n             Video video = (Video) obj;\n \n-            return hashCode() == video.hashCode();\n+            return hashCode() == video.hashCode() && isMix() == video.isMix();\n         }\n \n         return false;",
      "parent_sha": "bc1cd13d26427211f7a26d14b498926bb0557eec"
    }
  },
  {
    "oid": "a39d6e32f6aa24f41ae283b5a6edbaf57d0f7f3a",
    "message": "refactor",
    "date": "2021-04-29T23:39:56Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a39d6e32f6aa24f41ae283b5a6edbaf57d0f7f3a",
    "details": {
      "sha": "aa50f73db2fe9098cb1423fbee4b515a065d3291",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a39d6e32f6aa24f41ae283b5a6edbaf57d0f7f3a/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a39d6e32f6aa24f41ae283b5a6edbaf57d0f7f3a/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=a39d6e32f6aa24f41ae283b5a6edbaf57d0f7f3a",
      "patch": "@@ -282,15 +282,15 @@ public void reloadPlayback() {\n     private void releasePlayer() {\n         // Inside dialogs we could change engine settings on fly\n         if (AppSettingsPresenter.instance(getContext()).isDialogShown()) {\n-            Log.d(TAG, \"releasePlayer: Engine release is blocked. Exiting...\");\n+            Log.d(TAG, \"releasePlayer: Engine release is blocked by dialog. Exiting...\");\n             return;\n         }\n \n         // Background audio mode is complicated (surface destroyed error) on Android 9 and above. So avoid it.\n         if (getPlaybackMode() == PlaybackEngineController.BACKGROUND_MODE_SOUND &&\n             !ViewManager.instance(getContext()).isNewViewPending() &&\n             VERSION.SDK_INT < 28) {\n-            Log.d(TAG, \"releasePlayer: Engine release is blocked. Exiting...\");\n+            Log.d(TAG, \"releasePlayer: Engine release is blocked by background playback. Exiting...\");\n             return;\n         }\n ",
      "parent_sha": "9a9521f9b90147c1927b76e851d2464eaf55becb"
    }
  },
  {
    "oid": "6fe438ff7cd1e7b00d24695d310a7dfabd156095",
    "message": "player: volume fix",
    "date": "2023-08-02T01:13:50Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/6fe438ff7cd1e7b00d24695d310a7dfabd156095",
    "details": {
      "sha": "58c1cfbc11e64f11db4b2f5b853e60b58b9c6a43",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/VideoStateController.java",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/6fe438ff7cd1e7b00d24695d310a7dfabd156095/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoStateController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/6fe438ff7cd1e7b00d24695d310a7dfabd156095/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoStateController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoStateController.java?ref=6fe438ff7cd1e7b00d24695d310a7dfabd156095",
      "patch": "@@ -523,10 +523,10 @@ public boolean getPlayEnabled() {\n     }\r\n \r\n     private void restoreVolume() {\r\n-        if (!mPlayerTweaksData.isPlayerAutoVolumeEnabled() && mPlayerData.getPlayerVolume() == 1.0f) {\r\n-            // Let global auto volume work\r\n-            return;\r\n-        }\r\n+        //if (!mPlayerTweaksData.isPlayerAutoVolumeEnabled() && mPlayerData.getPlayerVolume() == 1.0f) {\r\n+        //    // Let global auto volume work\r\n+        //    return;\r\n+        //}\r\n \r\n         getPlayer().setVolume(mPlayerTweaksData.isPlayerAutoVolumeEnabled() ? mPlayerData.getPlayerVolume() * getVideo().volume : mPlayerData.getPlayerVolume());\r\n     }\r",
      "parent_sha": "bae5c10f5cad9b43c863520e810684b50e5bb837"
    }
  },
  {
    "oid": "dd09a491025bf8aae84f7cfaa5173bfeaccdb64e",
    "message": "player: huge refactor of merging remote and user queue",
    "date": "2024-06-20T14:19:52Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/dd09a491025bf8aae84f7cfaa5173bfeaccdb64e",
    "details": {
      "sha": "bb7eb12edd50675f42622c10e9993199c3151831",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/SuggestionsController.java",
      "status": "modified",
      "additions": 13,
      "deletions": 46,
      "changes": 59,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/dd09a491025bf8aae84f7cfaa5173bfeaccdb64e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/dd09a491025bf8aae84f7cfaa5173bfeaccdb64e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java?ref=dd09a491025bf8aae84f7cfaa5173bfeaccdb64e",
      "patch": "@@ -304,7 +304,8 @@ private void appendSuggestions(Video video, MediaItemMetadata mediaItemMetadata)\n \r\n         appendChaptersIfNeeded(mediaItemMetadata);\r\n \r\n-        appendUserQueueIfNeeded(video, mediaItemMetadata);\r\n+        mergeUserAndRemoteQueueIfNeeded(video, mediaItemMetadata);\r\n+        appendUserQueueIfNeeded();\r\n \r\n         appendSectionPlaylistIfNeeded(video);\r\n \r\n@@ -352,29 +353,7 @@ private void appendSuggestions(Video video, MediaItemMetadata mediaItemMetadata)\n     /**\r\n      * Merge remote queue with player's queue (when phone cast just started or user clicked on playlist item)\r\n      */\r\n-    private void mergeRemoteAndUserQueueIfNeeded(Video video, VideoGroup remoteGroup) {\r\n-        // NOTE: Commented out section below has risk of adding random videos into the queue\r\n-        //if (video.isRemote && (video.remotePlaylistId != null || !Playlist.instance().hasNext())) {\r\n-        if (video.isRemote && video.remotePlaylistId != null) {\r\n-            remoteGroup.removeAllBefore(video);\r\n-\r\n-            remoteGroup.setTitle(getContext().getString(R.string.action_playback_queue));\r\n-            remoteGroup.setId(remoteGroup.getTitle().hashCode());\r\n-\r\n-            Playlist.instance().removeAllAfterCurrent();\r\n-            Playlist.instance().addAll(remoteGroup.getVideos());\r\n-            Playlist.instance().setCurrent(video);\r\n-        }\r\n-    }\r\n-\r\n-    /**\r\n-     * Merge remote queue with player's queue (when phone cast just started or user clicked on playlist item)\r\n-     */\r\n-    private void appendUserQueueIfNeeded(Video video, MediaItemMetadata metadata) {\r\n-        // NOTE: Commented out section below has risk of adding random videos into the queue\r\n-        //if (video.isRemote && (video.remotePlaylistId != null || !Playlist.instance().hasNext())) {\r\n-        Playlist playlist = Playlist.instance();\r\n-\r\n+    private void mergeUserAndRemoteQueueIfNeeded(Video video, MediaItemMetadata metadata) {\r\n         if (video.isRemote && (video.playlistId != null || video.remotePlaylistId != null)) {\r\n             // Create user queue from remote queue\r\n \r\n@@ -383,25 +362,27 @@ private void appendUserQueueIfNeeded(Video video, MediaItemMetadata metadata) {\n             if (suggestions != null && !suggestions.isEmpty()) {\r\n                 MediaGroup remoteRow = suggestions.get(0);\r\n \r\n-                suggestions.remove(remoteRow);\r\n-\r\n                 VideoGroup remoteGroup = VideoGroup.from(remoteRow);\r\n \r\n                 if (remoteGroup.contains(video)) {\r\n+                    suggestions.remove(remoteRow);\r\n+\r\n                     remoteGroup.removeAllBefore(video);\r\n-                    remoteGroup.setTitle(getContext().getString(R.string.action_playback_queue));\r\n-                    remoteGroup.setId(remoteGroup.getTitle().hashCode());\r\n+                    remoteGroup.stripPlaylistInfo(); // use user queue even when a phone disconnected\r\n \r\n+                    Playlist playlist = Playlist.instance();\r\n                     playlist.removeAllAfterCurrent();\r\n                     playlist.addAll(remoteGroup.getVideos());\r\n                     playlist.setCurrent(video);\r\n-\r\n-                    getPlayer().updateSuggestions(remoteGroup);\r\n                 }\r\n             }\r\n-        } else if (playlist.hasNext()) {\r\n-            // Create user queue from local playlist\r\n+        }\r\n+    }\r\n \r\n+    private void appendUserQueueIfNeeded() {\r\n+        Playlist playlist = Playlist.instance();\r\n+\r\n+        if (playlist.hasNext()) {\r\n             List<Video> queue = playlist.getAllAfterCurrent();\r\n \r\n             VideoGroup videoGroup = VideoGroup.from(queue);\r\n@@ -463,20 +444,6 @@ private void appendChaptersIfNeeded(MediaItemMetadata mediaItemMetadata) {\n         focusCurrentChapter();\r\n     }\r\n \r\n-    private void appendUserQueueIfNeeded(Video video) {\r\n-        // Exclude situations when phone cast just started or next item is null\r\n-        if ((video.isRemote && video.remotePlaylistId != null) || !Playlist.instance().hasNext()) {\r\n-            return;\r\n-        }\r\n-\r\n-        List<Video> queue = Playlist.instance().getAllAfterCurrent();\r\n-\r\n-        VideoGroup videoGroup = VideoGroup.from(queue);\r\n-        videoGroup.setTitle(getContext().getString(R.string.action_playback_queue));\r\n-        videoGroup.setId(videoGroup.getTitle().hashCode());\r\n-        getPlayer().updateSuggestions(videoGroup);\r\n-    }\r\n-\r\n     private void appendSectionPlaylistIfNeeded(Video video) {\r\n         if (!isSectionPlaylistEnabled(video)) {\r\n             // Important fix. Gives priority to playlist or suggestion.\r",
      "parent_sha": "01bdaea09bb5731e064ed4c14b5099416243000f"
    }
  },
  {
    "oid": "d9291edf7544f76b3823c377f58637d04bb1fa96",
    "message": "player: speed reset fix",
    "date": "2021-01-04T22:48:24Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/d9291edf7544f76b3823c377f58637d04bb1fa96",
    "details": {
      "sha": "7405900a46d3a75c958f79ef426a0ddedceec9d9",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/StateUpdater.java",
      "status": "modified",
      "additions": 10,
      "deletions": 11,
      "changes": 21,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/d9291edf7544f76b3823c377f58637d04bb1fa96/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/d9291edf7544f76b3823c377f58637d04bb1fa96/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java?ref=d9291edf7544f76b3823c377f58637d04bb1fa96",
      "patch": "@@ -35,14 +35,15 @@ public class StateUpdater extends PlayerEventListenerHelper {\n     private Disposable mHistoryAction;\r\n     private PlayerData mPlayerData;\r\n     private boolean mIsPlayBlocked;\r\n+    private Video mLastVideo;\r\n+    private boolean mIsVideoChanged;\r\n \r\n     @Override\r\n     public void onInitDone() {\r\n         mPrefs = AppPrefs.instance(getActivity());\r\n         mPlayerData = PlayerData.instance(getActivity());\r\n \r\n         restoreState();\r\n-        resetSpeedIfNeeded();\r\n     }\r\n \r\n     /**\r\n@@ -51,8 +52,9 @@ public void onInitDone() {\n      */\r\n     @Override\r\n     public void openVideoOutside(Video item) {\r\n+        mLastVideo = null;\r\n+\r\n         resetStateIfNeeded(item); // reset position of music videos\r\n-        resetSpeedIfNeeded();\r\n \r\n         mIsPlaying = true; // video just added\r\n \r\n@@ -82,7 +84,6 @@ public boolean onNextClicked() {\n         saveState();\r\n \r\n         clearStateOfNextVideo();\r\n-        resetSpeedIfNeeded();\r\n \r\n         return false;\r\n     }\r\n@@ -91,7 +92,6 @@ public boolean onNextClicked() {\n     public void onSuggestionItemClicked(Video item) {\r\n         saveState();\r\n         mIsPlaying = true; // autoplay video from suggestions\r\n-        resetSpeedIfNeeded();\r\n     }\r\n \r\n     @Override\r\n@@ -111,6 +111,9 @@ public void onEngineReleased() {\n \r\n     @Override\r\n     public void onVideoLoaded(Video item) {\r\n+        mIsVideoChanged = mLastVideo != item;\r\n+        mLastVideo = item;\r\n+\r\n         // In this state video length is not undefined.\r\n         restorePosition(item);\r\n         restoreSpeed(item);\r\n@@ -175,12 +178,6 @@ private void resetStateIfNeeded(Video item) {\n         }\r\n     }\r\n \r\n-    private void resetSpeedIfNeeded() {\r\n-        if (mPlayerData != null && !mPlayerData.isRememberSpeedEnabled()) {\r\n-            mPlayerData.setSpeed(1.0f);\r\n-        }\r\n-    }\r\n-\r\n     private void saveState() {\r\n         Video video = getController().getVideo();\r\n \r\n@@ -290,7 +287,9 @@ private void restorePosition(Video item) {\n     private void restoreSpeed(Video item) {\r\n         boolean isLive = getController().getLengthMs() - getController().getPositionMs() < 30_000;\r\n \r\n-        if (isLive) {\r\n+        boolean isResetSpeedEnabled = !mPlayerData.isRememberSpeedEnabled() && mIsVideoChanged;\r\n+\r\n+        if (isLive || isResetSpeedEnabled) {\r\n             getController().setSpeed(1.0f);\r\n         } else {\r\n             getController().setSpeed(mPlayerData.getSpeed());\r",
      "parent_sha": "d3b933861d68f5125372e91fe317c20d32bdcaf1"
    }
  },
  {
    "oid": "95e866940b4c215bcd8de2134da37bd7bfd80a52",
    "message": "typo",
    "date": "2022-01-04T02:28:24Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/95e866940b4c215bcd8de2134da37bd7bfd80a52",
    "details": {
      "sha": "280faa3b79cbf3f4bd1b1a4e1c10a11723e54d29",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/presenter/VideoCardPresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/95e866940b4c215bcd8de2134da37bd7bfd80a52/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fpresenter%2FVideoCardPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/95e866940b4c215bcd8de2134da37bd7bfd80a52/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fpresenter%2FVideoCardPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fpresenter%2FVideoCardPresenter.java?ref=95e866940b4c215bcd8de2134da37bd7bfd80a52",
      "patch": "@@ -119,7 +119,7 @@ public void onBindViewHolder(Presenter.ViewHolder viewHolder, Object item) {\n \n         cardView.setTitleText(video.title);\n         cardView.setContentText(video.description);\n-        // Count progress that very close to zero.\n+        // Count progress that very close to zero. E.g. when user closed video immediately.\n         cardView.setProgress(video.percentWatched > 0 && video.percentWatched < 1 ? 1 : Math.round(video.percentWatched));\n         cardView.setBadgeText(video.hasNewContent ?\n                 context.getString(R.string.badge_new_content) : video.isLive ? context.getString(R.string.badge_live) : video.badge);",
      "parent_sha": "4231553e5e86c9b0a1760195fb825ccc0d8a0a5c"
    }
  },
  {
    "oid": "dad33b7a0304ed34ee22e9e008ab2f5a023e5199",
    "message": "pin item: auth fix",
    "date": "2022-06-03T16:57:22Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/dad33b7a0304ed34ee22e9e008ab2f5a023e5199",
    "details": {
      "sha": "8a4e1406dc95264e87d9de057dbff2782e2a3037",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/BrowsePresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/dad33b7a0304ed34ee22e9e008ab2f5a023e5199/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/dad33b7a0304ed34ee22e9e008ab2f5a023e5199/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java?ref=dad33b7a0304ed34ee22e9e008ab2f5a023e5199",
      "patch": "@@ -433,7 +433,7 @@ public void enableSection(int sectionId, boolean enable) {\n     public void pinItem(Video item) {\n         mGeneralData.addPinnedItem(item);\n \n-        BrowseSection section = new BrowseSection(item.hashCode(), item.title, BrowseSection.TYPE_GRID, item.cardImageUrl, true, item);\n+        BrowseSection section = new BrowseSection(item.hashCode(), item.title, BrowseSection.TYPE_GRID, item.cardImageUrl, false, item);\n         mSections.add(section);\n         mGridMapping.put(item.hashCode(), createPinnedAction(item));\n ",
      "parent_sha": "9f4858735fe15a952050858b79b5dcdb2e0dc164"
    }
  },
  {
    "oid": "59c4c6bc7f194d9419d4bbab600fba5f870cdfdc",
    "message": "channel search focus",
    "date": "2023-12-25T05:03:54Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/59c4c6bc7f194d9419d4bbab600fba5f870cdfdc",
    "details": {
      "sha": "09594732fc448e8219bfd66af147b6659b134979",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/ChannelPresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/59c4c6bc7f194d9419d4bbab600fba5f870cdfdc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/59c4c6bc7f194d9419d4bbab600fba5f870cdfdc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelPresenter.java?ref=59c4c6bc7f194d9419d4bbab600fba5f870cdfdc",
      "patch": "@@ -396,7 +396,7 @@ public boolean onSearchSubmit(String query) {\n                     update.setPosition(0);\r\n                     update.setAction(VideoGroup.ACTION_REPLACE);\r\n                     getView().update(update);\r\n-                    //getView().setPosition(1);\r\n+                    getView().setPosition(1);\r\n                 }\r\n         );\r\n \r",
      "parent_sha": "4bc93e41b3bb9fb17245452f1d1f08bb65b0897b"
    }
  },
  {
    "oid": "a3f589f9822c3c1d663fefcf36ff2dff49df5ff9",
    "message": "refactor",
    "date": "2021-02-17T16:02:24Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a3f589f9822c3c1d663fefcf36ff2dff49df5ff9",
    "details": {
      "sha": "3449f3fad21215be108480c33a71d4c1061ca029",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/StateUpdater.java",
      "status": "modified",
      "additions": 3,
      "deletions": 7,
      "changes": 10,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a3f589f9822c3c1d663fefcf36ff2dff49df5ff9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a3f589f9822c3c1d663fefcf36ff2dff49df5ff9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FStateUpdater.java?ref=a3f589f9822c3c1d663fefcf36ff2dff49df5ff9",
      "patch": "@@ -225,14 +225,10 @@ private void restoreClipData() {\n     }\r\n \r\n     private void restoreVideoFormat() {\r\n-        if (getController().isInPIPMode()) {\r\n-            getController().setFormat(FormatItem.VIDEO_SD_AVC_30);\r\n+        if (mTempVideoFormat != null) {\r\n+            getController().setFormat(mTempVideoFormat);\r\n         } else {\r\n-            if (mTempVideoFormat != null) {\r\n-                getController().setFormat(mTempVideoFormat);\r\n-            } else {\r\n-                getController().setFormat(mPlayerData.getFormat(FormatItem.TYPE_VIDEO));\r\n-            }\r\n+            getController().setFormat(mPlayerData.getFormat(FormatItem.TYPE_VIDEO));\r\n         }\r\n     }\r\n \r",
      "parent_sha": "191cea5fb9549bb5d4071c95ffc1273884ecf92a"
    }
  },
  {
    "oid": "3223aead51aa6ff4ccbee0bcd1ba405345e0ca9c",
    "message": "player: likes and dislikes add nbsp",
    "date": "2024-02-16T23:33:04Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/3223aead51aa6ff4ccbee0bcd1ba405345e0ca9c",
    "details": {
      "sha": "5d11a46d7c39d3450f36692861912664d8fa98c7",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/3223aead51aa6ff4ccbee0bcd1ba405345e0ca9c/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/3223aead51aa6ff4ccbee0bcd1ba405345e0ca9c/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=3223aead51aa6ff4ccbee0bcd1ba405345e0ca9c",
      "patch": "@@ -846,11 +846,11 @@ private CharSequence createSecondTitle(Video video) {\n         }\n \n         if (getContext() != null && video.likeCount != null) {\n-            result = TextUtils.concat(result, \" \", Video.TERTIARY_TEXT_DELIM, \" \", video.likeCount, \" \", Helpers.THUMB_UP); // color of thumb cannot be changed\n+            result = TextUtils.concat(result, \" \", Video.TERTIARY_TEXT_DELIM, \" \", video.likeCount, Helpers.NON_BREAKING_SPACE, Helpers.THUMB_UP); // color of thumb cannot be changed\n         }\n \n         if (getContext() != null && video.dislikeCount != null) {\n-            result = TextUtils.concat(result, \" \", Video.TERTIARY_TEXT_DELIM, \" \", video.dislikeCount, \" \", Helpers.THUMB_DOWN); // color of thumb cannot be changed\n+            result = TextUtils.concat(result, Helpers.NON_BREAKING_SPACE, Video.TERTIARY_TEXT_DELIM, Helpers.NON_BREAKING_SPACE, video.dislikeCount, Helpers.NON_BREAKING_SPACE, Helpers.THUMB_DOWN); // color of thumb cannot be changed\n         }\n \n         if (getContext() != null && video.subscriberCount != null) {",
      "parent_sha": "bcb956a0a5aeca7eaf78314b6a7b16de068d5697"
    }
  },
  {
    "oid": "66b80343021733502394504095fec3052be5b311",
    "message": "track selection upd",
    "date": "2020-11-30T23:20:32Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/66b80343021733502394504095fec3052be5b311",
    "details": {
      "sha": "4466e7795a69b868e6e2aca48b7dea6a2f36d8d8",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/selector/TrackSelectorManager.java",
      "status": "modified",
      "additions": 39,
      "deletions": 10,
      "changes": 49,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/66b80343021733502394504095fec3052be5b311/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/66b80343021733502394504095fec3052be5b311/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorManager.java?ref=66b80343021733502394504095fec3052be5b311",
      "patch": "@@ -12,6 +12,7 @@\n import com.google.android.exoplayer2.trackselection.RandomTrackSelection;\n import com.google.android.exoplayer2.trackselection.TrackSelection;\n import com.google.android.exoplayer2.trackselection.TrackSelection.Definition;\n+import com.liskovsoft.sharedutils.helpers.Helpers;\n import com.liskovsoft.sharedutils.mylogger.Log;\n import com.liskovsoft.smartyoutubetv2.common.exoplayer.selector.RestoreTrackSelector.TrackSelectorCallback;\n import com.liskovsoft.smartyoutubetv2.common.exoplayer.selector.track.MediaTrack;\n@@ -143,13 +144,11 @@ private void initMediaTracks(int rendererIndex) {\n         renderer.sortedTracks = new TreeSet<>(new MediaTrackFormatComparator());\n \n         // AUTO OPTION: add disable subs option\n-        MediaTrack autoTrack = MediaTrack.forRendererIndex(rendererIndex);\n+        MediaTrack noSubsTrack = MediaTrack.forRendererIndex(rendererIndex);\n         if (rendererIndex == RENDERER_INDEX_SUBTITLE) {\n-            renderer.sortedTracks.add(autoTrack);\n+            renderer.sortedTracks.add(noSubsTrack);\n         }\n \n-        boolean hasSelected = false;\n-\n         for (int groupIndex = 0; groupIndex < renderer.trackGroups.length; groupIndex++) {\n             TrackGroup group = renderer.trackGroups.get(groupIndex);\n             renderer.mediaTracks[groupIndex] = new MediaTrack[group.length];\n@@ -168,7 +167,6 @@ private void initMediaTracks(int rendererIndex) {\n                         renderer.override != null && renderer.override.groupIndex == groupIndex && renderer.override.containsTrack(trackIndex);\n \n                 if (mediaTrack.isSelected) {\n-                    hasSelected = true;\n                     renderer.selectedTrack = mediaTrack;\n                 }\n \n@@ -177,10 +175,41 @@ private void initMediaTracks(int rendererIndex) {\n             }\n         }\n \n-        // AUTO OPTION: unselect auto if other is selected\n-        autoTrack.isSelected = !hasSelected;\n-        if (autoTrack.isSelected) {\n-            renderer.selectedTrack = autoTrack;\n+        if (rendererIndex == RENDERER_INDEX_SUBTITLE && renderer.selectedTrack == null) { // no subs selected\n+            noSubsTrack.isSelected = true;\n+            renderer.selectedTrack = noSubsTrack;\n+        }\n+    }\n+\n+    /**\n+     * We need to circle through the tracks to remove previously selected marks\n+     */\n+    private void updateSelection(int rendererIndex, int trackGroupIndex, int[] trackIndexes) {\n+        if (mRenderers[rendererIndex] == null) {\n+            return;\n+        }\n+\n+        // We need to circle through the tracks to remove previously selected marks.\n+\n+        Renderer renderer = mRenderers[rendererIndex];\n+        renderer.selectedTrack = null;\n+        for (int groupIndex = 0; groupIndex < renderer.mediaTracks.length; groupIndex++) {\n+            for (int trackIndex = 0; trackIndex < renderer.mediaTracks[groupIndex].length; trackIndex++) {\n+                MediaTrack mediaTrack = renderer.mediaTracks[groupIndex][trackIndex];\n+                mediaTrack.isSelected = groupIndex == trackGroupIndex && Helpers.contains(trackIndexes, trackIndex);\n+\n+                if (mediaTrack.isSelected) {\n+                    renderer.selectedTrack = mediaTrack;\n+                }\n+            }\n+        }\n+\n+        // Special handling for tracks with auto option\n+        if (rendererIndex == RENDERER_INDEX_SUBTITLE) { // no subs selected\n+            MediaTrack noSubsTrack = renderer.sortedTracks.first();\n+\n+            noSubsTrack.isSelected = renderer.selectedTrack == null;\n+            renderer.selectedTrack = renderer.selectedTrack != null ? renderer.selectedTrack : noSubsTrack;\n         }\n     }\n \n@@ -430,7 +459,7 @@ private void setOverride(int rendererIndex, int groupIndex, int... trackIndexes)\n             mRenderers[rendererIndex].override = new SelectionOverride(groupIndex, trackIndexes);\n         }\n \n-        updateSelectionFromOverride(rendererIndex);\n+        updateSelection(rendererIndex, groupIndex, trackIndexes);\n     }\n \n     private boolean hasSelection(int rendererIndex) {",
      "parent_sha": "2774c269881b648562ad781bc746fcafb7d81326"
    }
  },
  {
    "oid": "3d1551e0f1749c147be0319f38b7e07f3d29ab85",
    "message": "player: buffering fixer upd 3",
    "date": "2024-08-13T03:26:46Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/3d1551e0f1749c147be0319f38b7e07f3d29ab85",
    "details": {
      "sha": "83fe69dffe48797a375f956398890afd14734fcc",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/VideoLoaderController.java",
      "status": "modified",
      "additions": 7,
      "deletions": 5,
      "changes": 12,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/3d1551e0f1749c147be0319f38b7e07f3d29ab85/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoLoaderController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/3d1551e0f1749c147be0319f38b7e07f3d29ab85/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoLoaderController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoLoaderController.java?ref=3d1551e0f1749c147be0319f38b7e07f3d29ab85",
      "patch": "@@ -120,14 +120,16 @@ private void onLongBuffering() {\n         if ((!mLastVideo.isLive || mLastVideo.isLiveEnd) &&\r\n                 getPlayer().getDurationMs() - getPlayer().getPositionMs() < STREAM_END_THRESHOLD_MS) {\r\n             getMainController().onPlayEnd();\r\n-        } else if (isBufferingRepeating()) {\r\n+        } else if (isBufferingRepeated()) {\r\n+            MessageHelpers.showLongMessage(getContext(), R.string.applying_fix);\r\n+\r\n             // Switch between network engines in hope that one of them fixes the error\r\n             // Cronet engine do less buffering\r\n             //mPlayerTweaksData.setPlayerDataSource(PlayerTweaksData.PLAYER_DATA_SOURCE_CRONET);\r\n-            //restartEngine();\r\n+            mPlayerTweaksData.setPlayerDataSource(getNextEngine());\r\n+\r\n+            //YouTubeServiceManager.instance().applyNoPlaybackFix();\r\n \r\n-            MessageHelpers.showLongMessage(getContext(), R.string.applying_fix);\r\n-            YouTubeServiceManager.instance().applyNoPlaybackFix();\r\n             restartEngine();\r\n         }\r\n     }\r\n@@ -703,7 +705,7 @@ private void updateBufferingCount() {\n         mBufferingCount = new Pair<>(bufferingCount, currentTimeMs);\r\n     }\r\n \r\n-    private boolean isBufferingRepeating() {\r\n+    private boolean isBufferingRepeated() {\r\n         return mBufferingCount != null && mBufferingCount.first > 3;\r\n     }\r\n }\r",
      "parent_sha": "83ad44438de6a97853d7de6b79b094c73df1368e"
    }
  },
  {
    "oid": "acd00799bb5992e8e689f17906e3197273e68f9e",
    "message": "refactor",
    "date": "2021-05-17T17:36:36Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/acd00799bb5992e8e689f17906e3197273e68f9e",
    "details": {
      "sha": "f9d285c1a6fccaf98c2fb5ffbf4afb7e1280c151",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/VideoLoader.java",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/acd00799bb5992e8e689f17906e3197273e68f9e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoLoader.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/acd00799bb5992e8e689f17906e3197273e68f9e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoLoader.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoLoader.java?ref=acd00799bb5992e8e689f17906e3197273e68f9e",
      "patch": "@@ -46,9 +46,8 @@ public class VideoLoader extends PlayerEventListenerHelper {\n         }\r\n     };\r\n     private final Runnable mPendingRestartEngine = () -> {\r\n-        YouTubeMediaService.instance().invalidateCache();\r\n-\r\n         if (getController() != null) {\r\n+            YouTubeMediaService.instance().invalidateCache();\r\n             getController().restartEngine(); // properly save position of the current track\r\n         }\r\n     };\r\n@@ -88,6 +87,8 @@ public void onEngineInitialized() {\n     @Override\r\n     public void onEngineReleased() {\r\n         disposeActions();\r\n+        // We don't all fixes anymore\r\n+        Utils.removeCallbacks(mHandler, mPendingRestartEngine);\r\n     }\r\n \r\n     @Override\r",
      "parent_sha": "7056c20b0f4db0fcbc9ad5dba943b42f1f372b24"
    }
  },
  {
    "oid": "fb77da7ac57c1fa173e9899c9d03ba4e7288855c",
    "message": "open channel menu item: add loading marker",
    "date": "2022-06-22T23:44:46Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/fb77da7ac57c1fa173e9899c9d03ba4e7288855c",
    "details": {
      "sha": "ca4f24c565816267455d2a0440c009951aaef346",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/ChannelPresenter.java",
      "status": "modified",
      "additions": 6,
      "deletions": 1,
      "changes": 7,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/fb77da7ac57c1fa173e9899c9d03ba4e7288855c/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/fb77da7ac57c1fa173e9899c9d03ba4e7288855c/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FChannelPresenter.java?ref=fb77da7ac57c1fa173e9899c9d03ba4e7288855c",
      "patch": "@@ -20,6 +20,7 @@\n import com.liskovsoft.smartyoutubetv2.common.app.views.ViewManager;\r\n import com.liskovsoft.smartyoutubetv2.common.misc.MediaServiceManager;\r\n import com.liskovsoft.sharedutils.rx.RxUtils;\r\n+import com.liskovsoft.smartyoutubetv2.common.utils.LoadingManager;\r\n import com.liskovsoft.youtubeapi.service.YouTubeMediaService;\r\n import io.reactivex.Observable;\r\n import io.reactivex.android.schedulers.AndroidSchedulers;\r\n@@ -140,15 +141,19 @@ public void openChannel(Video item) {\n             if (item.channelId != null) {\r\n                 openChannel(item.channelId);\r\n             } else if (item.videoId != null) {\r\n-                MessageHelpers.showMessage(getContext(), R.string.wait_data_loading);\r\n+                LoadingManager.showLoading(getContext(), true);\r\n+                //MessageHelpers.showMessage(getContext(), R.string.wait_data_loading);\r\n                 mServiceManager.loadMetadata(item, metadata -> {\r\n+                    LoadingManager.showLoading(getContext(), false);\r\n                     openChannel(metadata.getChannelId());\r\n                     item.channelId = metadata.getChannelId();\r\n                 });\r\n             } else if (item.belongsToChannelUploads()) {\r\n+                LoadingManager.showLoading(getContext(), true);\r\n                 // Maybe this is subscribed items view\r\n                 ChannelUploadsPresenter.instance(getContext())\r\n                         .obtainVideoGroup(item, group -> {\r\n+                            LoadingManager.showLoading(getContext(), false);\r\n                             // Some uploads groups doesn't contain channel button.\r\n                             // Use data from first item instead.\r\n                             if (group.getChannelId() == null) {\r",
      "parent_sha": "9b02afb9a4c5c785d84c7d208c8126003117374e"
    }
  },
  {
    "oid": "fa295029b60ba53ad9c6a98abdb851bf302299f3",
    "message": "player: chapter selection fix",
    "date": "2024-10-04T00:57:59Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/fa295029b60ba53ad9c6a98abdb851bf302299f3",
    "details": {
      "sha": "a7b6e4f10d2f708bf534dfbcc39b310303b3fe11",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/SuggestionsController.java",
      "status": "modified",
      "additions": 28,
      "deletions": 44,
      "changes": 72,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/fa295029b60ba53ad9c6a98abdb851bf302299f3/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/fa295029b60ba53ad9c6a98abdb851bf302299f3/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java?ref=fa295029b60ba53ad9c6a98abdb851bf302299f3",
      "patch": "@@ -494,7 +494,8 @@ private void startChapterNotificationServiceIfNeeded() {\n     private void startChapterNotificationServiceIfNeededInt() {\r\n         Utils.removeCallbacks(mChapterHandler);\r\n \r\n-        showChapterDialog(getCurrentChapter());\r\n+        Pair<ChapterItem, Integer> currentChapter = getCurrentChapter();\r\n+        showChapterDialog(currentChapter != null ? currentChapter.first : null);\r\n \r\n         if (mChapters == null) {\r\n             return;\r\n@@ -512,8 +513,8 @@ private void startChapterNotificationServiceIfNeededInt() {\n     private void appendChaptersIfNeeded(MediaItemMetadata mediaItemMetadata) {\r\n         mChapters = mediaItemMetadata.getChapters();\r\n         // Reset chapter title\r\n-        Pair<String, Integer> index = findCurrentChapter();\r\n-        getPlayer().setSeekPreviewTitle(index != null ? index.first : null); // add placeholder to fix control panel animation on the first run\r\n+        Pair<ChapterItem, Integer> currentChapter = getCurrentChapter();\r\n+        getPlayer().setSeekPreviewTitle(currentChapter != null ? currentChapter.first.getTitle() : null); // add placeholder to fix control panel animation on the first run\r\n \r\n         addChapterMarkersIfNeeded();\r\n         appendChapterSuggestionsIfNeeded();\r\n@@ -551,11 +552,11 @@ private void focusCurrentChapter() {\n             return;\r\n         }\r\n \r\n-        Pair<String, Integer> index = findCurrentChapter();\r\n+        Pair<ChapterItem, Integer> currentChapter = getCurrentChapter();\r\n \r\n-        if (index != null) {\r\n-            getPlayer().focusSuggestedItem(index.second);\r\n-            getPlayer().setSeekPreviewTitle(index.first);\r\n+        if (currentChapter != null) {\r\n+            getPlayer().focusSuggestedItem(currentChapter.second);\r\n+            getPlayer().setSeekPreviewTitle(currentChapter.first.getTitle());\r\n         }\r\n \r\n         //int index = findCurrentChapterIndex(group.getVideos());\r\n@@ -567,41 +568,22 @@ private void focusCurrentChapter() {\n         //}\r\n     }\r\n \r\n-    private int findCurrentChapterIndex(List<Video> videos) {\r\n-        if (videos == null || !videos.get(0).isChapter) {\r\n-            return -1;\r\n-        }\r\n-\r\n-        int currentChapter = -1;\r\n-        long positionMs = getPlayer().getPositionMs();\r\n-        for (Video chapter : videos) {\r\n-            if (chapter.startTimeMs > positionMs) {\r\n-                break;\r\n-            }\r\n-            currentChapter++;\r\n-        }\r\n-\r\n-        return currentChapter;\r\n-    }\r\n-\r\n-    private Pair<String, Integer> findCurrentChapter() {\r\n-        if (mChapters == null || mChapters.isEmpty()) {\r\n-            return null;\r\n-        }\r\n-\r\n-        int idx = -1;\r\n-        ChapterItem result = null;\r\n-        long positionMs = getPlayer().getPositionMs();\r\n-        for (ChapterItem chapter : mChapters) {\r\n-            if (chapter.getStartTimeMs() > positionMs) {\r\n-                break;\r\n-            }\r\n-            idx++;\r\n-            result = chapter;\r\n-        }\r\n-\r\n-        return result != null ? new Pair<>(result.getTitle(), idx) : null;\r\n-    }\r\n+    //private int findCurrentChapterIndex(List<Video> videos) {\r\n+    //    if (videos == null || !videos.get(0).isChapter) {\r\n+    //        return -1;\r\n+    //    }\r\n+    //\r\n+    //    int currentChapter = -1;\r\n+    //    long positionMs = getPlayer().getPositionMs();\r\n+    //    for (Video chapter : videos) {\r\n+    //        if (chapter.startTimeMs > positionMs) {\r\n+    //            break;\r\n+    //        }\r\n+    //        currentChapter++;\r\n+    //    }\r\n+    //\r\n+    //    return currentChapter;\r\n+    //}\r\n \r\n     private List<SeekBarSegment> toSeekBarSegments(List<ChapterItem> chapters) {\r\n         if (chapters == null) {\r\n@@ -758,22 +740,24 @@ private ChapterItem getNextChapter() {\n         return null;\r\n     }\r\n \r\n-    private ChapterItem getCurrentChapter() {\r\n+    private Pair<ChapterItem, Integer> getCurrentChapter() {\r\n         if (mChapters == null) {\r\n             return null;\r\n         }\r\n \r\n         long positionMs = getPlayer().getPositionMs();\r\n         ChapterItem currentChapter = null;\r\n+        int idx = -1;\r\n \r\n         for (ChapterItem chapter : mChapters) {\r\n             if (chapter.getStartTimeMs() > (positionMs + 3_000)) {\r\n                 break;\r\n             }\r\n             currentChapter = chapter;\r\n+            idx++;\r\n         }\r\n \r\n-        return currentChapter;\r\n+        return currentChapter != null ? new Pair<>(currentChapter, idx) : null;\r\n     }\r\n \r\n     private void callListener(MediaItemMetadata mediaItemMetadata) {\r",
      "parent_sha": "dd84b8b437c665ae189f0a6a50382ce2a8dceb85"
    }
  },
  {
    "oid": "65c3cb6a8c3f74065df55a6f84a3859d3834324e",
    "message": "Fix id collision between pinned and default sections 2",
    "date": "2024-10-03T13:30:04Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/65c3cb6a8c3f74065df55a6f84a3859d3834324e",
    "details": {
      "sha": "b1acb67aeb9f42b94d62de6a83f94ba94f78d309",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/service/SidebarService.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/65c3cb6a8c3f74065df55a6f84a3859d3834324e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fservice%2FSidebarService.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/65c3cb6a8c3f74065df55a6f84a3859d3834324e/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fservice%2FSidebarService.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fservice%2FSidebarService.java?ref=65c3cb6a8c3f74065df55a6f84a3859d3834324e",
      "patch": "@@ -258,7 +258,7 @@ private void cleanupPinnedItems() {\n             item.videoId = null;\r\n \r\n             // Fix id collision between pinned and default sections\r\n-            if (item.channelGroupId != -1 && item.channelGroupId < 1_000) {\r\n+            if (item.channelGroupId != -1 && item.channelGroupId < 1_000 && item.channelGroupId >= -1) {\r\n                 item.channelGroupId += 1_000;\r\n             }\r\n \r",
      "parent_sha": "ec7fac37a3199a8a7f53f2317bc2f59dc7818e38"
    }
  },
  {
    "oid": "b834f01835da790ab2ca3b1621c6e64f483c5dc1",
    "message": "player: sound off button upd",
    "date": "2024-02-04T01:54:31Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/b834f01835da790ab2ca3b1621c6e64f483c5dc1",
    "details": {
      "sha": "59d8e8274a5514549b5726f3360d73514696cfed",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/PlayerUIController.java",
      "status": "modified",
      "additions": 8,
      "deletions": 11,
      "changes": 19,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/b834f01835da790ab2ca3b1621c6e64f483c5dc1/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FPlayerUIController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/b834f01835da790ab2ca3b1621c6e64f483c5dc1/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FPlayerUIController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FPlayerUIController.java?ref=b834f01835da790ab2ca3b1621c6e64f483c5dc1",
      "patch": "@@ -253,7 +253,7 @@ public void onEngineInitialized() {\n     @Override\r\n     public void onVideoLoaded(Video item) {\r\n         getPlayer().updateEndingTime();\r\n-        applyMuteButtonState();\r\n+        applySoundOffButtonState();\r\n     }\r\n \r\n     @Override\r\n@@ -277,7 +277,7 @@ public void onViewResumed() {\n \r\n         // Maybe dialog just closed. Reset timeout just in case.\r\n         enableUiAutoHideTimeout();\r\n-        applyMuteButtonState();\r\n+        applySoundOffButtonState();\r\n     }\r\n \r\n     @Override\r\n@@ -862,6 +862,12 @@ private void applySoundOff(int buttonState) {\n         getPlayer().setButtonState(R.id.action_sound_off, buttonState == PlayerUI.BUTTON_OFF ? PlayerUI.BUTTON_ON : PlayerUI.BUTTON_OFF);\r\n     }\r\n \r\n+    private void applySoundOffButtonState() {\r\n+        if (getPlayer().getAudioFormat() != null) {\r\n+            getPlayer().setButtonState(R.id.action_sound_off, getPlayer().getAudioFormat().isDefault() ? PlayerUI.BUTTON_ON : PlayerUI.BUTTON_OFF);\r\n+        }\r\n+    }\r\n+\r\n     private void reorderSubtitles(List<FormatItem> subtitleFormats) {\r\n         if (subtitleFormats == null || subtitleFormats.isEmpty()) {\r\n             return;\r\n@@ -879,13 +885,4 @@ private void reorderSubtitles(List<FormatItem> subtitleFormats) {\n         }\r\n         subtitleFormats.addAll(subtitleFormats.size() < begin ? 0 : begin, topSubtitles);\r\n     }\r\n-\r\n-    private void applyMuteButtonState() {\r\n-        if (getPlayer().getAudioFormat() != null) {\r\n-            getPlayer().setButtonState(R.id.action_sound_off, getPlayer().getAudioFormat().isDefault() ? PlayerUI.BUTTON_ON : PlayerUI.BUTTON_OFF);\r\n-            if (getPlayer().getAudioFormat().isDefault()) {\r\n-                MessageHelpers.showMessage(getContext(), R.string.action_sound_off);\r\n-            }\r\n-        }\r\n-    }\r\n }\r",
      "parent_sha": "7d2e13f7a4f5039c45759dbc10b1cd89a5798736"
    }
  },
  {
    "oid": "72161aff5604c0b5a05dade3a662a8dbef2a10e2",
    "message": "settings tweak",
    "date": "2021-02-09T19:23:36Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/72161aff5604c0b5a05dade3a662a8dbef2a10e2",
    "details": {
      "sha": "e2bd5a8d1c0409c35f0be12b2b14ab1f77d0487c",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/prefs/PlayerData.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/72161aff5604c0b5a05dade3a662a8dbef2a10e2/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FPlayerData.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/72161aff5604c0b5a05dade3a662a8dbef2a10e2/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FPlayerData.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FPlayerData.java?ref=72161aff5604c0b5a05dade3a662a8dbef2a10e2",
      "patch": "@@ -325,7 +325,7 @@ private void restoreData() {\n         mAfrPauseSec = Helpers.parseInt(split, 19, 0);\r\n         mAudioDelayMs = Helpers.parseInt(split, 20, 0);\r\n         mIsRememberSpeedEnabled = Helpers.parseBoolean(split, 21, true);\r\n-        mPlaybackMode = Helpers.parseInt(split, 22, PlaybackEngineController.PLAYBACK_MODE_PAUSE);\r\n+        mPlaybackMode = Helpers.parseInt(split, 22, PlaybackEngineController.PLAYBACK_MODE_LIST);\r\n         // didn't remember what was there\r\n         mIsLowQualityEnabled = Helpers.parseBoolean(split, 24, false);\r\n     }\r",
      "parent_sha": "2cce23521b73e9e13d3e04f740dd9cccf46f6563"
    }
  },
  {
    "oid": "a5b74d544c031ce53249b75fb4e20afbeca24ff3",
    "message": "player speed refactor",
    "date": "2021-04-23T19:21:16Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a5b74d544c031ce53249b75fb4e20afbeca24ff3",
    "details": {
      "sha": "f3cb7d1095427ff535be05b225446785cf3ee6a5",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/mod/leanback/playerglue/tweaks/PlaybackTransportRowPresenter.java",
      "status": "modified",
      "additions": 29,
      "deletions": 9,
      "changes": 38,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a5b74d544c031ce53249b75fb4e20afbeca24ff3/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FPlaybackTransportRowPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a5b74d544c031ce53249b75fb4e20afbeca24ff3/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FPlaybackTransportRowPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FPlaybackTransportRowPresenter.java?ref=a5b74d544c031ce53249b75fb4e20afbeca24ff3",
      "patch": "@@ -93,6 +93,7 @@ public class ViewHolder extends PlaybackRowPresenter.ViewHolder implements Playb\n         final String mEndingTimeFormat;\n         long mTotalTimeInMs = Long.MIN_VALUE;\n         long mCurrentTimeInMs = Long.MIN_VALUE;\n+        long mEndingTimeInMs = Long.MIN_VALUE;\n         long mSecondaryProgressInMs;\n         final StringBuilder mTempBuilder = new StringBuilder();\n         ControlBarPresenter.ViewHolder mControlsVh;\n@@ -124,6 +125,7 @@ public class ViewHolder extends PlaybackRowPresenter.ViewHolder implements Playb\n             public void onCurrentPositionChanged(PlaybackControlsRow row, long ms) {\n                 setCurrentPosition(ms);\n                 setEndingTime(ms);\n+                updateTotalTime();\n             }\n \n             @Override\n@@ -648,7 +650,7 @@ protected void onSetDurationLabel(long totalTimeMs) {\n         void setTotalTime(long totalTimeMs) {\n             if (mTotalTimeInMs != totalTimeMs) {\n                 mTotalTimeInMs = totalTimeMs;\n-                onSetDurationLabel(totalTimeMs);\n+                onSetDurationLabel(applySpeedCorrection(totalTimeMs));\n             }\n         }\n \n@@ -676,7 +678,7 @@ protected void onSetCurrentPositionLabel(long currentTimeMs) {\n         void setCurrentPosition(long currentTimeMs) {\n             if (currentTimeMs != mCurrentTimeInMs) {\n                 mCurrentTimeInMs = currentTimeMs;\n-                onSetCurrentPositionLabel(currentTimeMs);\n+                onSetCurrentPositionLabel(applySpeedCorrection(currentTimeMs));\n             }\n             if (!mInSeek) {\n                 int progressRatio = 0;\n@@ -698,15 +700,18 @@ void setBufferedPosition(long progressMs) {\n         }\n \n         void setEndingTime(long currentTimeMs) {\n-            if (mEndingTime != null) {\n-                if (mPlayerData.isRemainingTimeEnabled()) {\n-                    long endingTimeMs = mTotalTimeInMs - currentTimeMs;\n+            long endingTimeMs = mTotalTimeInMs - currentTimeMs;\n \n-                    // Apply speed correction\n-                    endingTimeMs = (long) (endingTimeMs / mPlayerData.getSpeed());\n-\n-                    formatTime(endingTimeMs >= 0 ? endingTimeMs : 0, mTempBuilder);\n+            if (mEndingTimeInMs != endingTimeMs) {\n+                mEndingTimeInMs = endingTimeMs;\n+                onSetEndingTimeLabel(applySpeedCorrection(endingTimeMs));\n+            }\n+        }\n \n+        protected void onSetEndingTimeLabel(long endingTimeMs) {\n+            if (mEndingTime != null) {\n+                if (mPlayerData.isRemainingTimeEnabled()) {\n+                    formatTime(endingTimeMs, mTempBuilder);\n                     mEndingTime.setText(String.format(mEndingTimeFormat, mTempBuilder.toString()));\n                     mEndingTime.setVisibility(View.VISIBLE);\n                 } else {\n@@ -733,6 +738,21 @@ void updateVisibility(boolean isVisible) {\n                 mDateTime.setVisibility(View.GONE);\n             }\n         }\n+\n+        void updateTotalTime() {\n+            // Update total time with respect of speed\n+            long newTotalTimeMs = applySpeedCorrection(mTotalTimeInMs);\n+\n+            if (newTotalTimeMs != mTotalTimeInMs) {\n+                onSetDurationLabel(newTotalTimeMs);\n+            }\n+        }\n+\n+        long applySpeedCorrection(long timeMs) {\n+            timeMs = (long) (timeMs / mPlayerData.getSpeed());\n+\n+            return timeMs >= 0 ? timeMs : 0;\n+        }\n     }\n \n     static void formatTime(long ms, StringBuilder sb) {",
      "parent_sha": "5ce9b25845a74c7c84409525bf8f6dabc33a7c5b"
    }
  },
  {
    "oid": "18adaa427517c46329ebca2774485bf83b10d602",
    "message": "browse: save last subs item fix",
    "date": "2023-11-09T01:10:31Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/18adaa427517c46329ebca2774485bf83b10d602",
    "details": {
      "sha": "5fabe2496888456504239ee7f66df7ae481fec08",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/BrowsePresenter.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/18adaa427517c46329ebca2774485bf83b10d602/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/18adaa427517c46329ebca2774485bf83b10d602/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java?ref=18adaa427517c46329ebca2774485bf83b10d602",
      "patch": "@@ -146,7 +146,7 @@ public void onViewPaused() {\n     }\n \n     private void saveSelectedItems() {\n-        if (isSubscriptionsSection()) {\n+        if (mCurrentVideo != null && mCurrentVideo.belongsToSubscriptions()) {\n             mGeneralData.setSelectedSubscriptionsItem(mCurrentVideo);\n         }\n     }\n@@ -423,6 +423,7 @@ public void onScrollEnd(Video item) {\n \n     @Override\n     public void onSectionFocused(int sectionId) {\n+        saveSelectedItems();\n         updateSection(sectionId);\n     }\n ",
      "parent_sha": "ba2d904fb3725ebd7da0b84851e53259df180a1c"
    }
  },
  {
    "oid": "c6d451c070025c0c08ddee261d21b691746e04de",
    "message": "exo release fix",
    "date": "2021-08-13T12:06:32Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/c6d451c070025c0c08ddee261d21b691746e04de",
    "details": {
      "sha": "aa390353eff10c7c287cfb71e4579966bcec6e6e",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/controller/ExoPlayerController.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/c6d451c070025c0c08ddee261d21b691746e04de/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fcontroller%2FExoPlayerController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/c6d451c070025c0c08ddee261d21b691746e04de/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fcontroller%2FExoPlayerController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fcontroller%2FExoPlayerController.java?ref=c6d451c070025c0c08ddee261d21b691746e04de",
      "patch": "@@ -158,7 +158,7 @@ public void release() {\n \r\n         if (mPlayer != null) {\r\n             mPlayer.removeListener(this);\r\n-            //mPlayer.stop();\r\n+            mPlayer.stop();\r\n             mPlayer.release();\r\n             mPlayer = null;\r\n         }\r",
      "parent_sha": "eb96c767d6aea2015340d14d26288d145095342c"
    }
  },
  {
    "oid": "110c8aaee5b761de21be6a70334ac8e7d9620838",
    "message": "player: speed shortcut: select closer speed",
    "date": "2023-02-19T01:23:58Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/110c8aaee5b761de21be6a70334ac8e7d9620838",
    "details": {
      "sha": "28a0e3024f1626a84f7e888bcc78f58b9c13ebba",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/misc/PlayerKeyTranslator.java",
      "status": "modified",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/110c8aaee5b761de21be6a70334ac8e7d9620838/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FPlayerKeyTranslator.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/110c8aaee5b761de21be6a70334ac8e7d9620838/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FPlayerKeyTranslator.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FPlayerKeyTranslator.java?ref=110c8aaee5b761de21be6a70334ac8e7d9620838",
      "patch": "@@ -2,6 +2,7 @@\n \r\n import android.content.Context;\r\n import android.view.KeyEvent;\r\n+import com.liskovsoft.sharedutils.helpers.Helpers;\r\n import com.liskovsoft.sharedutils.helpers.MessageHelpers;\r\n import com.liskovsoft.smartyoutubetv2.common.R;\r\n import com.liskovsoft.smartyoutubetv2.common.app.presenters.PlaybackPresenter;\r\n@@ -129,7 +130,15 @@ private void speedUp(boolean up) {\n \r\n         if (playbackView != null && playbackView.getController() != null) {\r\n             float currentSpeed = playbackView.getController().getSpeed();\r\n-            int currentIndex = Arrays.binarySearch(speedSteps, currentSpeed);\r\n+            int currentIndex = -1;\r\n+\r\n+            for (int i = 0; i < speedSteps.length; i++) {\r\n+                float step = speedSteps[i];\r\n+                if (Helpers.floatEquals(currentSpeed, step) || Math.abs(currentSpeed - step) < 0.25f) {\r\n+                    currentIndex = i;\r\n+                    break;\r\n+                }\r\n+            }\r\n \r\n             if (currentIndex < 0) {\r\n                 currentIndex = 3;\r",
      "parent_sha": "aaf7df4c7273122d0f7ecc6c96ef1d6db10b15de"
    }
  },
  {
    "oid": "13ac79373e96344c81f505d9a95e9c4b51cea487",
    "message": "player -> disable foreground mode",
    "date": "2021-08-21T14:26:31Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/13ac79373e96344c81f505d9a95e9c4b51cea487",
    "details": {
      "sha": "e57d5eb15f8eed408ada6183878c82d49a994a6b",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/13ac79373e96344c81f505d9a95e9c4b51cea487/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/13ac79373e96344c81f505d9a95e9c4b51cea487/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=13ac79373e96344c81f505d9a95e9c4b51cea487",
      "patch": "@@ -364,7 +364,7 @@ private void createPlayer() {\n         mPlayer = mPlayerInitializer.createPlayer(getContext(), renderersFactory, trackSelector);\n         // Try to fix decoder error on Nvidia Shield 2019.\n         // Init resources as early as possible.\n-        mPlayer.setForegroundMode(true);\n+        mPlayer.setForegroundMode(false);\n \n         mExoPlayerController.setPlayer(mPlayer);\n         mExoPlayerController.setTrackSelector(trackSelector);",
      "parent_sha": "267b05947339588fae2c64540bc8b9e20816a29b"
    }
  },
  {
    "oid": "501b9f5b0e7df398f0f9696dfd4aabb48ff6bc8a",
    "message": "change speed on pause fix",
    "date": "2022-02-16T03:21:20Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/501b9f5b0e7df398f0f9696dfd4aabb48ff6bc8a",
    "details": {
      "sha": "8ecee378404b70920c960126b977f05493fe17d1",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/controller/ExoPlayerController.java",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/501b9f5b0e7df398f0f9696dfd4aabb48ff6bc8a/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fcontroller%2FExoPlayerController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/501b9f5b0e7df398f0f9696dfd4aabb48ff6bc8a/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fcontroller%2FExoPlayerController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fcontroller%2FExoPlayerController.java?ref=501b9f5b0e7df398f0f9696dfd4aabb48ff6bc8a",
      "patch": "@@ -43,6 +43,7 @@ public class ExoPlayerController implements Player.EventListener, PlayerControll\n     private PlayerEventListener mEventListener;\r\n     private SimpleExoPlayer mPlayer;\r\n     private PlayerView mPlayerView;\r\n+    private float mCurrentSpeed = 1.0f;\r\n \r\n     public ExoPlayerController(Context context) {\r\n         mContext = context.getApplicationContext();\r\n@@ -360,7 +361,8 @@ public void onSeekProcessed() {\n     @Override\r\n     public void setSpeed(float speed) {\r\n         if (mPlayer != null && speed > 0) {\r\n-            mPlayer.setPlaybackParameters(new PlaybackParameters(speed, 1.0f));\r\n+            mPlayer.setPlaybackParameters(new PlaybackParameters(speed, mPlayer.getPlaybackParameters().pitch));\r\n+            mCurrentSpeed = speed; // NOTE: backup speed in case params not applied (playback is paused)\r\n \r\n             mTrackFormatter.setSpeed(speed);\r\n             setQualityInfo(mTrackFormatter.getQualityLabel());\r\n@@ -370,7 +372,8 @@ public void setSpeed(float speed) {\n     @Override\r\n     public float getSpeed() {\r\n         if (mPlayer != null) {\r\n-            return mPlayer.getPlaybackParameters().speed;\r\n+            // NOTE: restore backup speed in case params not applied (playback is paused)\r\n+            return isPlaying() ? mPlayer.getPlaybackParameters().speed : mCurrentSpeed;\r\n         } else {\r\n             return -1;\r\n         }\r",
      "parent_sha": "4266178bc84e3462f63eedaf6dbf9f31019d182d"
    }
  },
  {
    "oid": "d77598ac88b9fc774fb21d11dee3fe63c9f245ba",
    "message": "rm high bitrate marks",
    "date": "2023-11-10T18:53:12Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/d77598ac88b9fc774fb21d11dee3fe63c9f245ba",
    "details": {
      "sha": "e69c882f167b1eb7e915481bedcdbbe93e6b25c8",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/selector/TrackSelectorUtil.java",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/d77598ac88b9fc774fb21d11dee3fe63c9f245ba/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorUtil.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/d77598ac88b9fc774fb21d11dee3fe63c9f245ba/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorUtil.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorUtil.java?ref=d77598ac88b9fc774fb21d11dee3fe63c9f245ba",
      "patch": "@@ -63,13 +63,13 @@ public static CharSequence buildTrackNameShort(Format format) {\n     }\r\n \r\n     public static String buildHighBitrateMark(Format format) {\r\n-        if (format == null) {\r\n-            return \"\";\r\n-        }\r\n-\r\n+        //if (format == null) {\r\n+        //    return \"\";\r\n+        //}\r\n+        //\r\n         // https://symbl.cc/en/search/?q=mark\r\n-        return format.containerMimeType == null ? \"*\" : \"\";\r\n-        //return format.containerMimeType == null ? \"\u2728\" : \"\";\r\n+        //return format.containerMimeType == null ? \"*\" : \"\";\r\n+        return \"\";\r\n     }\r\n \r\n     public static String buildHDRString(Format format) {\r",
      "parent_sha": "0a1dc7e56bac793b71c1f8f5f5dfb87feaac4641"
    }
  },
  {
    "oid": "20dce96145e736b4c792e9775d24b24e3774fcca",
    "message": "refactor",
    "date": "2021-03-08T07:50:23Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/20dce96145e736b4c792e9775d24b24e3774fcca",
    "details": {
      "sha": "44cd5345c4dd420d05c945e9ac7ad083e28f67b6",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/other/DebugInfoManager.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/20dce96145e736b4c792e9775d24b24e3774fcca/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fother%2FDebugInfoManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/20dce96145e736b4c792e9775d24b24e3774fcca/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fother%2FDebugInfoManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fother%2FDebugInfoManager.java?ref=20dce96145e736b4c792e9775d24b24e3774fcca",
      "patch": "@@ -221,7 +221,7 @@ private void updateVideoInfo() {\n \n         mVideoInfo.add(new Pair<>(\"Video Resolution\", videoRes));\n         mVideoInfo.add(new Pair<>(\"Video/Audio Codecs\", String.format(\n-                \"%s%s/%s%s\",\n+                \"%s(%s)/%s(%s)\",\n                 getFormatMimeType(video),\n                 getFormatId(video),\n                 getFormatMimeType(audio),\n@@ -401,9 +401,9 @@ private String toHumanReadable(int bitrate) {\n     private String getFormatId(Format video) {\n         String id = video.id;\n         if (Helpers.isNumeric(id)) {\n-            return String.format(\"(%s)\", id);\n+            return id;\n         }\n-        return \"\";\n+        return null;\n     }\n \n     private String getFormatMimeType(Format video) {",
      "parent_sha": "16ebd0a4b51bc32067ea27c307deab4bf6b307c2"
    }
  },
  {
    "oid": "9e1131a88372a5041f007163418cea691ac31e77",
    "message": "crash fix",
    "date": "2025-03-31T04:23:05Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/9e1131a88372a5041f007163418cea691ac31e77",
    "details": {
      "sha": "ab771bebbb12f5f7e7e6ea89f8c155776663a572",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/browse/video/MultiVideoGridFragment.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/9e1131a88372a5041f007163418cea691ac31e77/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fbrowse%2Fvideo%2FMultiVideoGridFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/9e1131a88372a5041f007163418cea691ac31e77/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fbrowse%2Fvideo%2FMultiVideoGridFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fbrowse%2Fvideo%2FMultiVideoGridFragment.java?ref=9e1131a88372a5041f007163418cea691ac31e77",
      "patch": "@@ -195,7 +195,8 @@ private void setupAdapter() {\n \r\n         // Right grid of channel's content\r\n         VerticalGridPresenter presenter2 = new CustomVerticalGridPresenter(R.layout.lb_vertical_grid2, R.id.browse_grid2);\r\n-        presenter2.setNumberOfColumns(GridFragmentHelper.getMaxColsNum(getContext(), R.dimen.card_width, mVideoGridScale) - 1);\r\n+        int maxColsNum = GridFragmentHelper.getMaxColsNum(getContext(), R.dimen.card_width, mVideoGridScale);\r\n+        presenter2.setNumberOfColumns(Math.max(maxColsNum, 1) - 1);\r\n \r\n         setGridPresenter1(presenter1);\r\n         setGridPresenter2(presenter2);\r",
      "parent_sha": "1ef14b8e271b17ed373090bbad89afdbe2480220"
    }
  },
  {
    "oid": "0cc1e4d5714f1c56f00fc7bbed5730e8594b08bb",
    "message": "player: pause on seek fix 2",
    "date": "2021-10-12T02:55:15Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/0cc1e4d5714f1c56f00fc7bbed5730e8594b08bb",
    "details": {
      "sha": "af20a9e8c5850b4a80b739eabefc59a21d80d91c",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/mod/leanback/playerglue/tweaks/PlaybackTransportRowPresenter.java",
      "status": "modified",
      "additions": 12,
      "deletions": 6,
      "changes": 18,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/0cc1e4d5714f1c56f00fc7bbed5730e8594b08bb/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FPlaybackTransportRowPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/0cc1e4d5714f1c56f00fc7bbed5730e8594b08bb/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FPlaybackTransportRowPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FPlaybackTransportRowPresenter.java?ref=0cc1e4d5714f1c56f00fc7bbed5730e8594b08bb",
      "patch": "@@ -461,9 +461,12 @@ public boolean onKey(View view, int keyCode, KeyEvent keyEvent) {\n                                 onBackward();\n                             } else {\n                                 // MOD: resume immediately after seeking\n-                                if (!mPlayerData.isPauseOnSeekEnabled()) {\n-                                    stopSeek(false);\n+\n+                                if (mPlayerData.isPauseOnSeekEnabled() && keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {\n+                                    return true;\n                                 }\n+\n+                                stopSeek(false);\n                             }\n                             return true;\n                         case KeyEvent.KEYCODE_DPAD_RIGHT:\n@@ -474,18 +477,21 @@ public boolean onKey(View view, int keyCode, KeyEvent keyEvent) {\n                                 onForward();\n                             } else {\n                                 // MOD: resume immediately after seeking\n-                                if (!mPlayerData.isPauseOnSeekEnabled()) {\n-                                    stopSeek(false);\n+\n+                                if (mPlayerData.isPauseOnSeekEnabled() && keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {\n+                                    return true;\n                                 }\n+\n+                                stopSeek(false);\n                             }\n                             return true;\n-                        case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE: // MOD: act as OK?\n+                        //case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE: // MOD: act as OK? (handled somewhere else, inside player glue)\n                         case KeyEvent.KEYCODE_DPAD_CENTER:\n                         case KeyEvent.KEYCODE_ENTER:\n                             if (!mInSeek) {\n                                 return false; // use pause toggle handler\n                             }\n-                            if (keyEvent.getAction() == KeyEvent.ACTION_UP) {\n+                            if (keyEvent.getAction() == KeyEvent.ACTION_DOWN) {\n                                 stopSeek(false);\n                             }\n                             // Fix: is video is paused previously then you should click OK twice to play",
      "parent_sha": "2fc35ef319caac70dcb1b7dbfac148bf5f23efbd"
    }
  },
  {
    "oid": "ce1c427fb842f1bc823a92fb9b83d7668656b4db",
    "message": "upd",
    "date": "2021-07-21T13:08:37Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/ce1c427fb842f1bc823a92fb9b83d7668656b4db",
    "details": {
      "sha": "d31b274e2765cc563ac97d1fd0ad81de538074df",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/mod/leanback/misc/SearchSupportFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 6,
      "changes": 7,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/ce1c427fb842f1bc823a92fb9b83d7668656b4db/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FSearchSupportFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/ce1c427fb842f1bc823a92fb9b83d7668656b4db/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FSearchSupportFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fmisc%2FSearchSupportFragment.java?ref=ce1c427fb842f1bc823a92fb9b83d7668656b4db",
      "patch": "@@ -737,18 +737,13 @@ void updateSearchBarNextFocusId() {\n     }\n \n     void updateFocus() {\n-        if (mResultAdapter != null && mResultAdapter.size() > 1\n+        if (mResultAdapter != null && mResultAdapter.size() > 0\n                 && mRowsSupportFragment != null && mRowsSupportFragment.getAdapter() == mResultAdapter) {\n             focusOnResults();\n         } else {\n             // MOD: Comment to fix moving focus to voice button when activity started\n             //mSearchBar.requestFocus();\n         }\n-\n-        // MOD: Trying to fix lost focus on voice search (rare bug)\n-        //if (!mSpeechOrbView.isFocused() && !mSearchTextEditor.isFocused()) {\n-        //    mSpeechOrbView.requestFocus();\n-        //}\n     }\n \n     /**",
      "parent_sha": "cce649cc2528ecb28a46d5e18c6492d9764cd13b"
    }
  },
  {
    "oid": "542df0de6a40b7b955a5060a4f9dbfcb5ad64a74",
    "message": "improve pin/unpin playlists: upd",
    "date": "2021-12-15T04:15:16Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/542df0de6a40b7b955a5060a4f9dbfcb5ad64a74",
    "details": {
      "sha": "e39cbc98cfe0c2b092eccae63d389967c1487d88",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/dialogs/menu/SectionMenuPresenter.java",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/542df0de6a40b7b955a5060a4f9dbfcb5ad64a74/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fdialogs%2Fmenu%2FSectionMenuPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/542df0de6a40b7b955a5060a4f9dbfcb5ad64a74/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fdialogs%2Fmenu%2FSectionMenuPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fdialogs%2Fmenu%2FSectionMenuPresenter.java?ref=542df0de6a40b7b955a5060a4f9dbfcb5ad64a74",
      "patch": "@@ -129,7 +129,7 @@ private void appendUnpinFromSidebarButton() {\n         mSettingsPresenter.appendSingleButton(\r\n                 UiOptionItem.from(getContext().getString(R.string.unpin_from_sidebar),\r\n                         optionItem -> {\r\n-                            if (mVideo.hasPlaylist()) {\r\n+                            if (mVideo.hasPlaylist() || mVideo.hasChannel()) {\r\n                                 togglePinToSidebar(createPinnedSection(mVideo));\r\n                                 mSettingsPresenter.closeDialog();\r\n                             } else {\r\n@@ -208,12 +208,13 @@ private void togglePinToSidebar(Video section) {\n     }\r\n \r\n     private Video createPinnedSection(Video video) {\r\n-        if (video == null || (!video.hasPlaylist() && !video.hasUploads())) {\r\n+        if (video == null || (!video.hasPlaylist() && !video.hasChannel() && !video.hasUploads())) {\r\n             return null;\r\n         }\r\n \r\n         Video section = new Video();\r\n         section.playlistId = video.playlistId;\r\n+        section.channelId = video.channelId;\r\n         section.title = String.format(\"%s - %s\",\r\n                 video.group != null && video.group.getTitle() != null ? video.group.getTitle() : video.title,\r\n                 video.author != null ? video.author : video.description\r",
      "parent_sha": "03cabfd2fca199f3be9951ab311325122d6fddb1"
    }
  },
  {
    "oid": "1ccde9ccca30d2b6b3859bc9e75d8be497591f61",
    "message": "player: frame drop options refactor #2",
    "date": "2023-04-05T17:56:57Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/1ccde9ccca30d2b6b3859bc9e75d8be497591f61",
    "details": {
      "sha": "9edea59ba17c61748221847ffbd18bf21f73d1c2",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/settings/PlayerSettingsPresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/1ccde9ccca30d2b6b3859bc9e75d8be497591f61/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FPlayerSettingsPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/1ccde9ccca30d2b6b3859bc9e75d8be497591f61/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FPlayerSettingsPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FPlayerSettingsPresenter.java?ref=1ccde9ccca30d2b6b3859bc9e75d8be497591f61",
      "patch": "@@ -339,7 +339,7 @@ private void appendTweaksCategory(AppDialogPresenter settingsPresenter) {\n                 mPlayerTweaksData.isSonyFrameDropFixEnabled()));\r\n \r\n         options.add(UiOptionItem.from(\"Frame drop fix #2\",\r\n-                \"Created for Amazon Stick devices. This tweak isn't tested yet.\",\r\n+                \"Intended for Amazon Stick devices. May work on other devices too.\",\r\n                 option -> mPlayerTweaksData.enableAmazonFrameDropFix(option.isSelected()),\r\n                 mPlayerTweaksData.isAmazonFrameDropFixEnabled()));\r\n \r",
      "parent_sha": "3949cf21d887c8edd6b3d09b09c4719b5939092a"
    }
  },
  {
    "oid": "1760df4de2cbdf85dacf5b7a4ee17b889cc83917",
    "message": "player: refactor track error fixer 4",
    "date": "2023-07-09T15:31:46Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/1760df4de2cbdf85dacf5b7a4ee17b889cc83917",
    "details": {
      "sha": "171b2b3f72eeffaf07b52a9656c9986bad567b47",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/errors/TrackErrorFixer.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/1760df4de2cbdf85dacf5b7a4ee17b889cc83917/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Ferrors%2FTrackErrorFixer.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/1760df4de2cbdf85dacf5b7a4ee17b889cc83917/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Ferrors%2FTrackErrorFixer.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Ferrors%2FTrackErrorFixer.java?ref=1760df4de2cbdf85dacf5b7a4ee17b889cc83917",
      "patch": "@@ -86,11 +86,12 @@ private boolean selectDifferentCodec() {\n         }\r\n \r\n         String currentCodec = currentTrack.format.codecs;\r\n+        int width = currentTrack.format.width;\r\n \r\n         MediaTrack nextTrack = null;\r\n \r\n         for (MediaTrack track : tracks) {\r\n-            if (!currentCodec.equals(track.format.codecs)) {\r\n+            if (!currentCodec.equals(track.format.codecs) && track.format.width <= width) {\r\n                 nextTrack = track;\r\n                 break;\r\n             }\r",
      "parent_sha": "17c70f213a03f266c5e35578db9b3a625c82fdda"
    }
  },
  {
    "oid": "924d5803683bfcecd651cbd78bd3345a5e46b1fc",
    "message": "simple edit dialog refactor",
    "date": "2024-09-26T18:27:40Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/924d5803683bfcecd651cbd78bd3345a5e46b1fc",
    "details": {
      "sha": "53bf76db63bb0d8eeacf6297912d09d741cca358",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/utils/SimpleEditDialog.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/924d5803683bfcecd651cbd78bd3345a5e46b1fc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FSimpleEditDialog.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/924d5803683bfcecd651cbd78bd3345a5e46b1fc/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FSimpleEditDialog.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FSimpleEditDialog.java?ref=924d5803683bfcecd651cbd78bd3345a5e46b1fc",
      "patch": "@@ -43,7 +43,7 @@ private static void show(Context context, String dialogTitle, String defaultValu\n         KeyHelpers.fixShowKeyboard(editField);\r\n \r\n         editField.setText(defaultValue);\r\n-        editField.setHint(R.string.enter_value);\r\n+        editField.setHint(dialogTitle);\r\n \r\n         // keep empty, will override below.\r\n         // https://stackoverflow.com/a/15619098/5379584\r\n@@ -70,6 +70,7 @@ private static void show(Context context, String dialogTitle, String defaultValu\n \r\n             if (newValue.isEmpty()) {\r\n                 // Empty fields not allowed\r\n+                editField.setHint(R.string.enter_value);\r\n                 return;\r\n             }\r\n \r",
      "parent_sha": "e23298edbd0cc05b1097474ef9dc8653fb4f93cc"
    }
  },
  {
    "oid": "6cce6471fcb4f158c469cd381e4affa843ae32d9",
    "message": "activity fix",
    "date": "2020-10-14T20:44:10Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/6cce6471fcb4f158c469cd381e4affa843ae32d9",
    "details": {
      "sha": "4e108c80afb71535000c06b30fa14dec632f5ee0",
      "filename": "smartyoutubetv2/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 8,
      "deletions": 6,
      "changes": 14,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/6cce6471fcb4f158c469cd381e4affa843ae32d9/smartyoutubetv2%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/6cce6471fcb4f158c469cd381e4affa843ae32d9/smartyoutubetv2%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smartyoutubetv2%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=6cce6471fcb4f158c469cd381e4affa843ae32d9",
      "patch": "@@ -75,16 +75,14 @@ public class PlaybackFragment extends VideoSupportFragment implements PlaybackVi\n     private boolean mBlockEngine;\n     private boolean mEnablePIP;\n     private ExoPlayerInitializer mPlayerInitializer;\n-    private LeanbackActivity mLeanbackActivity;\n \n     @Override\n     public void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n \n-        mLeanbackActivity = (LeanbackActivity) getActivity();\n         mMediaGroupAdapters = new HashMap<>();\n-        mBackgroundManager = mLeanbackActivity.getBackgroundManager();\n-        mBackgroundManager.setBackgroundColor(ContextCompat.getColor(mLeanbackActivity, R.color.player_background));\n+        mBackgroundManager = getLeanbackActivity().getBackgroundManager();\n+        mBackgroundManager.setBackgroundColor(ContextCompat.getColor(getLeanbackActivity(), R.color.player_background));\n         mPlayerInitializer = new ExoPlayerInitializer(getActivity());\n \n         mPlaybackPresenter = PlaybackPresenter.instance(getContext());\n@@ -288,7 +286,7 @@ public void onItemClicked(\n                 Row row) {\n \n             if (item instanceof Video) {\n-                boolean longClick = mLeanbackActivity.isLongClick();\n+                boolean longClick = getLeanbackActivity().isLongClick();\n                 Log.d(TAG, \"Is long click: \" + longClick);\n \n                 if (longClick) {\n@@ -568,7 +566,7 @@ public Video getVideo() {\n \n     @Override\n     public void exit() {\n-        mLeanbackActivity.finish();\n+        getLeanbackActivity().finish();\n     }\n \n     @Override\n@@ -640,4 +638,8 @@ public void updateSuggestions(VideoGroup group) {\n     }\n \n     /* End PlayerController */\n+\n+    private LeanbackActivity getLeanbackActivity() {\n+        return (LeanbackActivity) getActivity();\n+    }\n }",
      "parent_sha": "a9bae0b8707df20aa0c3b5eed87f9857cc3ce649"
    }
  },
  {
    "oid": "94ae89d677615e958a62fb11702ef5fdd8250967",
    "message": "Eltex NPE fix^",
    "date": "2021-11-29T16:18:51Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/94ae89d677615e958a62fb11702ef5fdd8250967",
    "details": {
      "sha": "4ab1ccad0ce6d02dfca6b14d8c462cd9cf503894",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/utils/Utils.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/94ae89d677615e958a62fb11702ef5fdd8250967/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/94ae89d677615e958a62fb11702ef5fdd8250967/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java?ref=94ae89d677615e958a62fb11702ef5fdd8250967",
      "patch": "@@ -170,7 +170,7 @@ public static boolean checkActivity(Activity activity) {\n     }\r\n \r\n     public static void updateRemoteControlService(Context context) {\r\n-        if (context == null) {\r\n+        if (context == null || Build.MODEL.equals(\"NV501WAC\")) { // Eltex NPE fix\r\n             return;\r\n         }\r\n \r",
      "parent_sha": "83469757648668e71cd0d9439fc8d4aab6842e13"
    }
  },
  {
    "oid": "a1f9aac0d8fcdd1085614da06bfae0899f092cbb",
    "message": "refactor",
    "date": "2021-03-06T08:52:10Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a1f9aac0d8fcdd1085614da06bfae0899f092cbb",
    "details": {
      "sha": "2fb78e8c8145aaf58299d24f750ba562b76e70be",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/base/BasePresenter.java",
      "status": "modified",
      "additions": 6,
      "deletions": 8,
      "changes": 14,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a1f9aac0d8fcdd1085614da06bfae0899f092cbb/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fbase%2FBasePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a1f9aac0d8fcdd1085614da06bfae0899f092cbb/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fbase%2FBasePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fbase%2FBasePresenter.java?ref=a1f9aac0d8fcdd1085614da06bfae0899f092cbb",
      "patch": "@@ -3,9 +3,7 @@\n import android.app.Activity;\r\n import android.content.Context;\r\n import androidx.fragment.app.Fragment;\r\n-import com.liskovsoft.sharedutils.prefs.GlobalPreferences;\r\n import com.liskovsoft.smartyoutubetv2.common.app.presenters.interfaces.Presenter;\r\n-import com.liskovsoft.smartyoutubetv2.common.app.views.ViewManager;\r\n import com.liskovsoft.smartyoutubetv2.common.utils.Utils;\r\n \r\n import java.lang.ref.WeakReference;\r\n@@ -14,8 +12,8 @@ public abstract class BasePresenter<T> implements Presenter<T> {\n     private WeakReference<T> mView = new WeakReference<>(null);\r\n     private WeakReference<Activity> mActivity = new WeakReference<>(null);\r\n     private WeakReference<Context> mApplicationContext = new WeakReference<>(null);\r\n-    private static boolean sGlobalDataInitialized;\r\n-    private static boolean sGlobalDataInitializedTmp;\r\n+    private static boolean sIsGlobalDataInitialized;\r\n+    private static boolean sIsGlobalDataInitializedTmp;\r\n \r\n     public BasePresenter(Context context) {\r\n         setContext(context);\r\n@@ -82,16 +80,16 @@ public void onViewResumed() {\n     }\r\n \r\n     private void initGlobalData() {\r\n-        if (sGlobalDataInitialized || getContext() == null) {\r\n+        if (sIsGlobalDataInitialized || getContext() == null) {\r\n             return;\r\n         }\r\n \r\n         boolean isActivity = getContext() instanceof Activity;\r\n \r\n-        if (isActivity || !sGlobalDataInitializedTmp) {\r\n+        if (isActivity || !sIsGlobalDataInitializedTmp) {\r\n             Utils.initGlobalData(getContext());\r\n-            sGlobalDataInitialized = isActivity;\r\n-            sGlobalDataInitializedTmp = !isActivity;\r\n+            sIsGlobalDataInitialized = isActivity;\r\n+            sIsGlobalDataInitializedTmp = !isActivity;\r\n         }\r\n     }\r\n }\r",
      "parent_sha": "a63c3e3276a2ae35a9f2b72255cd22779d611193"
    }
  },
  {
    "oid": "599c440a1e9cbee80cf403d45c3ee9851bcfb2de",
    "message": "player: update history every minute",
    "date": "2022-05-21T01:00:51Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/599c440a1e9cbee80cf403d45c3ee9851bcfb2de",
    "details": {
      "sha": "d3ae6a470a56c83d61fa6d7c857b3cb2520b749d",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/VideoStateManager.java",
      "status": "modified",
      "additions": 46,
      "deletions": 42,
      "changes": 88,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/599c440a1e9cbee80cf403d45c3ee9851bcfb2de/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoStateManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/599c440a1e9cbee80cf403d45c3ee9851bcfb2de/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoStateManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoStateManager.java?ref=599c440a1e9cbee80cf403d45c3ee9851bcfb2de",
      "patch": "@@ -13,13 +13,15 @@\n import com.liskovsoft.smartyoutubetv2.common.autoframerate.FormatItem;\r\n import com.liskovsoft.smartyoutubetv2.common.misc.MotherActivity;\r\n import com.liskovsoft.smartyoutubetv2.common.misc.ScreensaverManager;\r\n+import com.liskovsoft.smartyoutubetv2.common.misc.TickleManager;\r\n+import com.liskovsoft.smartyoutubetv2.common.misc.TickleManager.TickleListener;\r\n import com.liskovsoft.smartyoutubetv2.common.prefs.PlayerData;\r\n import com.liskovsoft.smartyoutubetv2.common.prefs.PlayerTweaksData;\r\n import com.liskovsoft.youtubeapi.service.YouTubeMediaService;\r\n import io.reactivex.Observable;\r\n import io.reactivex.disposables.Disposable;\r\n \r\n-public class VideoStateManager extends PlayerEventListenerHelper {\r\n+public class VideoStateManager extends PlayerEventListenerHelper implements TickleListener {\r\n     private static final long MUSIC_VIDEO_MAX_LENGTH_MS = 6 * 60 * 1000;\r\n     private static final long LIVE_THRESHOLD_MS = 60_000;\r\n     private static final String TAG = VideoStateManager.class.getSimpleName();\r\n@@ -109,6 +111,8 @@ public void onEngineInitialized() {\n         if (!getPlayEnabled()) {\r\n             getController().showOverlay(true);\r\n         }\r\n+\r\n+        TickleManager.instance().addListener(this);\r\n     }\r\n \r\n     @Override\r\n@@ -118,6 +122,13 @@ public void onEngineReleased() {\n             setPlayEnabled(getController().getPlay());\r\n             saveState();\r\n         }\r\n+\r\n+        TickleManager.instance().removeListener(this);\r\n+    }\r\n+\r\n+    @Override\r\n+    public void onTickle() {\r\n+        updateHistory();\r\n     }\r\n \r\n     @Override\r\n@@ -217,7 +228,7 @@ public void onSourceChanged(Video item) {\n \r\n     @Override\r\n     public void onViewPaused() {\r\n-        persistVideoState();\r\n+        persistState();\r\n     }\r\n \r\n     private void clearStateOfNextVideo() {\r\n@@ -267,7 +278,7 @@ private void resetPosition(String videoId) {\n         }\r\n     }\r\n \r\n-    private void persistVideoState() {\r\n+    private void persistState() {\r\n         if (AppDialogPresenter.instance(getActivity()).isDialogShown()) {\r\n             return;\r\n         }\r\n@@ -292,21 +303,18 @@ private void restoreSubtitleFormat() {\n     }\r\n \r\n     private void saveState() {\r\n-        if (!getController().containsMedia()) {\r\n-            return;\r\n-        }\r\n+        savePosition();\r\n+        updateHistory();\r\n+        //persistState();\r\n+    }\r\n \r\n+    private void savePosition() {\r\n         Video video = getVideo();\r\n \r\n-        if (video != null) {\r\n-            savePosition(video);\r\n-            updateHistory();\r\n-            //persistVideoState();\r\n-            //persistVolume();\r\n+        if (video == null || !getController().containsMedia()) {\r\n+            return;\r\n         }\r\n-    }\r\n \r\n-    private void savePosition(Video video) {\r\n         // Exceptional cases:\r\n         // 1) Track is ended\r\n         // 2) Pause on end enabled\r\n@@ -364,6 +372,31 @@ private void restorePosition() {\n         }\r\n     }\r\n \r\n+    private void updateHistory() {\r\n+        Video video = getVideo();\r\n+\r\n+        if (video == null || !getController().containsMedia()) {\r\n+            return;\r\n+        }\r\n+\r\n+        RxUtils.disposeActions(mHistoryAction);\r\n+\r\n+        MediaService service = YouTubeMediaService.instance();\r\n+        MediaItemManager mediaItemManager = service.getMediaItemManager();\r\n+\r\n+        Observable<Void> historyObservable;\r\n+\r\n+        long positionSec = getController().getPositionMs() / 1_000;\r\n+\r\n+        if (video.mediaItem != null) {\r\n+            historyObservable = mediaItemManager.updateHistoryPositionObserve(video.mediaItem, positionSec);\r\n+        } else { // video launched form ATV channels\r\n+            historyObservable = mediaItemManager.updateHistoryPositionObserve(video.videoId, positionSec);\r\n+        }\r\n+\r\n+        mHistoryAction = RxUtils.execute(historyObservable);\r\n+    }\r\n+\r\n     /**\r\n      * Restore position from description time code\r\n      */\r\n@@ -419,10 +452,6 @@ public boolean getPlayEnabled() {\n         return mIsPlayEnabled;\r\n     }\r\n \r\n-    //private void persistVolume() {\r\n-    //    mVolume = getController().getVolume();\r\n-    //}\r\n-\r\n     private void restoreVolume() {\r\n         getController().setVolume(mPlayerData.getPlayerVolume());\r\n     }\r\n@@ -433,31 +462,6 @@ private void restoreFormats() {\n         restoreSubtitleFormat();\r\n     }\r\n \r\n-    private void updateHistory() {\r\n-        Video video = getVideo();\r\n-\r\n-        if (video == null) {\r\n-            return;\r\n-        }\r\n-\r\n-        RxUtils.disposeActions(mHistoryAction);\r\n-        \r\n-        MediaService service = YouTubeMediaService.instance();\r\n-        MediaItemManager mediaItemManager = service.getMediaItemManager();\r\n-\r\n-        Observable<Void> historyObservable;\r\n-\r\n-        long positionSec = getController().getPositionMs() / 1_000;\r\n-\r\n-        if (video.mediaItem != null) {\r\n-            historyObservable = mediaItemManager.updateHistoryPositionObserve(video.mediaItem, positionSec);\r\n-        } else { // video launched form ATV channels\r\n-            historyObservable = mediaItemManager.updateHistoryPositionObserve(video.videoId, positionSec);\r\n-        }\r\n-\r\n-        mHistoryAction = RxUtils.execute(historyObservable);\r\n-    }\r\n-\r\n     private void showHideScreensaver(boolean show) {\r\n         if (getActivity() instanceof MotherActivity) {\r\n             ScreensaverManager screensaverManager = ((MotherActivity) getActivity()).getScreensaverManager();\r",
      "parent_sha": "b020555aead97ae6042b11420db868f9b5568203"
    }
  },
  {
    "oid": "30e08840ac8668713a122e69bf306469a6bf327f",
    "message": "refactor",
    "date": "2021-06-24T03:10:29Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/30e08840ac8668713a122e69bf306469a6bf327f",
    "details": {
      "sha": "c6e40e3b788a4eb08852723cb7df55c922258cdb",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/ExoMediaSourceFactory.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/30e08840ac8668713a122e69bf306469a6bf327f/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FExoMediaSourceFactory.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/30e08840ac8668713a122e69bf306469a6bf327f/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FExoMediaSourceFactory.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FExoMediaSourceFactory.java?ref=30e08840ac8668713a122e69bf306469a6bf327f",
      "patch": "@@ -293,8 +293,8 @@ private static void addCommonHeaders(BaseFactory dataSourceFactory) {\n         //dataSourceFactory.getDefaultRequestProperties().set(\"sec-fetch-mode\", \"cors\");\r\n         //dataSourceFactory.getDefaultRequestProperties().set(\"sec-fetch-site\", \"cross-site\");\r\n \r\n-        // Compress response\r\n-        dataSourceFactory.getDefaultRequestProperties().set(\"Accept-Encoding\", AppConstants.ACCEPT_ENCODING);\r\n+        // Compress response (WARN: gzip, deflate or br aren't supported in dash urls)\r\n+        //dataSourceFactory.getDefaultRequestProperties().set(\"Accept-Encoding\", AppConstants.ACCEPT_ENCODING);\r\n     }\r\n \r\n     // EXO: 2.12.1\r",
      "parent_sha": "d01a7431fabba359b6f5e257f36e7eb89b3f760b"
    }
  },
  {
    "oid": "44c5fb52a8de919654526cf01a4705eb5469af5a",
    "message": "bugfix",
    "date": "2021-12-25T02:36:49Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/44c5fb52a8de919654526cf01a4705eb5469af5a",
    "details": {
      "sha": "df850ddad07e4229705dbcd88e0b157b31e231de",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/BrowsePresenter.java",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/44c5fb52a8de919654526cf01a4705eb5469af5a/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/44c5fb52a8de919654526cf01a4705eb5469af5a/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java?ref=44c5fb52a8de919654526cf01a4705eb5469af5a",
      "patch": "@@ -224,7 +224,10 @@ public void updateSections() {\n     }\n \n     private void sortSections() {\n-        Collections.sort(mSections, Comparator.comparingInt(o -> mGeneralData.getSectionIndex(o.getId())));\n+        // NOTE: Comparator.comparingInt API >= 24\n+        Collections.sort(mSections, (o1, o2) -> {\n+            return mGeneralData.getSectionIndex(o1.getId()) - mGeneralData.getSectionIndex(o2.getId());\n+        });\n     }\n \n     public void updateChannelSorting() {",
      "parent_sha": "447784d00f881abe1342ba8aca8862e7a75c0088"
    }
  },
  {
    "oid": "ba3978f1d46cda79419bbee438ee162eeeb2fcb8",
    "message": "settings defaults: disable player only mode",
    "date": "2024-03-23T03:34:51Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/ba3978f1d46cda79419bbee438ee162eeeb2fcb8",
    "details": {
      "sha": "1647c64685f487f0e2eda962c5d30b7b1f8a182a",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/prefs/GeneralData.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/ba3978f1d46cda79419bbee438ee162eeeb2fcb8/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FGeneralData.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/ba3978f1d46cda79419bbee438ee162eeeb2fcb8/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FGeneralData.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FGeneralData.java?ref=ba3978f1d46cda79419bbee438ee162eeeb2fcb8",
      "patch": "@@ -951,7 +951,7 @@ private void restoreState() {\n         mBootSectionId = Helpers.parseInt(split, 1, MediaGroup.TYPE_HOME);\r\n         mIsSettingsSectionEnabled = Helpers.parseBoolean(split, 2, true);\r\n         mAppExitShortcut = Helpers.parseInt(split, 3, EXIT_DOUBLE_BACK);\r\n-        mIsPlayerOnlyModeEnabled = Helpers.parseBoolean(split, 4, true);\r\n+        mIsPlayerOnlyModeEnabled = Helpers.parseBoolean(split, 4, false);\r\n         mBackgroundShortcut = Helpers.parseInt(split, 5, BACKGROUND_PLAYBACK_SHORTCUT_HOME_BACK);\r\n         String pinnedItems = Helpers.parseStr(split, 6);\r\n         mIsHideShortsFromSubscriptionsEnabled = Helpers.parseBoolean(split, 7, false);\r",
      "parent_sha": "16014ec61cd32c20ca3b4689971ad7aa9e4a38b3"
    }
  },
  {
    "oid": "02ccb5d62646870b4431f4e61f3c129624db5c99",
    "message": "app dialog: nested dialogs finishing fix",
    "date": "2021-12-27T20:56:46Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/02ccb5d62646870b4431f4e61f3c129624db5c99",
    "details": {
      "sha": "eedb40e1984092a6cf123e9cba2f6649563486d0",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/AppDialogPresenter.java",
      "status": "modified",
      "additions": 8,
      "deletions": 4,
      "changes": 12,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/02ccb5d62646870b4431f4e61f3c129624db5c99/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FAppDialogPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/02ccb5d62646870b4431f4e61f3c129624db5c99/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FAppDialogPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FAppDialogPresenter.java?ref=02ccb5d62646870b4431f4e61f3c129624db5c99",
      "patch": "@@ -18,8 +18,8 @@ public class AppDialogPresenter extends BasePresenter<AppDialogView> {\n     private final List<SettingsCategory> mCategories;\r\n     private final Handler mHandler;\r\n     private final Runnable mCloseDialog = this::closeDialog;\r\n+    private final List<Runnable> mOnFinish = new ArrayList<>();\r\n     private String mTitle;\r\n-    private Runnable mOnFinish;\r\n     private long mTimeoutMs;\r\n \r\n     public static class SettingsCategory {\r\n@@ -94,9 +94,13 @@ public void onViewDestroyed() {\n     public void onFinish() {\r\n         clear();\r\n \r\n-        if (mOnFinish != null) {\r\n-            mOnFinish.run();\r\n+        for (Runnable callback : mOnFinish) {\r\n+            if (callback != null) {\r\n+                callback.run();\r\n+            }\r\n         }\r\n+\r\n+        mOnFinish.clear();\r\n     }\r\n \r\n     public void clear() {\r\n@@ -125,7 +129,7 @@ public void showDialog(Runnable onClose) {\n \r\n     public void showDialog(String dialogTitle, Runnable onFinish) {\r\n         mTitle = dialogTitle;\r\n-        mOnFinish = onFinish;\r\n+        mOnFinish.add(onFinish);\r\n \r\n         if (getView() != null) {\r\n             getView().clear();\r",
      "parent_sha": "3299bcd69d1bddb819c6e5d0bf9f0ed62f752f64"
    }
  },
  {
    "oid": "e51112cb5993aef340d310a482c961cda8e52591",
    "message": "track selection fix: upd",
    "date": "2021-02-09T19:04:49Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/e51112cb5993aef340d310a482c961cda8e52591",
    "details": {
      "sha": "04d0a62702d9c4be3b8e7c8273ec08bc80043f18",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/selector/track/VideoTrack.java",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/e51112cb5993aef340d310a482c961cda8e52591/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2Ftrack%2FVideoTrack.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/e51112cb5993aef340d310a482c961cda8e52591/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2Ftrack%2FVideoTrack.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2Ftrack%2FVideoTrack.java?ref=e51112cb5993aef340d310a482c961cda8e52591",
      "patch": "@@ -4,8 +4,7 @@\n import com.liskovsoft.smartyoutubetv2.common.exoplayer.selector.TrackSelectorUtil;\r\n \r\n public class VideoTrack extends MediaTrack {\r\n-    private static final int SIZE_EQUITY_THRESHOLD_PX = 80;\r\n-    private static final int SIZE_EQUITY_THRESHOLD_PERCENT = 15;\r\n+    private static final int SIZE_EQUITY_THRESHOLD_PERCENT = 5;\r\n     private static final int COMPARE_TYPE_IN_BOUNDS = 0;\r\n     private static final int COMPARE_TYPE_IN_BOUNDS_PROFILE = 1;\r\n     private static final int COMPARE_TYPE_NORMAL = 2;\r",
      "parent_sha": "382d28b1b734fa71ab0ef0657d9abea80d1d525c"
    }
  },
  {
    "oid": "e961c9faf19eb4e92f624e17efe173dfa7f99b21",
    "message": "chat: black list upd",
    "date": "2022-07-27T11:54:11Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/e961c9faf19eb4e92f624e17efe173dfa7f99b21",
    "details": {
      "sha": "e2df79af3e7d865d9ba52dd2b73b65dd13ce9602",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/LiveChatManager.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/e961c9faf19eb4e92f624e17efe173dfa7f99b21/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FLiveChatManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/e961c9faf19eb4e92f624e17efe173dfa7f99b21/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FLiveChatManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FLiveChatManager.java?ref=e961c9faf19eb4e92f624e17efe173dfa7f99b21",
      "patch": "@@ -18,7 +18,7 @@\n \r\n public class LiveChatManager extends PlayerEventListenerHelper implements MetadataListener {\r\n     private static final String TAG = LiveChatManager.class.getSimpleName();\r\n-    private static final String[] BLACK_LIST = {\". XYZ\", \". \u0425YZ\"};\r\n+    private static final String[] BLACK_LIST = {\". XYZ\", \". \u0425YZ\", \"Ricardo Merlino\"};\r\n     private LiveChatService mChatService;\r\n     private PlayerData mPlayerData;\r\n     private Disposable mChatAction;\r",
      "parent_sha": "3b1611251d212dbabc139edb3f9f9a7ed700616c"
    }
  },
  {
    "oid": "8c8ae44f906ade3984a164382085709b6bb48f84",
    "message": "player: suggested item index fix",
    "date": "2022-01-16T05:03:18Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/8c8ae44f906ade3984a164382085709b6bb48f84",
    "details": {
      "sha": "2538bccd7b9b7ced17b513625a8b2455d64b0d90",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/8c8ae44f906ade3984a164382085709b6bb48f84/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/8c8ae44f906ade3984a164382085709b6bb48f84/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=8c8ae44f906ade3984a164382085709b6bb48f84",
      "patch": "@@ -558,7 +558,7 @@ protected void onRowViewSelected(RowPresenter.ViewHolder holder, boolean selecte\n     }\n \n     private int getSuggestedItemIndex() {\n-        if (getVideo() == null || !getVideo().hasPlaylist()) {\n+        if (getVideo() == null || !getVideo().hasPlaylist() || !getVideo().hasVideo()) {\n             return -1;\n         }\n ",
      "parent_sha": "fad08e3888fd3639787286d555bc842443c0099b"
    }
  },
  {
    "oid": "a5715fadc804791fa5fe9d9396fc64b409c1294c",
    "message": "player: open url list",
    "date": "2020-09-26T22:20:30Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a5715fadc804791fa5fe9d9396fc64b409c1294c",
    "details": {
      "sha": "d3d6d03923d44a6047f372da09a29d1069245ee7",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/VideoLoader.java",
      "status": "modified",
      "additions": 7,
      "deletions": 8,
      "changes": 15,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a5715fadc804791fa5fe9d9396fc64b409c1294c/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoLoader.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a5715fadc804791fa5fe9d9396fc64b409c1294c/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoLoader.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FVideoLoader.java?ref=a5715fadc804791fa5fe9d9396fc64b409c1294c",
      "patch": "@@ -14,8 +14,6 @@\n import io.reactivex.disposables.Disposable;\r\n import io.reactivex.schedulers.Schedulers;\r\n \r\n-import java.io.InputStream;\r\n-\r\n public class VideoLoader extends PlayerEventListenerHelper {\r\n     private static final String TAG = VideoLoader.class.getSimpleName();\r\n     private final Playlist mPlaylist;\r\n@@ -153,13 +151,14 @@ private void loadFormatInfo(Video video) {\n     }\r\n \r\n     private void loadFormatInfo(MediaItemFormatInfo formatInfo) {\r\n-        InputStream dashStream = formatInfo.getMpdStream();\r\n-        String hlsManifestUrl = formatInfo.getHlsManifestUrl();\r\n-\r\n-        if (hlsManifestUrl != null) {\r\n-            mController.openHls(hlsManifestUrl);\r\n+        if (formatInfo.containsHlsInfo()) {\r\n+            mController.openHls(formatInfo.getHlsManifestUrl());\r\n+        } else if (formatInfo.containsDashInfo()) {\r\n+            mController.openDash(formatInfo.createMpdStream());\r\n+        } else if (formatInfo.containsUrlListInfo()) {\r\n+            //mController.openUrlList(formatInfo.createUrlList());\r\n         } else {\r\n-            mController.openDash(dashStream);\r\n+            Log.e(TAG, \"Empty format info received. No video data to pass to the player.\");\r\n         }\r\n     }\r\n }\r",
      "parent_sha": "46ff824d215cea010ad8ab47ec8940d5a9983251"
    }
  },
  {
    "oid": "a9bb9e8dbef57d3d5076e959e78c03b46f92508b",
    "message": "multi grid upd",
    "date": "2021-04-16T23:59:49Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a9bb9e8dbef57d3d5076e959e78c03b46f92508b",
    "details": {
      "sha": "3177077bff308b6a75fa662e5945ecc93d58c90a",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/BrowsePresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a9bb9e8dbef57d3d5076e959e78c03b46f92508b/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a9bb9e8dbef57d3d5076e959e78c03b46f92508b/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FBrowsePresenter.java?ref=a9bb9e8dbef57d3d5076e959e78c03b46f92508b",
      "patch": "@@ -463,7 +463,7 @@ private void continueGroup(VideoGroup group) {\n                 .subscribeOn(Schedulers.newThread())\n                 .observeOn(AndroidSchedulers.mainThread())\n                 .subscribe(\n-                        continueGroup -> getView().updateCategory(VideoGroup.from(continueGroup, group.getCategory())),\n+                        continueGroup -> getView().updateCategory(VideoGroup.from(continueGroup, group.getCategory(), group.getPosition())),\n                         error -> {\n                             Log.e(TAG, \"continueGroup error: %s\", error.getMessage());\n                             if (getView() != null) {",
      "parent_sha": "9a9d67b2ccdf476b2cdeb6aeaf508b33d27b73a1"
    }
  },
  {
    "oid": "b6fd284e40fe9c21f8f1ff56ccc63486da584d47",
    "message": "voice search auto submit fix 4",
    "date": "2020-11-12T03:04:31Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/b6fd284e40fe9c21f8f1ff56ccc63486da584d47",
    "details": {
      "sha": "bde7e39469e987862507239904cdbd539913a941",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/search/tags/SearchTagsFragment.java",
      "status": "modified",
      "additions": 14,
      "deletions": 3,
      "changes": 17,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/b6fd284e40fe9c21f8f1ff56ccc63486da584d47/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/b6fd284e40fe9c21f8f1ff56ccc63486da584d47/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java?ref=b6fd284e40fe9c21f8f1ff56ccc63486da584d47",
      "patch": "@@ -75,12 +75,10 @@ public void startSearch(String searchText) {\n     public boolean onQueryTextChange(String newQuery) {\r\n         loadSearchTags(newQuery);\r\n \r\n-        if (TextUtils.isEmpty(mNewQuery)) {\r\n+        if (isVoiceQuery(newQuery)) {\r\n             loadSearchResult(newQuery);\r\n         }\r\n \r\n-        mNewQuery = newQuery;\r\n-\r\n         return true;\r\n     }\r\n \r\n@@ -97,6 +95,19 @@ private void loadSearchResult(String searchQuery) {\n         }\r\n     }\r\n \r\n+    private boolean isVoiceQuery(String newQuery) {\r\n+        if (TextUtils.isEmpty(newQuery)) {\r\n+            mNewQuery = null;\r\n+            return false;\r\n+        }\r\n+\r\n+        boolean isVoice = mNewQuery == null && newQuery.length() > 1;\r\n+\r\n+        mNewQuery = newQuery;\r\n+\r\n+        return isVoice;\r\n+    }\r\n+\r\n     public void focusOnSearch() {\r\n         getView().findViewById(R.id.lb_search_bar).requestFocus();\r\n     }\r",
      "parent_sha": "9ebe35a67dbc72f78046476dd6dae9fd2473c82e"
    }
  },
  {
    "oid": "1e1e2cd9ab623774f07bfa2b9f48a8c31639a746",
    "message": "refactor",
    "date": "2021-08-07T22:27:54Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/1e1e2cd9ab623774f07bfa2b9f48a8c31639a746",
    "details": {
      "sha": "b0a0fd1aa4e2d0cef25e7786abaebf140710159b",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/VideoMenuPresenter.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/1e1e2cd9ab623774f07bfa2b9f48a8c31639a746/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FVideoMenuPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/1e1e2cd9ab623774f07bfa2b9f48a8c31639a746/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FVideoMenuPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2FVideoMenuPresenter.java?ref=1e1e2cd9ab623774f07bfa2b9f48a8c31639a746",
      "patch": "@@ -145,14 +145,14 @@ private void prepareAndShowDialogSigned(List<VideoPlaylistInfo> videoPlaylistInf\n         appendReturnToBackgroundVideoButton();\r\n         appendAddToPlaylistButton(videoPlaylistInfos);\r\n         appendAddToPlaybackQueueButton();\r\n+        appendPinToSidebarButton();\r\n         appendOpenPlaylistButton();\r\n         appendOpenChannelButton();\r\n         //appendOpenChannelUploadsButton();\r\n         appendSubscribeButton();\r\n         appendNotInterestedButton();\r\n         appendShareButton();\r\n         appendAccountSelectionButton();\r\n-        appendPinToSidebarButton();\r\n \r\n         if (!mSettingsPresenter.isEmpty()) {\r\n             String title = mVideo != null ? mVideo.title : mCategory.title;\r\n@@ -169,6 +169,7 @@ private void prepareAndShowDialogUnsigned() {\n \r\n         appendReturnToBackgroundVideoButton();\r\n         appendAddToPlaybackQueueButton();\r\n+        appendPinToSidebarButton();\r\n         appendOpenPlaylistButton();\r\n         appendOpenChannelButton();\r\n         appendShareButton();\r",
      "parent_sha": "bb83b7f54db955c6ddcaf178dd61e728b010bae2"
    }
  },
  {
    "oid": "a2badf19f7e562f92e2e107103b81a497c9bedf5",
    "message": "refactor",
    "date": "2021-04-03T22:26:54Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/a2badf19f7e562f92e2e107103b81a497c9bedf5",
    "details": {
      "sha": "cd178ffee64093f72cb2a70826dd64b749054a10",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/HqDialogManager.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/a2badf19f7e562f92e2e107103b81a497c9bedf5/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FHqDialogManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/a2badf19f7e562f92e2e107103b81a497c9bedf5/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FHqDialogManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FHqDialogManager.java?ref=a2badf19f7e562f92e2e107103b81a497c9bedf5",
      "patch": "@@ -60,7 +60,7 @@ public void onHighQualityClicked() {\n         mSettingsPresenter.clear();\r\n \r\n         addQualityCategories();\r\n-        //addVideoBufferCategory();\r\n+        addVideoBufferCategory();\r\n         //addPresetsCategory();\r\n         addAudioDelayCategory();\r\n         //addBackgroundPlaybackCategory();\r",
      "parent_sha": "3f364a3561ca45a20e6308eb59ee1fdecb70f0f6"
    }
  },
  {
    "oid": "0505550e037208ced1707b04076c7e5fae6b6c50",
    "message": "player: dash: Skip past streams that are truncated",
    "date": "2022-08-14T05:22:17Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/0505550e037208ced1707b04076c7e5fae6b6c50",
    "details": {
      "sha": "72cce602d2d76e0d90417506c2c94ab74b6983ab",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/LiveDashManifestParser.java",
      "status": "modified",
      "additions": 8,
      "deletions": 3,
      "changes": 11,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/0505550e037208ced1707b04076c7e5fae6b6c50/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/0505550e037208ced1707b04076c7e5fae6b6c50/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java?ref=0505550e037208ced1707b04076c7e5fae6b6c50",
      "patch": "@@ -31,8 +31,8 @@\n @SuppressWarnings(\"unchecked\")\r\n public class LiveDashManifestParser extends DashManifestParser {\r\n     private static final String TAG = LiveDashManifestParser.class.getSimpleName();\r\n-    // Usually gaming streams. 12 hours max.\r\n-    private static final long MAX_PAST_STREAM_LENGTH_MS = 12 * 60 * 60 * 1_000;\r\n+    // Usually gaming streams. 10 hours max.\r\n+    private static final long MAX_PAST_STREAM_LENGTH_MS = 10 * 60 * 60 * 1_000;\r\n     // Should be zero for non seekable streams (Record Radio). Higher values may produce 'url not working' error.\r\n     private static final long MAX_LIVE_STREAM_LENGTH_MS = 0 * 60 * 60 * 1_000;\r\n     private DashManifest mOldManifest;\r\n@@ -180,7 +180,7 @@ private static void recreateMissingSegments(DashManifest manifest) {\n         long lastSegmentNum = getLastSegmentNum(manifest);\r\n         if (minUpdatePeriodMs <= 0) { // past live stream\r\n             // May has different length 5_000 (4hrs) or 2_000 (2hrs)\r\n-            minUpdatePeriodMs = durationMs / (lastSegmentNum - firstSegmentNum);\r\n+            minUpdatePeriodMs = durationMs / (lastSegmentNum - firstSegmentNum) / 10 * 10; // Round ending digits\r\n         }\r\n \r\n         long maxSegmentsCount = (timeShiftBufferDepthMs > 0 ? // active live stream\r\n@@ -196,6 +196,11 @@ private static void recreateMissingSegments(DashManifest manifest) {\n             return; // url won't work on small (2_000Ms) segments\r\n         }\r\n \r\n+        // Skip past streams that are truncated\r\n+        if (durationMs > 0 && firstSegmentNum > segmentCount) {\r\n+            return;\r\n+        }\r\n+\r\n         if (timeShiftBufferDepthMs > 0) { // active live stream\r\n             Helpers.setField(manifest, \"timeShiftBufferDepthMs\", timeShiftBufferDepthMs + (segmentCount * minUpdatePeriodMs));\r\n         } else { // past live stream\r",
      "parent_sha": "d852f93a513ca4e5c16f85aba04b008e489b7b7d"
    }
  },
  {
    "oid": "8c8ef4028714b90f135f8a54e5d6de8df49d10ee",
    "message": "player: pip close fix",
    "date": "2022-07-23T17:09:10Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/8c8ef4028714b90f135f8a54e5d6de8df49d10ee",
    "details": {
      "sha": "432b58943ad6b456f591cea3c2a6f0e9cfeceed6",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/playback/PlaybackFragment.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/8c8ef4028714b90f135f8a54e5d6de8df49d10ee/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/8c8ef4028714b90f135f8a54e5d6de8df49d10ee/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fplayback%2FPlaybackFragment.java?ref=8c8ef4028714b90f135f8a54e5d6de8df49d10ee",
      "patch": "@@ -338,7 +338,7 @@ private void maybeReleasePlayer() {\n         //}\n \n         // Ensure to continue playback in audio mode\n-        if (ViewManager.instance(getContext()).getBlockedTop() == PlaybackActivity.class) {\n+        if (ViewManager.instance(getContext()).getBlockedTop() == PlaybackActivity.class && !isInPIPMode()) {\n             Log.d(TAG, \"releasePlayer: Playback activity is blocked. Exiting...\");\n             return;\n         }",
      "parent_sha": "4f9cb4af4491d4fa7734e348e8b1ff0178392e22"
    }
  },
  {
    "oid": "86d105123ffefc5615c89620ff935352cea500de",
    "message": "player: dash: recreate only past live streams; live streams could cause url not found error",
    "date": "2022-08-14T04:30:55Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/86d105123ffefc5615c89620ff935352cea500de",
    "details": {
      "sha": "92b8d83b14385cbfff2bf8b08346122977219534",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/LiveDashManifestParser.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/86d105123ffefc5615c89620ff935352cea500de/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/86d105123ffefc5615c89620ff935352cea500de/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java?ref=86d105123ffefc5615c89620ff935352cea500de",
      "patch": "@@ -174,7 +174,7 @@ private static void recreateMissingSegments(DashManifest manifest) {\n         }\r\n \r\n         long minUpdatePeriodMs = (long) Helpers.getField(manifest, \"minUpdatePeriodMs\");\r\n-        long timeShiftBufferDepthMs = (long) Helpers.getField(manifest, \"timeShiftBufferDepthMs\");\r\n+        long timeShiftBufferDepthMs = (long) Helpers.getField(manifest, \"timeShiftBufferDepthMs\"); // active live stream\r\n         long durationMs = (long) Helpers.getField(manifest, \"durationMs\"); // past live stream\r\n         long firstSegmentNum = getFirstSegmentNum(manifest);\r\n         long lastSegmentNum = getLastSegmentNum(manifest);\r\n@@ -183,7 +183,7 @@ private static void recreateMissingSegments(DashManifest manifest) {\n             minUpdatePeriodMs = durationMs / (lastSegmentNum - firstSegmentNum);\r\n         }\r\n \r\n-        long maxSegmentsCount = (firstSegmentNum > 10_000 ? // Long live stream (e.g. news stream)\r\n+        long maxSegmentsCount = (timeShiftBufferDepthMs > 0 ? // active live stream\r\n                 MAX_LIVE_STREAM_LENGTH_MS : MAX_PAST_STREAM_LENGTH_MS) / minUpdatePeriodMs;\r\n         long segmentCount = Math.min(firstSegmentNum, maxSegmentsCount - (lastSegmentNum - firstSegmentNum - 1));\r\n \r",
      "parent_sha": "592163aa17acbb67bf1459dbe5f07645796e6d36"
    }
  },
  {
    "oid": "34b2614384206ba313c4b9f5fbfc121ef0b022d5",
    "message": "add channel groups backup url",
    "date": "2024-12-24T07:57:57Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/34b2614384206ba313c4b9f5fbfc121ef0b022d5",
    "details": {
      "sha": "826268a9a7de814dac52a3820b3268a47baacf69",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/dialogs/menu/providers/channelgroup/ChannelGroupMenuProvider.java",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/34b2614384206ba313c4b9f5fbfc121ef0b022d5/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fdialogs%2Fmenu%2Fproviders%2Fchannelgroup%2FChannelGroupMenuProvider.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/34b2614384206ba313c4b9f5fbfc121ef0b022d5/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fdialogs%2Fmenu%2Fproviders%2Fchannelgroup%2FChannelGroupMenuProvider.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fdialogs%2Fmenu%2Fproviders%2Fchannelgroup%2FChannelGroupMenuProvider.java?ref=34b2614384206ba313c4b9f5fbfc121ef0b022d5",
      "patch": "@@ -71,10 +71,11 @@ private void showGroupDialog(Video item, VideoMenuCallback callback) {\n \r\n         List<OptionItem> options = new ArrayList<>();\r\n \r\n-        options.add(UiOptionItem.from(mContext.getString(R.string.new_subscriptions_group), optionItem -> {\r\n+        String grayJayBackupUrl = \"/GrayJay/PocketTube URL\";\r\n+        options.add(UiOptionItem.from(mContext.getString(R.string.new_subscriptions_group) + grayJayBackupUrl, optionItem -> {\r\n             dialogPresenter.closeDialog();\r\n             SimpleEditDialog.show(mContext,\r\n-                    mContext.getString(R.string.new_subscriptions_group),\r\n+                    mContext.getString(R.string.new_subscriptions_group) + grayJayBackupUrl,\r\n                     null,\r\n                     newValue -> {\r\n                         if (mService.findChannelGroup(newValue) != null) {\r",
      "parent_sha": "db2c2d3f3f7fa47e05cda6e85957f25637e57b15"
    }
  },
  {
    "oid": "e647dd8cd7f457b00fda0bf6fffc9f0f1c59c5c1",
    "message": "global volume too loud fix",
    "date": "2023-08-26T19:21:49Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/e647dd8cd7f457b00fda0bf6fffc9f0f1c59c5c1",
    "details": {
      "sha": "1d479da0e88ffdf509c08a9c3be126604b7347fd",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/utils/Utils.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/e647dd8cd7f457b00fda0bf6fffc9f0f1c59c5c1/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/e647dd8cd7f457b00fda0bf6fffc9f0f1c59c5c1/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java?ref=e647dd8cd7f457b00fda0bf6fffc9f0f1c59c5c1",
      "patch": "@@ -260,7 +260,7 @@ public static void setGlobalVolume(Context context, int volume) {\n         if (context != null) {\r\n             AudioManager audioManager = (AudioManager) context.getSystemService(GLOBAL_VOLUME_SERVICE);\r\n             if (audioManager != null) {\r\n-                int streamMaxVolume = audioManager.getStreamMaxVolume(GLOBAL_VOLUME_TYPE);\r\n+                int streamMaxVolume = audioManager.getStreamMaxVolume(GLOBAL_VOLUME_TYPE) / 2; // max volume is too loud\r\n                 audioManager.setStreamVolume(GLOBAL_VOLUME_TYPE, (int) Math.ceil(streamMaxVolume / 100f * volume), 0);\r\n             }\r\n         }\r\n@@ -275,7 +275,7 @@ public static int getGlobalVolume(Context context) {\n         if (context != null) {\r\n             AudioManager audioManager = (AudioManager) context.getSystemService(GLOBAL_VOLUME_SERVICE);\r\n             if (audioManager != null) {\r\n-                int streamMaxVolume = audioManager.getStreamMaxVolume(GLOBAL_VOLUME_TYPE);\r\n+                int streamMaxVolume = audioManager.getStreamMaxVolume(GLOBAL_VOLUME_TYPE) / 2; // max volume is too loud\r\n                 int streamVolume = audioManager.getStreamVolume(GLOBAL_VOLUME_TYPE);\r\n \r\n                 return (int) Math.ceil(streamVolume / (streamMaxVolume / 100f));\r",
      "parent_sha": "28c9203292a56802a74b248f5401d7f7c39568a7"
    }
  },
  {
    "oid": "9ebe35a67dbc72f78046476dd6dae9fd2473c82e",
    "message": "voice search auto submit fix 3",
    "date": "2020-11-12T02:53:33Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/9ebe35a67dbc72f78046476dd6dae9fd2473c82e",
    "details": {
      "sha": "929fb1e58355161493780ec507af78f62033ba1d",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/search/tags/SearchTagsFragment.java",
      "status": "modified",
      "additions": 4,
      "deletions": 15,
      "changes": 19,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/9ebe35a67dbc72f78046476dd6dae9fd2473c82e/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/9ebe35a67dbc72f78046476dd6dae9fd2473c82e/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fsearch%2Ftags%2FSearchTagsFragment.java?ref=9ebe35a67dbc72f78046476dd6dae9fd2473c82e",
      "patch": "@@ -19,7 +19,7 @@ public class SearchTagsFragment extends SearchTagsFragmentBase {\n     private SearchPresenter mSearchPresenter;\r\n     private VideoGroupObjectAdapter mItemResultsAdapter;\r\n     private String mSearchQuery;\r\n-    private int mNewQueryLength;\r\n+    private String mNewQuery;\r\n \r\n     @Override\r\n     public void onCreate(Bundle savedInstanceState) {\r\n@@ -75,10 +75,12 @@ public void startSearch(String searchText) {\n     public boolean onQueryTextChange(String newQuery) {\r\n         loadSearchTags(newQuery);\r\n \r\n-        if (isNewQueryChanged(newQuery)) {\r\n+        if (TextUtils.isEmpty(mNewQuery)) {\r\n             loadSearchResult(newQuery);\r\n         }\r\n \r\n+        mNewQuery = newQuery;\r\n+\r\n         return true;\r\n     }\r\n \r\n@@ -95,19 +97,6 @@ private void loadSearchResult(String searchQuery) {\n         }\r\n     }\r\n \r\n-    private boolean isNewQueryChanged(String searchQuery) {\r\n-        if (TextUtils.isEmpty(searchQuery)) {\r\n-            mNewQueryLength = 0;\r\n-            return false;\r\n-        }\r\n-\r\n-        int newLength = searchQuery.length();\r\n-        boolean isChanged = Math.abs(newLength - mNewQueryLength) != 1;\r\n-        mNewQueryLength = newLength;\r\n-\r\n-        return isChanged;\r\n-    }\r\n-\r\n     public void focusOnSearch() {\r\n         getView().findViewById(R.id.lb_search_bar).requestFocus();\r\n     }\r",
      "parent_sha": "470eb8f8a5a25698b9266c48e46d6d358826c9e1"
    }
  },
  {
    "oid": "02f138e2b4f121424923c6d64dc5635275be78d5",
    "message": "move fullscreen option",
    "date": "2024-02-24T19:03:08Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/02f138e2b4f121424923c6d64dc5635275be78d5",
    "details": {
      "sha": "34252ce376501fc1aa7b2aea2751e9eb64e06ea3",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/settings/GeneralSettingsPresenter.java",
      "status": "modified",
      "additions": 7,
      "deletions": 7,
      "changes": 14,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/02f138e2b4f121424923c6d64dc5635275be78d5/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FGeneralSettingsPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/02f138e2b4f121424923c6d64dc5635275be78d5/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FGeneralSettingsPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FGeneralSettingsPresenter.java?ref=02f138e2b4f121424923c6d64dc5635275be78d5",
      "patch": "@@ -502,13 +502,6 @@ private void appendHistoryCategory(AppDialogPresenter settingsPresenter) {\n     private void appendMiscCategory(AppDialogPresenter settingsPresenter) {\r\n         List<OptionItem> options = new ArrayList<>();\r\n \r\n-        options.add(UiOptionItem.from(getContext().getString(R.string.fullscreen_mode),\r\n-                option -> {\r\n-                    mGeneralData.enableFullscreenMode(option.isSelected());\r\n-                    mRestartApp = true;\r\n-                },\r\n-                mGeneralData.isFullscreenModeEnabled()));\r\n-\r\n         options.add(UiOptionItem.from(getContext().getString(R.string.multi_profiles),\r\n                 option -> {\r\n                     AppPrefs.instance(getContext()).enableMultiProfiles(option.isSelected());\r\n@@ -580,6 +573,13 @@ private void appendMiscCategory(AppDialogPresenter settingsPresenter) {\n                 },\r\n                 mGeneralData.isOldChannelLookEnabled()));\r\n \r\n+        options.add(UiOptionItem.from(getContext().getString(R.string.fullscreen_mode),\r\n+                option -> {\r\n+                    mGeneralData.enableFullscreenMode(option.isSelected());\r\n+                    mRestartApp = true;\r\n+                },\r\n+                mGeneralData.isFullscreenModeEnabled()));\r\n+\r\n         options.add(UiOptionItem.from(getContext().getString(R.string.remember_position_subscriptions),\r\n                 option -> mGeneralData.rememberSubscriptionsPosition(option.isSelected()),\r\n                 mGeneralData.isRememberSubscriptionsPositionEnabled()));\r",
      "parent_sha": "b37fe3a64c2faf45ad1075a9853b0a448d60687f"
    }
  },
  {
    "oid": "ec7e628003e6c6e47ad099d990b014dd7b586fa2",
    "message": "player: live buffer fix",
    "date": "2022-08-15T23:11:11Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/ec7e628003e6c6e47ad099d990b014dd7b586fa2",
    "details": {
      "sha": "66ca70f9532834107943f49c76cf034f787d8b8a",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/LiveDashManifestParser.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/ec7e628003e6c6e47ad099d990b014dd7b586fa2/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/ec7e628003e6c6e47ad099d990b014dd7b586fa2/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java?ref=ec7e628003e6c6e47ad099d990b014dd7b586fa2",
      "patch": "@@ -33,9 +33,9 @@ public class LiveDashManifestParser extends DashManifestParser {\n     private static final String TAG = LiveDashManifestParser.class.getSimpleName();\r\n     // Usually gaming streams. 10 hours max.\r\n     private static final long MAX_PAST_STREAM_LENGTH_MS = 10 * 60 * 60 * 1_000;\r\n-    // Should be close to zero but not zero (small buffer size fix on Radio Record).\r\n+    // Should be close to zero but not zero (buffer size fix on Radio Record).\r\n     // Higher values may produce 'url not working' error.\r\n-    private static final long MAX_LIVE_STREAM_LENGTH_MS = 30 * 60 * 1_000;\r\n+    private static final long MAX_LIVE_STREAM_LENGTH_MS = 5 * 60 * 1_000;\r\n     private DashManifest mOldManifest;\r\n     private long mOldSegmentNum;\r\n \r",
      "parent_sha": "f803694c03df5a2a071c93a79716cb334b41dfe6"
    }
  },
  {
    "oid": "5c6b4fefdc3d6e7a40256ae40be8b15de70f6e12",
    "message": "player suggestions: focus current item fix",
    "date": "2023-05-04T01:58:34Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/5c6b4fefdc3d6e7a40256ae40be8b15de70f6e12",
    "details": {
      "sha": "c97c43f89c1b8010bba2bfbe442bae4c06c1273a",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/SuggestionsLoaderManager.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/5c6b4fefdc3d6e7a40256ae40be8b15de70f6e12/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FSuggestionsLoaderManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/5c6b4fefdc3d6e7a40256ae40be8b15de70f6e12/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FSuggestionsLoaderManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FSuggestionsLoaderManager.java?ref=5c6b4fefdc3d6e7a40256ae40be8b15de70f6e12",
      "patch": "@@ -454,8 +454,8 @@ public void focusAndContinueIfNeeded(VideoGroup group) {\n             getController().focusSuggestedItem(group.getVideos().get(index));\r\n             // Stop the continuation loop\r\n             mContinuationCount = 0;\r\n-        } else if (mContinuationCount > 5) {\r\n-            // Stop the continuation loop\r\n+        } else if (mContinuationCount > 5 || !video.hasPlaylist()) {\r\n+            // Stop the continuation loop. Maybe the video isn't there.\r\n             mContinuationCount = 0;\r\n         } else {\r\n             // load more and repeat\r",
      "parent_sha": "6d5a67da1c5ead319df3fdcd29941459892303fe"
    }
  },
  {
    "oid": "8844ec10cdfa07822154ca21fe8339b8ed1250d9",
    "message": "player: error fixer update 3",
    "date": "2024-07-21T18:59:05Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/8844ec10cdfa07822154ca21fe8339b8ed1250d9",
    "details": {
      "sha": "32ea172449e51f4e876a9d74cb6d3270b54ab6d6",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/VideoLoaderController.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/8844ec10cdfa07822154ca21fe8339b8ed1250d9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoLoaderController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/8844ec10cdfa07822154ca21fe8339b8ed1250d9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoLoaderController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FVideoLoaderController.java?ref=8844ec10cdfa07822154ca21fe8339b8ed1250d9",
      "patch": "@@ -119,10 +119,10 @@ private void onLongBuffering() {\n             getMainController().onPlayEnd();\r\n         } else {\r\n             updateErrorCounter(-1);\r\n-            if (mErrorCount > 2) {\r\n+            if (mErrorCount > 1) {\r\n                 // Switch between network engines in hope that one of them fixes the error\r\n-                //mPlayerTweaksData.setPlayerDataSource(getNextEngine());\r\n-                YouTubeServiceManager.instance().applyNoPlaybackFix();\r\n+                // Cronet engine do less buffering\r\n+                mPlayerTweaksData.setPlayerDataSource(PlayerTweaksData.PLAYER_DATA_SOURCE_CRONET);\r\n                 restartEngine();\r\n             }\r\n         }\r",
      "parent_sha": "b4bbb908f8c9041c77cadad41bde041db1da1572"
    }
  },
  {
    "oid": "9f97f8c51c8b307253c9479520a406cd7989f4bb",
    "message": "player volume exception fix",
    "date": "2025-01-15T13:32:57Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/9f97f8c51c8b307253c9479520a406cd7989f4bb",
    "details": {
      "sha": "92db35522e52289efb00a7cfcabdf84e554c0834",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/utils/Utils.java",
      "status": "modified",
      "additions": 31,
      "deletions": 13,
      "changes": 44,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/9f97f8c51c8b307253c9479520a406cd7989f4bb/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/9f97f8c51c8b307253c9479520a406cd7989f4bb/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Futils%2FUtils.java?ref=9f97f8c51c8b307253c9479520a406cd7989f4bb",
      "patch": "@@ -306,41 +306,59 @@ public static int getVolume(Context context, PlayerManager player) {\n     public static int getVolume(Context context, PlayerManager player, boolean normalize) {\r\n         if (context != null) {\r\n             if (Utils.isGlobalVolumeFixed(context)) {\r\n-                if (player == null) {\r\n-                    return -1;\r\n-                }\r\n-                return (int)(player.getVolume() * 100);\r\n+                return getPlayerVolume(player);\r\n             } else {\r\n-                return Utils.getGlobalVolume(context, normalize);\r\n+                try {\r\n+                    return Utils.getGlobalVolume(context, normalize);\r\n+                } catch (SecurityException e) {\r\n+                    // Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n+                    return getPlayerVolume(player);\r\n+                }\r\n             }\r\n         }\r\n \r\n         return 100;\r\n     }\r\n \r\n+    private static int getPlayerVolume(PlayerManager player) {\r\n+        if (player == null) {\r\n+            return -1;\r\n+        }\r\n+        return (int)(player.getVolume() * 100);\r\n+    }\r\n+\r\n     public static void setVolume(Context context, PlayerManager player, int volume) {\r\n         setVolume(context, player, volume, false);\r\n     }\r\n \r\n     /**\r\n      * Volume: 0 - 100\r\n      */\r\n-    @SuppressLint(\"StringFormatMatches\")\r\n     public static void setVolume(Context context, PlayerManager player, int volume, boolean normalize) {\r\n         if (context != null) {\r\n             if (Utils.isGlobalVolumeFixed(context)) {\r\n-                if (player == null) {\r\n-                    return;\r\n-                }\r\n-                player.setVolume(volume / 100f);\r\n-                MessageHelpers.showMessage(context, context.getString(R.string.volume, getVolume(context, player, normalize)));\r\n+                setPlayerVolume(context, player, volume);\r\n             } else {\r\n-                Utils.setGlobalVolume(context, volume, normalize);\r\n-                showSystemVolumeUI(context);\r\n+                try {\r\n+                    Utils.setGlobalVolume(context, volume, normalize);\r\n+                    showSystemVolumeUI(context);\r\n+                } catch (SecurityException e) {\r\n+                    // Permission denial: writing to settings requires:android.permission.WRITE_SECURE_SETTINGS\r\n+                    setPlayerVolume(context, player, volume);\r\n+                }\r\n             }\r\n         }\r\n     }\r\n \r\n+    @SuppressLint(\"StringFormatMatches\")\r\n+    private static void setPlayerVolume(Context context, PlayerManager player, int volume) {\r\n+        if (player == null) {\r\n+            return;\r\n+        }\r\n+        player.setVolume(volume / 100f);\r\n+        MessageHelpers.showMessage(context, context.getString(R.string.volume, getPlayerVolume(player)));\r\n+    }\r\n+\r\n     public static void volumeUp(Context context, PlayerManager player, boolean up) {\r\n         if (player != null) {\r\n             int volume = Utils.getVolume(context, player);\r",
      "parent_sha": "c3c7b6cb72f8f78356fdaff85f2618c3b62bf2ba"
    }
  },
  {
    "oid": "1d15f6dca849b9f40fa57f8acbcdfb0e5dd42f17",
    "message": "card progress: sync fix",
    "date": "2022-01-04T23:46:41Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/1d15f6dca849b9f40fa57f8acbcdfb0e5dd42f17",
    "details": {
      "sha": "e1b10f80653f4bb4facce93ecd2bc1a95ed9a906",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/adapter/VideoGroupObjectAdapter.java",
      "status": "modified",
      "additions": 7,
      "deletions": 5,
      "changes": 12,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/1d15f6dca849b9f40fa57f8acbcdfb0e5dd42f17/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fadapter%2FVideoGroupObjectAdapter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/1d15f6dca849b9f40fa57f8acbcdfb0e5dd42f17/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fadapter%2FVideoGroupObjectAdapter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fadapter%2FVideoGroupObjectAdapter.java?ref=1d15f6dca849b9f40fa57f8acbcdfb0e5dd42f17",
      "patch": "@@ -138,11 +138,13 @@ public void remove(VideoGroup group) {\n \r\n     public void sync(VideoGroup group) {\r\n         for (Video video : group.getVideos()) {\r\n-            int index = mVideoItems.indexOf(video);\r\n-            if (index != -1) {\r\n-                Video origin = mVideoItems.get(index);\r\n-                origin.sync(video);\r\n-                notifyItemRangeChanged(index, 1);\r\n+            // Search for multiple occurrences (e.g. History section)\r\n+            for (int i = 0; i < mVideoItems.size(); i++) {\r\n+                Video origin = mVideoItems.get(i);\r\n+                if (origin.equals(video)) {\r\n+                    origin.sync(video);\r\n+                    notifyItemRangeChanged(i, 1);\r\n+                }\r\n             }\r\n         }\r\n     }\r",
      "parent_sha": "bfe0240709b3b6c95c029fea3faf98dd2084c892"
    }
  },
  {
    "oid": "601fe41dc9da67ddedf0a70acafd607021fdbdbe",
    "message": "settings: change defaults",
    "date": "2023-05-26T16:15:12Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/601fe41dc9da67ddedf0a70acafd607021fdbdbe",
    "details": {
      "sha": "445242ac9041291a939124d37c2444ff17a917fa",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/prefs/PlayerTweaksData.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/601fe41dc9da67ddedf0a70acafd607021fdbdbe/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FPlayerTweaksData.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/601fe41dc9da67ddedf0a70acafd607021fdbdbe/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FPlayerTweaksData.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fprefs%2FPlayerTweaksData.java?ref=601fe41dc9da67ddedf0a70acafd607021fdbdbe",
      "patch": "@@ -468,7 +468,7 @@ private void restoreData() {\n         mScreenOffTimeoutSec = Helpers.parseInt(split, 33, 0);\r\n         mIsUIAnimationsEnabled = Helpers.parseBoolean(split, 34, false);\r\n         mIsLikesCounterEnabled = Helpers.parseBoolean(split, 35, true);\r\n-        mIsChapterNotificationEnabled = Helpers.parseBoolean(split, 36, true);\r\n+        mIsChapterNotificationEnabled = Helpers.parseBoolean(split, 36, false);\r\n \r\n         updateDefaultValues();\r\n     }\r",
      "parent_sha": "6b4ccf999e91409804b046f4d8d2a871bc19e614"
    }
  },
  {
    "oid": "865d8d4f3359fb4e93e7c86bb93534f3051efe75",
    "message": "Fix: send keys to another app error",
    "date": "2022-04-04T17:46:42Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/865d8d4f3359fb4e93e7c86bb93534f3051efe75",
    "details": {
      "sha": "2324f17143c75b4c7a7abfce21ab74ff16b4c7fd",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/misc/KeyTranslator.java",
      "status": "modified",
      "additions": 7,
      "deletions": 2,
      "changes": 9,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/865d8d4f3359fb4e93e7c86bb93534f3051efe75/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FKeyTranslator.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/865d8d4f3359fb4e93e7c86bb93534f3051efe75/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FKeyTranslator.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fmisc%2FKeyTranslator.java?ref=865d8d4f3359fb4e93e7c86bb93534f3051efe75",
      "patch": "@@ -37,8 +37,13 @@ public final boolean translate(KeyEvent event) {\n             handled = true;\r\n \r\n             RxUtils.runAsync(() -> {\r\n-                Instrumentation instrumentation = new Instrumentation();\r\n-                instrumentation.sendKeySync(newKeyEvent);\r\n+                try {\r\n+                    Instrumentation instrumentation = new Instrumentation();\r\n+                    instrumentation.sendKeySync(newKeyEvent);\r\n+                } catch (SecurityException e) {\r\n+                    // Injecting to another application requires INJECT_EVENTS permission\r\n+                    e.printStackTrace();\r\n+                }\r\n             });\r\n         }\r\n \r",
      "parent_sha": "1ca46471bfdd0abce7089f5c8aa74cdc3e85fbfc"
    }
  },
  {
    "oid": "17dfe04ef7779fd3ad606f97ce2ffcdce0250ee9",
    "message": "dearrow upd",
    "date": "2024-02-05T03:42:38Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/17dfe04ef7779fd3ad606f97ce2ffcdce0250ee9",
    "details": {
      "sha": "a9cf86226d6daa029e67cd654c8c3ed1b1ea2e9f",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/presenters/settings/DeArrowSettingsPresenter.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/17dfe04ef7779fd3ad606f97ce2ffcdce0250ee9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FDeArrowSettingsPresenter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/17dfe04ef7779fd3ad606f97ce2ffcdce0250ee9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FDeArrowSettingsPresenter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fpresenters%2Fsettings%2FDeArrowSettingsPresenter.java?ref=17dfe04ef7779fd3ad606f97ce2ffcdce0250ee9",
      "patch": "@@ -31,7 +31,7 @@ public static DeArrowSettingsPresenter instance(Context context) {\n     public void show(Runnable onFinish) {\r\n         AppDialogPresenter settingsPresenter = AppDialogPresenter.instance(getContext());\r\n \r\n-        appendDeArrowSwitch(settingsPresenter);\r\n+        //appendDeArrowSwitch(settingsPresenter);\r\n         appendThumbQuality(settingsPresenter);\r\n \r\n         settingsPresenter.showDialog(getContext().getString(R.string.dearrow_provider), onFinish);\r",
      "parent_sha": "b761594aa3b5110ff1a2265131fd97c0a807b5f3"
    }
  },
  {
    "oid": "fbbc08e010104e205d117693e49cd947678d7890",
    "message": "player: labels: vertical videos fix: upd",
    "date": "2022-06-28T01:05:02Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/fbbc08e010104e205d117693e49cd947678d7890",
    "details": {
      "sha": "e209f16ff49de2365d8c8d1a5ffa608faa2d3775",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/selector/TrackSelectorUtil.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/fbbc08e010104e205d117693e49cd947678d7890/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorUtil.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/fbbc08e010104e205d117693e49cd947678d7890/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorUtil.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2Fselector%2FTrackSelectorUtil.java?ref=fbbc08e010104e205d117693e49cd947678d7890",
      "patch": "@@ -230,8 +230,8 @@ private static Pair<String, String> getResolutionPrefixAndHeight(Format format)\n             return null;\r\n         }\r\n \r\n-        //int originHeight = getOriginHeight(Math.min(height, width));\r\n-        int originHeight = getOriginHeight(height);\r\n+        int originHeight = getOriginHeight(Math.min(height, width));\r\n+        //int originHeight = getOriginHeight(height);\r\n \r\n         String prefix = getResolutionPrefix(originHeight);\r\n \r",
      "parent_sha": "66319f6fb756a61ff71a41746dd339fcbefa3696"
    }
  },
  {
    "oid": "f9f50632faefa4c1b7700aa984f6592665d34cd1",
    "message": "bugfixes",
    "date": "2023-05-27T21:34:24Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/f9f50632faefa4c1b7700aa984f6592665d34cd1",
    "details": {
      "sha": "57bf406d80d11069eea6021d12ef46b0c4c48f66",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/controllers/SuggestionsController.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/f9f50632faefa4c1b7700aa984f6592665d34cd1/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/f9f50632faefa4c1b7700aa984f6592665d34cd1/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fcontrollers%2FSuggestionsController.java?ref=f9f50632faefa4c1b7700aa984f6592665d34cd1",
      "patch": "@@ -585,7 +585,7 @@ private void showChapterDialog(ChapterItem chapter) {\n         AppDialogPresenter dialogPresenter = AppDialogPresenter.instance(getActivity());\r\n \r\n         if ((dialogPresenter.isDialogShown() && dialogPresenter.getId() != CHAPTER_NOTIFICATION_Id) ||\r\n-                getPlayer().isOverlayShown() || getPlayer().isInPIPMode()) {\r\n+                getPlayer() == null || getPlayer().isOverlayShown() || getPlayer().isInPIPMode()) {\r\n             // Another dialog is opened. Don't distract a user.\r\n             return;\r\n         }\r",
      "parent_sha": "14968aee57ab858b3e2c97e0fd083c50081c488c"
    }
  },
  {
    "oid": "9c2896bc6ae0c7a22856842b16975783e37a4eec",
    "message": "group duplication hack",
    "date": "2021-08-12T00:06:37Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/9c2896bc6ae0c7a22856842b16975783e37a4eec",
    "details": {
      "sha": "7a9d373cb0dc8cd3c9ef61263df7331e16304ecd",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/adapter/VideoGroupObjectAdapter.java",
      "status": "modified",
      "additions": 16,
      "deletions": 5,
      "changes": 21,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/9c2896bc6ae0c7a22856842b16975783e37a4eec/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fadapter%2FVideoGroupObjectAdapter.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/9c2896bc6ae0c7a22856842b16975783e37a4eec/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fadapter%2FVideoGroupObjectAdapter.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fadapter%2FVideoGroupObjectAdapter.java?ref=9c2896bc6ae0c7a22856842b16975783e37a4eec",
      "patch": "@@ -1,23 +1,34 @@\n package com.liskovsoft.smartyoutubetv2.tv.adapter;\r\n \r\n+import androidx.annotation.NonNull;\r\n import androidx.leanback.widget.ObjectAdapter;\r\n import androidx.leanback.widget.Presenter;\r\n import com.liskovsoft.smartyoutubetv2.common.app.models.data.Video;\r\n import com.liskovsoft.smartyoutubetv2.common.app.models.data.VideoGroup;\r\n \r\n import java.util.ArrayList;\r\n+import java.util.Collection;\r\n import java.util.List;\r\n \r\n public class VideoGroupObjectAdapter extends ObjectAdapter {\r\n     private static final String TAG = VideoGroupObjectAdapter.class.getSimpleName();\r\n     private final List<Video> mVideoItems;\r\n-\r\n-    // TODO: Select presenter based on the video item type. Such channel, playlist, or simple video\r\n-    // https://github.com/googlearchive/leanback-showcase/blob/master/app/src/main/java/android/support/v17/leanback/supportleanbackshowcase/app/page/PageAndListRowFragment.java\r\n-    // CardPresenterSelector cardPresenter = new CardPresenterSelector(getActivity());\r\n+    \r\n     public VideoGroupObjectAdapter(VideoGroup videoGroup, Presenter presenter) {\r\n         super(presenter);\r\n-        mVideoItems = new ArrayList<>();\r\n+        mVideoItems = new ArrayList<Video>() {\r\n+            @Override\r\n+            public boolean addAll(@NonNull Collection<? extends Video> c) {\r\n+                // TODO: remove the hack someday.\r\n+                // Dirty hack for avoiding group duplication.\r\n+                // This could happen everywhere: Home, Subscriptions etc.\r\n+                if (size() >= c.size() && c.contains(get(c.size() - 1))) {\r\n+                    return false;\r\n+                }\r\n+\r\n+                return super.addAll(c);\r\n+            }\r\n+        };\r\n \r\n         if (videoGroup != null) {\r\n             append(videoGroup);\r",
      "parent_sha": "4fd64d25b84a420b90c4b3ac5bf2b2d3d0b867e5"
    }
  },
  {
    "oid": "3109f1c170be8beafd63f9fe2474aa5a4d6d0e9b",
    "message": "cast: refactor",
    "date": "2021-03-03T06:05:32Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/3109f1c170be8beafd63f9fe2474aa5a4d6d0e9b",
    "details": {
      "sha": "03868259ba9c415f6fb6ce3173642d2236e810d8",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/app/models/playback/managers/RemoteControlManager.java",
      "status": "modified",
      "additions": 4,
      "deletions": 6,
      "changes": 10,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/3109f1c170be8beafd63f9fe2474aa5a4d6d0e9b/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FRemoteControlManager.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/3109f1c170be8beafd63f9fe2474aa5a4d6d0e9b/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FRemoteControlManager.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fapp%2Fmodels%2Fplayback%2Fmanagers%2FRemoteControlManager.java?ref=3109f1c170be8beafd63f9fe2474aa5a4d6d0e9b",
      "patch": "@@ -30,7 +30,6 @@ public class RemoteControlManager extends PlayerEventListenerHelper {\n     private Disposable mPostPlayAction;\r\n     private Disposable mPostStateAction;\r\n     private Video mVideo;\r\n-    private boolean mConnected;\r\n \r\n     public RemoteControlManager(Context context, SuggestionsLoader suggestionsLoader) {\r\n         MediaService mediaService = YouTubeMediaService.instance();\r\n@@ -89,7 +88,7 @@ public void onEngineReleased() {\n     }\r\n \r\n     private void postStartPlaying(@Nullable Video item, boolean isPlaying) {\r\n-        if (!mRemoteControlData.isDeviceLinkEnabled() || !mConnected) {\r\n+        if (!mRemoteControlData.isDeviceLinkEnabled()) {\r\n             return;\r\n         }\r\n \r\n@@ -109,7 +108,7 @@ private void postStartPlaying(@Nullable Video item, boolean isPlaying) {\n     }\r\n \r\n     private void postStartPlaying(String videoId, long positionMs, long durationMs, boolean isPlaying) {\r\n-        if (!mRemoteControlData.isDeviceLinkEnabled() || !mConnected) {\r\n+        if (!mRemoteControlData.isDeviceLinkEnabled()) {\r\n             return;\r\n         }\r\n \r\n@@ -121,7 +120,7 @@ private void postStartPlaying(String videoId, long positionMs, long durationMs,\n     }\r\n \r\n     private void postState(long positionMs, long durationMs, boolean isPlaying) {\r\n-        if (!mRemoteControlData.isDeviceLinkEnabled() || !mConnected) {\r\n+        if (!mRemoteControlData.isDeviceLinkEnabled()) {\r\n             return;\r\n         }\r\n \r\n@@ -242,6 +241,7 @@ private void processCommand(Command command) {\n                 break;\r\n             case Command.TYPE_GET_STATE:\r\n                 if (getController() != null) {\r\n+                    Utils.moveAppToForeground(getActivity());\r\n                     postStartPlaying(getController().getVideo(), getController().isPlaying());\r\n                 } else {\r\n                     postStartPlaying(null, false);\r\n@@ -252,14 +252,12 @@ private void processCommand(Command command) {\n                 break;\r\n             case Command.TYPE_CONNECTED:\r\n                 if (getActivity() != null) {\r\n-                    mConnected = true;\r\n                     //Utils.moveAppToForeground(getActivity());\r\n                     //MessageHelpers.showLongMessage(getActivity(), getActivity().getString(R.string.device_connected, command.getDeviceName()));\r\n                 }\r\n                 break;\r\n             case Command.TYPE_DISCONNECTED:\r\n                 if (getActivity() != null) {\r\n-                    mConnected = false;\r\n                     //MessageHelpers.showLongMessage(getActivity(), getActivity().getString(R.string.device_disconnected, command.getDeviceName()));\r\n                 }\r\n                 break;\r",
      "parent_sha": "94cf577019fac5e85282b8a47578d577e6c23db8"
    }
  },
  {
    "oid": "56484f3efd6c074f9fad3fdb470c0dd404ce2965",
    "message": "openvpn: arch fix",
    "date": "2022-03-31T14:57:55Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/56484f3efd6c074f9fad3fdb470c0dd404ce2965",
    "details": {
      "sha": "6ea978f6ebe00fb570188d24a0a30afe7d5a3f16",
      "filename": "openvpn/src/main/java/de/blinkt/openvpn/core/NativeUtils.java",
      "status": "modified",
      "additions": 7,
      "deletions": 3,
      "changes": 10,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/56484f3efd6c074f9fad3fdb470c0dd404ce2965/openvpn%2Fsrc%2Fmain%2Fjava%2Fde%2Fblinkt%2Fopenvpn%2Fcore%2FNativeUtils.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/56484f3efd6c074f9fad3fdb470c0dd404ce2965/openvpn%2Fsrc%2Fmain%2Fjava%2Fde%2Fblinkt%2Fopenvpn%2Fcore%2FNativeUtils.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/openvpn%2Fsrc%2Fmain%2Fjava%2Fde%2Fblinkt%2Fopenvpn%2Fcore%2FNativeUtils.java?ref=56484f3efd6c074f9fad3fdb470c0dd404ce2965",
      "patch": "@@ -10,9 +10,13 @@\n \n public class NativeUtils {\n     static {\n-        System.loadLibrary(\"ovpnutil\");\n-        if (Build.VERSION.SDK_INT == Build.VERSION_CODES.JELLY_BEAN)\n-            System.loadLibrary(\"jbcrypto\");\n+        try {\n+            System.loadLibrary(\"ovpnutil\");\n+            if (Build.VERSION.SDK_INT == Build.VERSION_CODES.JELLY_BEAN)\n+                System.loadLibrary(\"jbcrypto\");\n+        } catch (UnsatisfiedLinkError e) { // Unsupported arch fix\n+            e.printStackTrace();\n+        }\n     }\n     public static native byte[] rsasign(byte[] input, int pkey) throws InvalidKeyException;\n     public static native String[] getIfconfig() throws IllegalArgumentException;",
      "parent_sha": "21c97b8cceb2e0509d7844ea14a153dc215cc181"
    }
  },
  {
    "oid": "c29883d2a18de30ef2f07dfdbd2bf128028109d9",
    "message": "player: dash live stream: recreate missing segments: fix2",
    "date": "2022-08-11T02:10:41Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/c29883d2a18de30ef2f07dfdbd2bf128028109d9",
    "details": {
      "sha": "47de75784c9d314fc9fddaf1cd387de40f97fbc1",
      "filename": "common/src/main/java/com/liskovsoft/smartyoutubetv2/common/exoplayer/LiveDashManifestParser.java",
      "status": "modified",
      "additions": 5,
      "deletions": 4,
      "changes": 9,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/c29883d2a18de30ef2f07dfdbd2bf128028109d9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/c29883d2a18de30ef2f07dfdbd2bf128028109d9/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/common%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Fcommon%2Fexoplayer%2FLiveDashManifestParser.java?ref=c29883d2a18de30ef2f07dfdbd2bf128028109d9",
      "patch": "@@ -194,13 +194,14 @@ private static void recreateMissingSegments(DashManifest manifest) {\n             return;\r\n         }\r\n \r\n+        // TODO: remove fix below\r\n+        if (minUpdatePeriodMs <= 2_000) {\r\n+            return; // url won't work on small (2_000Ms) segments\r\n+        }\r\n+\r\n         if (timeShiftBufferDepthMs > 0) { // active live stream\r\n             Helpers.setField(manifest, \"timeShiftBufferDepthMs\", timeShiftBufferDepthMs + (segmentCount * minUpdatePeriodMs));\r\n         } else { // past live stream\r\n-            // TODO: remove fix below\r\n-            if (minUpdatePeriodMs <= 2_000) {\r\n-                return; // first segments won't work for some reasons\r\n-            }\r\n             Helpers.setField(manifest, \"durationMs\", durationMs + (segmentCount * minUpdatePeriodMs));\r\n         }\r\n \r",
      "parent_sha": "4756aee807480d0531d52bea62a0d36d2aa6c445"
    }
  },
  {
    "oid": "d9a664f85943c84b9319c2b15908f50c7cee2b93",
    "message": "refactor",
    "date": "2021-02-06T02:27:52Z",
    "url": "https://github.com/yuliskov/SmartTube/commit/d9a664f85943c84b9319c2b15908f50c7cee2b93",
    "details": {
      "sha": "7734ee120e05195ec60a7e6415a14f0acd572b03",
      "filename": "smarttubetv/src/main/java/com/liskovsoft/smartyoutubetv2/tv/ui/mod/leanback/playerglue/tweaks/MaxControlsVideoPlayerGlue.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/yuliskov/SmartTube/blob/d9a664f85943c84b9319c2b15908f50c7cee2b93/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FMaxControlsVideoPlayerGlue.java",
      "raw_url": "https://github.com/yuliskov/SmartTube/raw/d9a664f85943c84b9319c2b15908f50c7cee2b93/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FMaxControlsVideoPlayerGlue.java",
      "contents_url": "https://api.github.com/repos/yuliskov/SmartTube/contents/smarttubetv%2Fsrc%2Fmain%2Fjava%2Fcom%2Fliskovsoft%2Fsmartyoutubetv2%2Ftv%2Fui%2Fmod%2Fleanback%2Fplayerglue%2Ftweaks%2FMaxControlsVideoPlayerGlue.java?ref=d9a664f85943c84b9319c2b15908f50c7cee2b93",
      "patch": "@@ -103,14 +103,14 @@ public void setQualityInfo(String info) {\n     }\r\n \r\n     private void updateTickle() {\r\n+        mHandler.removeCallbacks(mTickleHandler);\r\n+\r\n         if (isControlsVisible()) {\r\n             if (mTickleListener != null) {\r\n                 mTickleListener.onTickle();\r\n             }\r\n \r\n             mHandler.postDelayed(mTickleHandler, 10_000);\r\n-        } else {\r\n-            mHandler.removeCallbacks(mTickleHandler);\r\n         }\r\n     }\r\n \r",
      "parent_sha": "89b04cb1035f9b849af24d6acee13650c71897fa"
    }
  }
]